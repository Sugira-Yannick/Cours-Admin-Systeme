<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module-Kit : Routage Inter-VLAN</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        :root {
            --primary-red: #dc3545;
            --primary-orange: #fd7e14;
            --primary-green: #28a745;
            --primary-blue: #007bff;
            --primary-purple: #6f42c1;
            --primary-dark: #343a40;
            --primary-light: #f8f9fa;
            --code-bg: #f5f5f5;
            --border-color: #dee2e6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--primary-dark);
            background-color: var(--primary-light);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Syst√®me de Couleurs */
        .critical { color: var(--primary-red); font-weight: bold; }
        .warning { color: var(--primary-orange); font-style: italic; }
        .success { color: var(--primary-green); }
        .info { color: var(--primary-blue); }
        .concept { color: var(--primary-purple); font-weight: bold; }

        .red-border { border-left: 4px solid var(--primary-red); padding-left: 15px; margin: 15px 0; }
        .orange-border { border-left: 4px solid var(--primary-orange); padding-left: 15px; margin: 15px 0; }
        .green-border { border-left: 4px solid var(--primary-green); padding-left: 15px; margin: 15px 0; }
        .blue-border { border-left: 4px solid var(--primary-blue); padding-left: 15px; margin: 15px 0; }
        .purple-border { border-left: 4px solid var(--primary-purple); padding-left: 15px; margin: 15px 0; }

        /* En-t√™te et Sections */
        header {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-purple));
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        section {
            background: white;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            border: 1px solid var(--border-color);
        }

        h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h2 i { font-size: 1.3rem; }

        h3 {
            color: var(--primary-dark);
            margin: 15px 0 10px 0;
        }

        /* Table des mati√®res */
        #toc {
            background: var(--primary-light);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
        }

        #toc h2 { margin-top: 0; }

        #toc ul {
            list-style: none;
            columns: 2;
        }

        #toc li {
            margin-bottom: 8px;
        }

        #toc a {
            color: var(--primary-blue);
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        #toc a:hover {
            text-decoration: underline;
            color: var(--primary-purple);
        }

        /* Code et Pr√© */
        pre, code {
            font-family: 'Courier New', monospace;
            background-color: var(--code-bg);
            border-radius: 5px;
        }

        pre {
            padding: 15px;
            overflow-x: auto;
            margin: 15px 0;
            border: 1px solid var(--border-color);
        }

        code {
            padding: 2px 6px;
            font-size: 0.9em;
        }

        .command { color: var(--primary-blue); }
        .comment { color: var(--primary-green); font-style: italic; }
        .config { color: var(--primary-purple); }

        /* Tableaux */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border: 1px solid var(--border-color);
        }

        th {
            background-color: var(--primary-blue);
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f2f2f2;
        }

        /* Interactivit√© */
        .toggle-btn {
            background-color: var(--primary-blue);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px 0;
            transition: background-color 0.3s;
        }

        .toggle-btn:hover {
            background-color: var(--primary-purple);
        }

        .toggle-content {
            display: none;
            padding: 15px;
            background-color: var(--primary-light);
            border-radius: 5px;
            margin-top: 10px;
            border: 1px solid var(--border-color);
        }

        .quiz-question {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid var(--primary-blue);
        }

        .quiz-option {
            margin: 10px 0;
            padding: 10px;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 1px solid var(--border-color);
        }

        .quiz-option:hover {
            background-color: #e9ecef;
        }

        .correct { background-color: #d4edda !important; border-color: #c3e6cb !important; }
        .incorrect { background-color: #f8d7da !important; border-color: #f5c6cb !important; }

        /* Responsive */
        @media (max-width: 768px) {
            body { padding: 10px; }
            h1 { font-size: 2rem; }
            #toc ul { columns: 1; }
            pre { font-size: 0.9em; }
        }

        /* Micro-kit */
        .micro-kit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-top: 30px;
        }

        .micro-kit h2 { color: white; border-bottom-color: rgba(255,255,255,0.3); }
        
        .kit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .kit-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }
        
        .kit-card h4 {
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-network-wired"></i> MODULE-KIT DE MA√éTRISE : ROUTAGE INTER-VLAN</h1>
        <p class="tagline">Transformez votre compr√©hension Cisco en expertise op√©rationnelle</p>
        <p style="margin-top: 15px; font-size: 0.95rem; opacity: 0.8;">
            <i class="fas fa-exclamation-circle"></i> Note p√©dagogique trait√©e : Approfondissement des bases, focus sur les concepts fondamentaux (broadcast, int√©r√™ts/inconv√©nients des VLANs)
        </p>
    </header>

    <section id="toc">
        <h2><i class="fas fa-list"></i> TABLE DES MATI√àRES</h2>
        <ul>
            <li><a href="#analogie"><i class="fas fa-brain"></i> Analogie Syst√©mique</a></li>
            <li><a href="#modele-mental"><i class="fas fa-project-diagram"></i> Mod√®le Mental</a></li>
            <li><a href="#noyau-dur"><i class="fas fa-gem"></i> Noyau Dur</a></li>
            <li><a href="#pourquoi-vlans"><i class="fas fa-question-circle"></i> Pourquoi les VLANs ?</a></li>
            <li><a href="#comparaison"><i class="fas fa-balance-scale"></i> Comparaison des 3 m√©thodes</a></li>
            <li><a href="#securite"><i class="fas fa-shield-alt"></i> Profondeur S√©curit√©</a></li>
            <li><a href="#examen"><i class="fas fa-graduation-cap"></i> Profondeur Examen CCNA</a></li>
            <li><a href="#lab"><i class="fas fa-flask"></i> Lab Complet</a></li>
            <li><a href="#depannage"><i class="fas fa-bug"></i> Sc√©nario D√©pannage</a></li>
            <li><a href="#quiz"><i class="fas fa-check-circle"></i> Validation Interactive</a></li>
            <li><a href="#microkit"><i class="fas fa-file-pdf"></i> Micro-Kit Essentiel</a></li>
        </ul>
    </section>

    <section id="analogie">
        <h2><i class="fas fa-brain concept"></i> ANALOGIE SYST√âMIQUE</h2>
        <div class="purple-border">
            <p><strong>Th√®me central :</strong> <span class="concept">"Un syst√®me de bo√Ætes aux lettres dans un immeuble avec service de courrier interne"</span></p>
            <p><strong>M√©taphore :</strong> Imaginez un immeuble (votre r√©seau) o√π chaque famille (groupe d'utilisateurs) vit dans un appartement diff√©rent (VLAN). Chaque appartement a sa propre <strong>bo√Æte aux lettres</strong> (domaine de broadcast).</p>
            
            <h3>√âl√©ments cl√©s :</h3>
            <ul>
                <li><strong>Bo√Æte aux lettres par appartement :</strong> Chaque VLAN est un domaine de broadcast isol√©</li>
                <li><strong>Service de courrier :</strong> P√©riph√©rique L3 qui filtre le trafic entre bo√Ætes</li>
                <li><strong>Couloir de livraison :</strong> Trunk qui permet aux paquets √©tiquet√©s de circuler</li>
            </ul>
            
            <p class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>Risque analogique :</strong> Si on laisse toutes les portes ouvertes (pas de VLANs), un colis pi√©g√© (broadcast storm) peut inonder tout l'immeuble.</p>
        </div>
    </section>

    <section id="modele-mental">
        <h2><i class="fas fa-project-diagram concept"></i> MOD√àLE MENTAL P√âDAGOGIQUE</h2>
        <div class="mermaid">
            flowchart TD
    A[Probl√®me: Tous les h√¥tes dans<br>le m√™me domaine de broadcast] --> B{Causes}
    
    B --> C[üü¢ Trop de trafic broadcast<br>ex: ARP, NetBIOS]
    B --> D[üü¢ Manque de s√©curit√©<br>√©coute r√©seau facile]
    B --> E[üü¢ Mauvaise organisation<br>d√©partements m√©lang√©s]
    
    C --> F[Solution: Segmentation en VLANs]
    D --> F
    E --> F
    
    F --> G{Nouveau Probl√®me:<br>Les VLANs sont isol√©s!}
    
    G --> H[Besoin de communication<br>entre d√©partements]
    G --> I[Besoin d'acc√®s Internet<br>pour tous]
    
    H --> J[Solution: ROUTAGE INTER-VLAN]
    I --> J
    
    J --> K{Comment impl√©menter?}
    
    K --> L[Routeur Physique<br>1 lien par VLAN]
    K --> M[Router-on-a-Stick<br>1 trunk + sous-interfaces]
    K --> N[Switch L3 + SVI<br>Solution moderne]
    
    L --> O[‚ö†Ô∏è NON SCALABLE]
    M --> P[‚úÖ Bon pour petites orgs]
    N --> Q[‚úÖ Meilleure performance]
        </div>
        <script>
            mermaid.initialize({ startOnLoad: true, theme: 'default' });
        </script>
    </section>

    <section id="noyau-dur">
        <h2><i class="fas fa-gem"></i> NOYAU DUR - LES FONDAMENTAUX ABSOLUS</h2>
        
        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-circle"></i> <strong>Loi #1 : Un VLAN = Un domaine de broadcast ISOL√â.</strong></p>
            <p><em>Preuve/Pourquoi :</em> La d√©finition m√™me d'un VLAN est un domaine de broadcast logique. Un paquet broadcast (comme une requ√™te ARP "Qui a l'IP 192.168.10.1?") envoy√© dans le VLAN 10 s'arr√™te aux ports membres du VLAN 10.</p>
            <pre><code>// CONS√âQUENCE PRATIQUE :
PC1 (VLAN 10) envoie: "ARP pour 192.168.20.1"
-> Seuls les p√©riph√©riques VLAN 10 re√ßoivent cette requ√™te
-> PC2 (VLAN 20) ne la voit PAS
-> ISOLATION COMPL√àTE au niveau couche 2</code></pre>
        </div>

        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-circle"></i> <strong>Loi #2 : La communication entre VLANs n√©cessite FORC√âMENT un p√©riph√©rique de couche 3.</strong></p>
            <p><em>Preuve/Pourquoi :</em> Les VLANs op√®rent √† la couche 2 (commutation). Pour passer d'un sous-r√©seau IP √† un autre, il faut un routeur ou un commutateur capable de router (couche 3).</p>
        </div>

        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-circle"></i> <strong>Loi #3 : Chaque VLAN doit avoir sa propre passerelle par d√©faut.</strong></p>
            <p><em>Preuve/Pourquoi :</em> Quand un h√¥te veut communiquer en dehors de son sous-r√©seau local, il envoie le paquet √† sa passerelle par d√©faut.</p>
            <pre><code>Configuration TYPIQUE:
VLAN 10: Sous-r√©seau 192.168.10.0/24, Passerelle: 192.168.10.1
VLAN 20: Sous-r√©seau 192.168.20.0/24, Passerelle: 192.168.20.1
-> Deux passerelles DIFF√âRENTES sur deux interfaces LOGIQUES diff√©rentes</code></pre>
        </div>

        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-circle"></i> <strong>Loi #4 : Le trunk est l'autoroute √† plusieurs voies √©tiquet√©es.</strong></p>
            <p><em>Preuve/Pourquoi :</em> Un lien normal (access) ne transporte qu'un seul type de trafic. Un trunk utilise le tagging 802.1Q pour transporter MULTIPLES VLANs sur un seul lien physique.</p>
        </div>

        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-circle"></i> <strong>Loi #5 : Il existe TROIS m√©thodes historiques de routage inter-VLAN.</strong></p>
            <p><em>Preuve/Pourquoi :</em> √âvolution technologique: Legacy ‚Üí Router-on-a-Stick ‚Üí Switch L3 avec SVI.</p>
        </div>
    </section>

    <section id="pourquoi-vlans">
        <h2><i class="fas fa-question-circle"></i> POURQUOI LES VLANS ? (LA BASE ABSOLUE)</h2>
        
        <h3><i class="fas fa-thumbs-up green-border"></i> INT√âR√äTS PRIMAIRES DES VLANS</h3>
        
        <button class="toggle-btn" onclick="toggleContent('avantages-vlans')">
            <i class="fas fa-chevron-down"></i> Voir le diagramme des avantages
        </button>
        
        <div id="avantages-vlans" class="toggle-content">
            <div class="mermaid">
    flowchart TD
    A[Avantages des VLANs] --> B[S√©curit√© Renforc√©e]
    A --> C[Performance Am√©lior√©e]
    A --> D[Gestion Simplifi√©e]
    A --> E[Flexibilit√© Organisationnelle]
    
    B --> F[Isolation des domaines broadcast<br>Un malware dans un VLAN reste contenu]
    C --> G[R√©duction du trafic broadcast<br>Moins d'ARP flooding, plus de bande passante utile]
    D --> H[Groupement logique vs physique<br>Marketing peut √™tre sur VLAN 30<br>quel que soit le b√¢timent]
    E --> I[Facilit√© des changements<br>D√©placer un utilisateur = changer port VLAN]
            </div>
        </div>
        
        <div class="green-border">
            <p class="success"><i class="fas fa-check-circle"></i> <strong>D√©tail Crucial sur les Broadcasts :</strong></p>
            <pre><code>SANS VLAN (1 domaine broadcast):
- 1000 h√¥tes ‚Üí 1 broadcast atteint 1000 p√©riph√©riques
- Temp√™te broadcast possible = PANNE R√âSEAU COMPL√àTE

AVEC VLANs (ex: 10 VLANs de 100 h√¥tes):
- Broadcast dans VLAN 10 ‚Üí 100 h√¥tes seulement touch√©s
- Isolation de la faille : Probl√®me dans VLAN 20 n'affecte pas VLAN 10</code></pre>
        </div>
        
        <h3><i class="fas fa-thumbs-down orange-border"></i> INCONV√âNIENTS DES VLANS</h3>
        
        <div class="orange-border">
            <p class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>1. ISOLEMENT TROP FORT :</strong> Les VLANs font trop bien leur travail !</p>
            <p>- Serveur dans VLAN 10, utilisateurs dans VLAN 20 ‚Üí IMPOSSIBLE de communiquer</p>
            <p>- <strong>SOLUTION :</strong> Routage inter-VLAN pour permettre une communication CONTR√îL√âE</p>
            
            <p class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>2. COMPLEXIT√â DE CONFIGURATION :</strong></p>
            <p>- Il faut configurer: VLANs, ports d'acc√®s, trunks, et ENFIN le routage</p>
            <p>- Une erreur √† n'importe quelle √©tape = panne</p>
            
            <p class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>3. D√âPENDANCE AUX TRUNKS :</strong></p>
            <p>- Si le trunk entre switches tombe, les VLANs sont coup√©s en deux</p>
            <p>- N√©cessite des trunks redondants + STP pour √©viter les boucles</p>
        </div>
    </section>

    <section id="comparaison">
        <h2><i class="fas fa-balance-scale"></i> COMPARAISON D√âTAILL√âE DES 3 M√âTHODES</h2>
        
        <div class="blue-border">
            <h3><i class="fas fa-history"></i> 1. ROUTAGE INTER-VLAN LEGACY (Obsol√®te mais √† comprendre)</h3>
            <pre><code>SC√âNARIO: Routeur avec 3 interfaces Ethernet, 3 VLANs
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ VLAN10‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ Fa0/1‚îÇ   ‚îÇ Fa0/2‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ VLAN20‚îÇ
‚îÇ       ‚îÇ    ‚îÇ      ‚îÇ   ‚îÇ      ‚îÇ    ‚îÇ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ  R1  ‚îÇ   ‚îÇ      ‚îÇ    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ      ‚îÇ   ‚îÇ      ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ Fa0/3‚îÇ   ‚îÇ      ‚îÇ
‚îÇ VLAN99‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ      ‚îÇ   ‚îÇ      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
            
            <p><strong>COMMANDE TYPE :</strong></p>
            <pre><code><span class="command">interface</span> <span class="config">GigabitEthernet0/0</span>
 <span class="command">ip address</span> <span class="config">192.168.10.1 255.255.255.0</span>
 <span class="comment">! Chaque interface a une IP dans le sous-r√©seau de son VLAN</span></code></pre>
        </div>
        
        <div class="blue-border">
            <h3><i class="fas fa-sticky-note"></i> 2. ROUTER-ON-A-STICK (La m√©thode d'apprentissage)</h3>
            
            <button class="toggle-btn" onclick="toggleContent('router-stick-details')">
                <i class="fas fa-chevron-down"></i> Voir le processus pas-√†-pas
            </button>
            
            <div id="router-stick-details" class="toggle-content">
                <p><strong>COMMENT √áA MARCHE PAS √Ä PAS :</strong></p>
                <ol>
                    <li>PC1 (VLAN10) veut parler √† PC2 (VLAN20)</li>
                    <li>PC1 envoie √† sa passerelle 192.168.10.1 (MAC de R1)</li>
                    <li>SW1 re√ßoit la trame sur port d'acc√®s VLAN10</li>
                    <li>SW1 forwarde sur le trunk vers R1 AVEC TAG VLAN10</li>
                    <li>R1 re√ßoit sur Gi0/0/1, voit le tag VLAN10, envoie √† la sous-interface .10</li>
                    <li>Sous-interface .10 fait d√©cision de routage: destination = 192.168.20.0/24</li>
                    <li>R1 envoie le paquet vers la sous-interface .20 (VLAN20)</li>
                    <li>R1 met le paquet sur Gi0/0/1 AVEC TAG VLAN20</li>
                    <li>SW1 re√ßoit la trame tagu√©e VLAN20, retire le tag, forwarde √† PC2</li>
                </ol>
            </div>
            
            <p class="warning"><i class="fas fa-exclamation-triangle"></i> <strong>LIMITATION CL√â :</strong> Le routeur doit examiner CHAQUE paquet (processeur) ‚Üí <strong>Goulot d'√©tranglement</strong> √† partir de ~50 VLANs ou trafic important.</p>
        </div>
        
        <div class="blue-border">
            <h3><i class="fas fa-server"></i> 3. COMMUTATEUR COUCHE 3 (Solution professionnelle)</h3>
            <pre><code>SC√âNARIO: Le switch fait tout: commutation ET routage
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ VLAN10‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ              ‚îÇ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ VLAN20‚îÇ
‚îÇ       ‚îÇ    ‚îÇ              ‚îÇ     ‚îÇ       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò     ‚îÇ   SWITCH L3  ‚îÇ     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
            ‚îÇ              ‚îÇ
            ‚îÇ SVI VLAN10:  ‚îÇ
            ‚îÇ 192.168.10.1 ‚îÇ
            ‚îÇ SVI VLAN20:  ‚îÇ
            ‚îÇ 192.168.20.1 ‚îÇ
            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</code></pre>
            
            <p class="success"><i class="fas fa-check-circle"></i> <strong>R√âVOLUTION :</strong> Le routage se fait en MAT√âRIEL (ASIC)</p>
            <ul>
                <li>Vitesse de commutation (Gbps) ‚â† Vitesse de routage logiciel (Mbps)</li>
                <li>Latence r√©duite de 99% vs Router-on-a-Stick</li>
                <li>Scalabilit√©: 1000+ VLANs possibles</li>
            </ul>
        </div>
    </section>

    <section id="securite">
        <h2><i class="fas fa-shield-alt"></i> PROFONDEUR S√âCURIT√â & M√âTIER</h2>
        
        <div class="red-border">
            <p class="critical"><i class="fas fa-skull-crossbones"></i> <strong>RISQUE PRINCIPAL : VLAN Hopping par Double-Tagging</strong></p>
            
            <button class="toggle-btn" onclick="toggleContent('vlan-hopping-details')">
                <i class="fas fa-chevron-down"></i> Comprendre l'attaque Double-Tagging
            </button>
            
            <div id="vlan-hopping-details" class="toggle-content">
                <p><strong>Sc√©nario d'attaque :</strong></p>
                <ol>
                    <li>L'attaquant est connect√© √† un port d'acc√®s VLAN 10</li>
                    <li>Il envoie une trame avec DEUX √©tiquettes 802.1Q</li>
                    <li>Premi√®re √©tiquette: VLAN 10 (son VLAN d'acc√®s)</li>
                    <li>Deuxi√®me √©tiquette: VLAN 20 (VLAN cible)</li>
                    <li>Le premier switch retire la premi√®re √©tiquette (VLAN 10)</li>
                    <li>La trame continue avec l'√©tiquette VLAN 20 vers le trunk</li>
                    <li>R√©sultat: L'attaquant a acc√®s au VLAN 20!</li>
                </ol>
            </div>
            
            <p><strong>Mitigation Imm√©diate :</strong></p>
            <pre><code><span class="comment">! SUR TOUS LES COMMUTATEURS</span>
<span class="command">conf t</span>
<span class="comment">! 1. Ne jamais utiliser le VLAN 1 pour le trafic utilisateur</span>
<span class="command">vlan</span> <span class="config">999</span>
<span class="command">name</span> <span class="config">BLACKHOLE</span>
<span class="command">exit</span>
<span class="comment">! 2. Changer le VLAN natif sur les trunks</span>
<span class="command">interface range</span> <span class="config">gi0/1-2</span>
<span class="command"> switchport trunk native vlan</span> <span class="config">999</span>
<span class="comment">! 3. N'autoriser explicitement que les VLANs n√©cessaires</span>
<span class="command"> switchport trunk allowed vlan</span> <span class="config">10,20,99</span>
<span class="comment">! 4. Ports non utilis√©s dans un VLAN de quarantaine</span>
<span class="command">interface range</span> <span class="config">gi0/3-24, fa0/1-24</span>
<span class="command"> switchport mode access</span>
<span class="command"> switchport access vlan</span> <span class="config">999</span>
<span class="command"> shutdown</span>
<span class="command">end</span></code></pre>
        </div>
    </section>

    <section id="examen">
        <h2><i class="fas fa-graduation-cap"></i> PROFONDEUR EXAMEN CCNA</h2>
        
        <div class="orange-border">
            <p class="warning"><i class="fas fa-question-circle"></i> <strong>QUESTION PI√àGE N¬∞1 :</strong></p>
            <p>"Un administrateur configure un Router-on-a-Stick. Les h√¥tes peuvent ping leur propre passerelle mais pas les h√¥tes d'autres VLANs. La commande <code>show interfaces trunk</code> montre que le trunk est actif. Quelle est la cause probable ?"</p>
            
            <div class="quiz-question">
                <p><strong>S√©lectionnez la bonne r√©ponse :</strong></p>
                <div class="quiz-option" onclick="checkAnswer(this, 'B')">A) Les VLANs ne sont pas cr√©√©s sur le switch</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'B')">B) Les sous-interfaces ont le mauvais VLAN dans <code>encapsulation dot1Q</code></div>
                <div class="quiz-option" onclick="checkAnswer(this, 'B')">C) La commande <code>ip routing</code> est manquante</div>
                <div class="quiz-option" onclick="checkAnswer(this, 'B')">D) Le c√¢ble est d√©fectueux</div>
            </div>
            
            <div id="answer-explanation" style="display: none; margin-top: 15px; padding: 15px; background: #e7f3ff; border-radius: 5px;">
                <p><strong>Explication :</strong> C'est le pi√®ge CLASSIQUE. Si le tag VLAN dans <code>encapsulation dot1Q</code> ne correspond pas au VLAN configur√© sur le port d'acc√®s du switch, le routeur ignore les trames.</p>
            </div>
        </div>
        
        <div class="orange-border">
            <p class="warning"><i class="fas fa-question-circle"></i> <strong>D√âTAIL TECHNIQUE OUBLI√â :</strong></p>
            <p>Un SVI (Switched Virtual Interface) sur un commutateur couche 3 ne passera √† l'√©tat <code>up/up</code> que si :</p>
            <ol>
                <li>Le VLAN existe dans la VLAN database (<code>show vlan brief</code>)</li>
                <li><strong>ET</strong> au moins un port de commutation couche 2 est activ√© et membre de ce VLAN</li>
            </ol>
            <p>Un SVI pour un VLAN sans port actif reste <code>down/down</code> !</p>
        </div>
    </section>

    <section id="lab">
        <h2><i class="fas fa-flask"></i> LAB COMPLET : CONFIGURATION PAS √Ä PAS</h2>
        
        <div class="blue-border">
            <h3>√âTAPE 1: CR√âER LES VLANS SUR LE SWITCH</h3>
            <pre><code><span class="command">SW1> enable</span>
<span class="command">SW1# configure terminal</span>
<span class="command">SW1(config)# vlan</span> <span class="config">10</span>
<span class="command">SW1(config-vlan)# name</span> <span class="config">SALES</span>
<span class="command">SW1(config-vlan)# exit</span>
<span class="command">SW1(config)# vlan</span> <span class="config">20</span>
<span class="command">SW1(config-vlan)# name</span> <span class="config">MARKETING</span>
<span class="command">SW1(config-vlan)# exit</span></code></pre>
        </div>
        
        <div class="blue-border">
            <h3>√âTAPE 2: CONFIGURER LE PORT TRUNK</h3>
            <pre><code><span class="command">SW1(config)# interface</span> <span class="config">GigabitEthernet0/1</span>
<span class="command">SW1(config-if)# switchport mode trunk</span>           <span class="comment">! CRITIQUE: Mode trunk</span>
<span class="command">SW1(config-if)# switchport trunk allowed vlan</span> <span class="config">10,20,99</span>  <span class="comment">! Autorise ONLY ces VLANs</span>
<span class="command">SW1(config-if)# switchport trunk native vlan</span> <span class="config">99</span> <span class="comment">! VLAN natif = MANAGEMENT</span>
<span class="command">SW1(config-if)# no shutdown</span>
<span class="command">SW1(config-if)# exit</span></code></pre>
        </div>
        
        <div class="blue-border">
            <h3>√âTAPE 3: CONFIGURER LE ROUTER (ROUTER-ON-A-STICK)</h3>
            <pre><code><span class="command">R1(config)# interface</span> <span class="config">GigabitEthernet0/0.10</span>
<span class="command">R1(config-subif)# description</span> <span class="config">Gateway for SALES VLAN</span>
<span class="command">R1(config-subif)# encapsulation dot1Q</span> <span class="config">10</span>        <span class="comment">! CRITIQUE: Doit matcher VLAN ID</span>
<span class="command">R1(config-subif)# ip address</span> <span class="config">192.168.10.1 255.255.255.0</span>
<span class="command">R1(config-subif)# exit</span>

<span class="command">R1(config)# interface</span> <span class="config">GigabitEthernet0/0.20</span>
<span class="command">R1(config-subif)# description</span> <span class="config">Gateway for MARKETING VLAN</span>
<span class="command">R1(config-subif)# encapsulation dot1Q</span> <span class="config">20</span>
<span class="command">R1(config-subif)# ip address</span> <span class="config">192.168.20.1 255.255.255.0</span>
<span class="command">R1(config-subif)# exit</span>

<span class="command">R1(config)# interface</span> <span class="config">GigabitEthernet0/0</span>
<span class="command">R1(config-if)# no shutdown</span>                      <span class="comment">! OBLIGATOIRE: Active physique</span>
<span class="command">R1(config-if)# exit</span></code></pre>
        </div>
        
        <button class="toggle-btn" onclick="toggleContent('full-lab-config')">
            <i class="fas fa-code"></i> Voir la configuration compl√®te au format YAML (Ansible)
        </button>
        
        <div id="full-lab-config" class="toggle-content">
            <pre><code># Configuration Ansible pour Router-on-a-Stick
- hosts: router_r1
  vars:
    subinterfaces:
      - { parent: GigabitEthernet0/0/1, id: 10, vlan: 10, ip: 192.168.10.1/24 }
      - { parent: GigabitEthernet0/0/1, id: 20, vlan: 20, ip: 192.168.20.1/24 }
      - { parent: GigabitEthernet0/0/1, id: 99, vlan: 99, ip: 192.168.99.1/24 }
  tasks:
    - name: Configure Subinterfaces
      cisco.ios.ios_l3_interfaces:
        config:
          - name: "{{ item.parent }}.{{ item.id }}"
            ipv4:
              - address: "{{ item.ip }}"
            encapsulation:
              dot1Q: "{{ item.vlan }}"
        state: merged
      loop: "{{ subinterfaces }}"

    - name: Enable Physical Interface
      cisco.ios.ios_interfaces:
        config:
          - name: "{{ subinterfaces.0.parent }}"
            enabled: true
        state: merged</code></pre>
        </div>
    </section>

    <section id="depannage">
        <h2><i class="fas fa-bug"></i> SC√âNARIO DE D√âPANNAGE AVANC√â</h2>
        
        <div class="red-border">
            <p class="critical"><i class="fas fa-exclamation-triangle"></i> <strong>Sympt√¥me Complexe :</strong> Les utilisateurs du VLAN 10 (172.17.10.0/24) peuvent pinger leur passerelle mais ne peuvent PAS atteindre les serveurs dans le VLAN 20 (172.17.20.0/24), ni Internet.</p>
            
            <h3>Processus de Diagnostic (Arbre D√©cisionnel) :</h3>
            
            <button class="toggle-btn" onclick="toggleContent('troubleshooting-steps')">
                <i class="fas fa-sitemap"></i> Voir l'arbre de d√©cision complet
            </button>
            
            <div id="troubleshooting-steps" class="toggle-content">
                <div class="mermaid">
    flowchart TD
    A[Sympt√¥me: VLAN 10 isol√©] --> B[√âtape 1: Ping passerelle depuis h√¥te]
    B --> C{Succ√®s?}
    C -->|Non| D[Probl√®me couche 2<br>VLAN/port/c√¢ble]
    C -->|Oui| E[√âtape 2: show ip route sur L3]
    E --> F{Les deux VLANs en connected?}
    F -->|Non| G[Interface SVI/sub-if down<br>V√©rifier show ip int brief]
    F -->|Oui| H[√âtape 3: V√©rifier ACLs]
    H --> I{ACL bloquante?}
    I -->|Oui| J[Corriger ACL sur interface]
    I -->|Non| K[√âtape 4: Traceroute]
    K --> L[Identifier point de blocage]
    L --> M[Solution trouv√©e]
                </div>
            </div>
            
            <h3>Fix et Rollback :</h3>
            <pre><code><span class="comment">! SUR LE COMMUTATEUR COUCHE 3</span>
<span class="command">enable</span>
<span class="command">conf t</span>

<span class="comment">! 1. DIAGNOSTIC : V√©rifier la configuration</span>
<span class="command">show running-config interface</span> <span class="config">Vlan10</span>

<span class="comment">! 2. Si ACL probl√©matique trouv√©e</span>
<span class="command">interface</span> <span class="config">Vlan10</span>
<span class="command"> no ip access-group</span> <span class="config">ACL_IN in</span>  <span class="comment"><!-- ROLLBACK IMM√âDIAT --></span>

<span class="comment">! 3. V√âRIFICATION</span>
<span class="command">do ping</span> <span class="config">172.17.20.50 source 172.17.10.1</span>

<span class="comment">! 4. ROLLBACK COMPLET si n√©cessaire</span>
<span class="command">interface</span> <span class="config">Vlan10</span>
<span class="command"> no ip access-group</span> <span class="config">ACL_IN in</span>
<span class="command">end</span>
<span class="command">write memory</span></code></pre>
        </div>
    </section>

    <section id="quiz">
        <h2><i class="fas fa-check-circle"></i> VALIDATION INTERACTIVE</h2>
        
        <div class="quiz-question">
            <p><strong>Question de Concept :</strong> En utilisant l'analogie de l'immeuble, que se passerait-il si le concierge (routeur) n'avait pas de bureau pour l'√©tage 5 (pas de SVI pour le VLAN 5) ?</p>
            
            <div class="quiz-option" onclick="showConceptAnswer()">Cliquez pour voir la r√©ponse</div>
            
            <div id="concept-answer" style="display: none; margin-top: 15px; padding: 15px; background: #d4edda; border-radius: 5px;">
                <p><strong>R√©ponse :</strong> Les habitants de l'√©tage 5 (VLAN 5) seraient compl√®tement isol√©s. Ils pourraient communiquer entre eux (dans le m√™me √©tage), mais ne pourraient ni recevoir de visite d'autres √©tages, ni envoyer du courrier √† l'ext√©rieur. Techniquement, ils n'auraient pas de passerelle par d√©faut pour quitter leur sous-r√©seau.</p>
            </div>
        </div>
        
        <div class="quiz-question">
            <p><strong>Question de Crise (Simulation) :</strong> "Il est 3h du matin, tout le VLAN Finance (VLAN 10) perd soudainement l'acc√®s √† Internet et aux serveurs centraux, mais la communication interne au VLAN fonctionne."</p>
            
            <button class="toggle-btn" onclick="toggleContent('crisis-plan')">
                <i class="fas fa-fire"></i> Voir le plan d'action en 3 √©tapes
            </button>
            
            <div id="crisis-plan" class="toggle-content">
                <ol>
                    <li><strong>Premi√®re commande :</strong> <code>show interface vlan 10</code> sur le commutateur couche 3 de distribution</li>
                    <li><strong>Premi√®re hypoth√®se :</strong> L'interface SVI VLAN 10 est <code>down</code> (dernier port actif d√©sactiv√©?)</li>
                    <li><strong>Plan d'action :</strong>
                        <ul>
                            <li>Si SVI down: v√©rifier <code>show vlan id 10</code> pour ports actifs</li>
                            <li>V√©rifier <code>show ip route</code> pour la route par d√©faut</li>
                            <li><code>traceroute</code> depuis un h√¥te pour localiser le blocage</li>
                        </ul>
                    </li>
                </ol>
            </div>
        </div>
    </section>

    <section class="micro-kit" id="microkit">
        <h2><i class="fas fa-file-pdf"></i> MICRO-KIT ESSENTIEL (SYNTH√àSE 1 PAGE A4)</h2>
        
        <div class="kit-grid">
            <div class="kit-card">
                <h4><i class="fas fa-gem"></i> 5 Lois Immuables</h4>
                <ol>
                    <li>1 VLAN = 1 domaine broadcast</li>
                    <li>Inter-VLAN = P√©riph√©rique L3 obligatoire</li>
                    <li>1 Passerelle par VLAN</li>
                    <li>Trunk = Autoroute √©tiquet√©e</li>
                    <li>3 m√©thodes historiques</li>
                </ol>
            </div>
            
            <div class="kit-card">
                <h4><i class="fas fa-terminal"></i> 6 Commandes CLI</h4>
                <ol>
                    <li><code>show interfaces trunk</code></li>
                    <li><code>show ip int brief</code></li>
                    <li><code>show vlan brief</code></li>
                    <li><code>show ip route connected</code></li>
                    <li><code>ping source</code></li>
                    <li><code>show run interface</code></li>
                </ol>
            </div>
            
            <div class="kit-card">
                <h4><i class="fas fa-traffic-light"></i> 3 Pi√®ges CCNA</h4>
                <ol>
                    <li>Oubli de <code>no shutdown</code> sur interface m√®re</li>
                    <li>Mauvais VLAN dans <code>encapsulation dot1Q</code></li>
                    <li>SVI down sans port actif</li>
                </ol>
            </div>
            
            <div class="kit-card">
                <h4><i class="fas fa-shield-alt"></i> 1 Risque + Mitigation</h4>
                <p><strong>VLAN Hopping :</strong></p>
                <code>switchport trunk native vlan 999</code>
                <code>switchport nonegotiate</code>
            </div>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
            <button class="toggle-btn" onclick="window.print()" style="background-color: white; color: #764ba2;">
                <i class="fas fa-print"></i> Imprimer ce Micro-Kit
            </button>
        </div>
    </section>

    <script>
        // Fonctions pour l'interactivit√©
        function toggleContent(id) {
            const content = document.getElementById(id);
            const btn = content.previousElementSibling;
            const icon = btn.querySelector('i');
            
            if (content.style.display === 'block') {
                content.style.display = 'none';
                icon.className = 'fas fa-chevron-down';
                btn.innerHTML = '<i class="fas fa-chevron-down"></i> ' + btn.textContent.replace('Masquer', 'Voir');
            } else {
                content.style.display = 'block';
                icon.className = 'fas fa-chevron-up';
                btn.innerHTML = '<i class="fas fa-chevron-up"></i> ' + btn.textContent.replace('Voir', 'Masquer');
            }
        }
        
        function checkAnswer(element, correctAnswer) {
            // R√©initialiser les couleurs
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Marquer la r√©ponse
            if (element.textContent.includes(correctAnswer)) {
                element.classList.add('correct');
                document.getElementById('answer-explanation').style.display = 'block';
            } else {
                element.classList.add('incorrect');
                // Trouver et marquer la bonne r√©ponse
                options.forEach(opt => {
                    if (opt.textContent.includes(correctAnswer)) {
                        opt.classList.add('correct');
                    }
                });
            }
        }
        
        function showConceptAnswer() {
            const answerDiv = document.getElementById('concept-answer');
            answerDiv.style.display = answerDiv.style.display === 'block' ? 'none' : 'block';
        }
        
        // Initialiser Mermaid pour les diagrammes
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: true,
                theme: 'default',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                }
            });
            
            // Rendre tous les liens de la TOC fonctionnels
            document.querySelectorAll('#toc a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href').substring(1);
                    document.getElementById(targetId).scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
        });
    </script>
</body>
</html>