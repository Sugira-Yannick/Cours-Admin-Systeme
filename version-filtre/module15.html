<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module-Kit : Routage IP Statique</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        :root {
            /* Syst√®me de couleurs du kit */
            --priority-critical: #dc3545;
            --priority-warning: #fd7e14;
            --priority-success: #198754;
            --priority-info: #0d6efd;
            --priority-concept: #6f42c1;
            --priority-neutral: #6c757d;
            
            --bg-light: #f8f9fa;
            --bg-card: #ffffff;
            --border-color: #dee2e6;
            --text-primary: #212529;
            --text-secondary: #6c757d;
            
            --shadow-sm: 0 .125rem .25rem rgba(0,0,0,.075);
            --shadow-md: 0 .5rem 1rem rgba(0,0,0,.1);
            --shadow-lg: 0 1rem 3rem rgba(0,0,0,.175);
            
            --radius-sm: 0.25rem;
            --radius-md: 0.5rem;
            --radius-lg: 1rem;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-light);
            overflow-x: hidden;
        }
        
        /* Navigation fixe */
        .nav-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: var(--bg-card);
            box-shadow: var(--shadow-md);
            z-index: 1000;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--priority-info);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .nav-progress {
            width: 200px;
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .nav-progress-bar {
            height: 100%;
            background: var(--priority-success);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        /* Contenu principal */
        .container {
            max-width: 1200px;
            margin: 80px auto 40px;
            padding: 0 20px;
        }
        
        /* Sections */
        .section {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            scroll-margin-top: 100px;
        }
        
        .section:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }
        
        .section-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid;
        }
        
        /* Couleurs par type de section */
        .section-analogy .section-header { border-color: var(--priority-concept); }
        .section-mental .section-header { border-color: var(--priority-concept); }
        .section-core .section-header { border-color: var(--priority-critical); }
        .section-security .section-header { border-color: var(--priority-warning); }
        .section-exam .section-header { border-color: var(--priority-info); }
        .section-lab .section-header { border-color: var(--priority-success); }
        .section-troubleshoot .section-header { border-color: var(--priority-critical); }
        .section-connections .section-header { border-color: var(--priority-neutral); }
        .section-validation .section-header { border-color: var(--priority-info); }
        .section-micro .section-header { border-color: var(--priority-success); }
        
        .section-icon {
            font-size: 1.5rem;
        }
        
        .section-title {
            font-size: 1.75rem;
            font-weight: 700;
        }
        
        /* Syst√®me de priorit√© dans le contenu */
        .priority-critical {
            color: var(--priority-critical);
            font-weight: 600;
        }
        
        .priority-warning {
            color: var(--priority-warning);
            font-weight: 600;
        }
        
        .priority-success {
            color: var(--priority-success);
            font-weight: 600;
        }
        
        .priority-info {
            color: var(--priority-info);
        }
        
        .priority-concept {
            color: var(--priority-concept);
            font-weight: 600;
        }
        
        /* Blocs de code */
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            position: relative;
        }
        
        .code-block::before {
            content: attr(data-language);
            position: absolute;
            top: 0;
            right: 0;
            background: #007acc;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 0 0 0 var(--radius-sm);
            font-size: 0.75rem;
            font-weight: 600;
        }
        
        .code-block.cisco::before { background: #007acc; }
        .code-block.python::before { background: #3572A5; }
        .code-block.yaml::before { background: #cb171e; }
        .code-block.text::before { background: var(--priority-neutral); }
        
        .command {
            background: #f8f9fa;
            border-left: 4px solid var(--priority-info);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
            font-family: 'Consolas', monospace;
        }
        
        /* Diagramme Mermaid */
        .mermaid-container {
            background: white;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 1px solid var(--border-color);
            overflow-x: auto;
        }
        
        /* √âl√©ments interactifs */
        .interactive-panel {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border-left: 5px solid var(--priority-info);
        }
        
        .quiz-container {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            border: 2px solid var(--border-color);
        }
        
        .quiz-question {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .quiz-option {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .quiz-option:hover {
            background: #f8f9fa;
            transform: translateX(5px);
        }
        
        .quiz-option.correct {
            background: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        
        .quiz-option.incorrect {
            background: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        
        .quiz-feedback {
            padding: 1rem;
            border-radius: var(--radius-sm);
            margin-top: 1rem;
            display: none;
        }
        
        .quiz-feedback.show {
            display: block;
        }
        
        .simulator {
            background: #1a1a1a;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            font-family: 'Consolas', monospace;
            color: #00ff00;
            min-height: 300px;
            position: relative;
        }
        
        .simulator-output {
            white-space: pre-wrap;
            line-height: 1.5;
            margin-bottom: 1rem;
            min-height: 200px;
            overflow-y: auto;
            max-height: 400px;
        }
        
        .simulator-input {
            display: flex;
            gap: 0.5rem;
        }
        
        .simulator-prompt {
            color: #00ffff;
        }
        
        .simulator-input-field {
            flex: 1;
            background: transparent;
            border: none;
            color: #ffffff;
            font-family: 'Consolas', monospace;
            font-size: 1rem;
            outline: none;
        }
        
        /* Micro-kit en format carte */
        .microkit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }
        
        .microkit-card {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
        }
        
        .microkit-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
        }
        
        .microkit-card h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--priority-info);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 0 15px;
                margin-top: 70px;
            }
            
            .section {
                padding: 1.5rem;
            }
            
            .section-title {
                font-size: 1.5rem;
            }
            
            .nav-container {
                padding: 0.75rem 1rem;
            }
            
            .nav-title {
                font-size: 1.2rem;
            }
            
            .microkit-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .section {
            animation: fadeIn 0.5s ease-out;
        }
        
        /* Indicateur de section active */
        .section.active {
            border-left: 5px solid var(--priority-info);
        }
        
        /* Table des mati√®res */
        .toc-container {
            position: fixed;
            right: 20px;
            top: 100px;
            width: 250px;
            background: var(--bg-card);
            border-radius: var(--radius-md);
            padding: 1rem;
            box-shadow: var(--shadow-md);
            display: none;
            z-index: 999;
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }
        
        @media (min-width: 1024px) {
            .toc-container {
                display: block;
            }
        }
        
        .toc-title {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--priority-info);
        }
        
        .toc-item {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .toc-item:hover {
            color: var(--priority-info);
            transform: translateX(5px);
        }
        
        .toc-item.active {
            color: var(--priority-info);
            font-weight: 600;
            border-left: 3px solid var(--priority-info);
            padding-left: 10px;
        }
        
        /* Boutons d'action */
        .action-buttons {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 10px;
            z-index: 1000;
        }
        
        .action-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--priority-info);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }
        
        .action-btn:hover {
            transform: scale(1.1);
            box-shadow: var(--shadow-lg);
        }
        
        .action-btn.print {
            background: var(--priority-success);
        }
        
        .action-btn.dark {
            background: var(--priority-neutral);
        }
        
        /* Badges */
        .badge {
            display: inline-block;
            padding: 0.25em 0.6em;
            font-size: 0.75em;
            font-weight: 700;
            line-height: 1;
            text-align: center;
            white-space: nowrap;
            vertical-align: baseline;
            border-radius: 50rem;
            margin-right: 0.5rem;
        }
        
        .badge-critical { background: var(--priority-critical); color: white; }
        .badge-warning { background: var(--priority-warning); color: white; }
        .badge-success { background: var(--priority-success); color: white; }
        .badge-info { background: var(--priority-info); color: white; }
        .badge-concept { background: var(--priority-concept); color: white; }
    </style>
</head>
<body>
    <!-- Navigation fixe -->
    <nav class="nav-container">
        <div class="nav-title">
            <i class="fas fa-network-wired"></i>
            <span>Module-Kit : Routage IP Statique</span>
        </div>
        <div class="nav-progress">
            <div class="nav-progress-bar" id="progressBar"></div>
        </div>
    </nav>

    <!-- Table des mati√®res -->
    <div class="toc-container" id="tocContainer">
        <div class="toc-title">Table des mati√®res</div>
        <div id="tocList"></div>
    </div>

    <!-- Boutons d'action flottants -->
    <div class="action-buttons">
        <button class="action-btn print" id="printBtn" title="Imprimer/Micro-Kit">
            <i class="fas fa-print"></i>
        </button>
        <button class="action-btn" id="simulatorBtn" title="Simulateur CLI">
            <i class="fas fa-terminal"></i>
        </button>
        <button class="action-btn" id="scrollTopBtn" title="Retour en haut">
            <i class="fas fa-arrow-up"></i>
        </button>
    </div>

    <!-- Contenu principal -->
    <div class="container">
        <!-- Section Analogie Syst√©mique -->
        <section id="analogie" class="section section-analogy">
            <div class="section-header">
                <i class="fas fa-brain section-icon priority-concept"></i>
                <h2 class="section-title">üìç ANALOGIE SYST√âMIQUE</h2>
            </div>
            
            <div class="interactive-panel">
                <p><strong>Th√®me central :</strong> "Le Routage Statique : L'Art de la Cartographie Manuelle et des Chemins de Contingence"</p>
                <p><strong>M√©taphore :</strong> <span class="priority-concept">"Le Planificateur de Trafic Urbain avec Plans d'Urgence"</span></p>
                
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TD
                            A[Centre de Contr√¥le du Trafic] --> B{Syst√®me de Routage}
                            B --> C[Routage Dynamique<br>Syst√®mes auto-ajustants]
                            B --> D[Routage Statique<br>Intervention experte]
                            
                            D --> E[Autoroute D√©di√©e<br>Route statique standard]
                            D --> F[Sortie de Secours Universelle<br>Route par d√©faut]
                            D --> G[Itin√©raire Bis Secret<br>Route flottante]
                            D --> H[Voie d'Acc√®s VIP<br>Route d'h√¥te]
                            
                            style A fill:#6f42c1,stroke:#fff,stroke-width:2px
                            style D fill:#0d6efd,stroke:#fff,stroke-width:2px
                    </div>
                </div>
                
                <p><strong>√âl√©ments cl√©s :</strong></p>
                <ul>
                    <li><span class="priority-info">Autoroute D√©di√©e</span> : Route statique standard pour le trafic critique vers un r√©seau sp√©cifique</li>
                    <li><span class="priority-warning">Sortie de Secours Universelle</span> : Route par d√©faut pour toute destination non r√©pertori√©e</li>
                    <li><span class="priority-success">Itin√©raire Bis Secret</span> : Route flottante activ√©e seulement si la route principale √©choue</li>
                    <li><span class="priority-concept">Voie d'Acc√®s VIP</span> : Route d'h√¥te menant directement √† un serveur sp√©cifique</li>
                </ul>
                
                <p><strong>Risque analogique :</strong> Un planificateur malavis√© qui trace une "route par d√©faut" vers un quartier en travaux (blackhole), ou qui oublie de verrouiller son plan secret (route flottante non s√©curis√©e), permettant √† n'importe qui de d√©tourner le trafic.</p>
            </div>
        </section>

        <!-- Section Mod√®le Mental -->
        <section id="modele-mental" class="section section-mental">
            <div class="section-header">
                <i class="fas fa-project-diagram section-icon priority-concept"></i>
                <h2 class="section-title">üß† MOD√àLE MENTAL</h2>
            </div>
            
            <div class="mermaid-container">
                <div class="mermaid" id="mentalModel">
                    flowchart TD
                        A[Besoin de Routage] --> B{Type de Destination?}
                        B --> C[R√©seau Sp√©cifique]
                        B --> D[Toute Destination Inconnue]
                        B --> E[P√©riph√©rique Unique<br>Serveur VIP]
                        
                        C --> F{Type de Lien vers Next-Hop?}
                        F --> G[Point-√†-Point<br>S√©rie/PPP]
                        F --> H[Multi-Acc√®s<br>Ethernet]
                        G --> I[Route Directement Connect√©e<br>ip route r√©seau masque sortie_intf]
                        H --> J[Route Enti√®rement Sp√©cifi√©e<br>ip route r√©seau masque sortie_intf ip_next-hop]
                        C --> K[Route de Tron√ßon Suivant Standard<br>ip route r√©seau masque ip_next-hop]
                        
                        D --> L[Route par D√©faut<br>ip route 0.0.0.0 0.0.0.0 ...]
                        
                        E --> M[Route d'H√¥te<br>ip route host_ip 255.255.255.255 ...]
                        
                        L --> N{Besoin de Redondance?}
                        N --> O[Non] --> P[Install√©e dans RIB<br>Distance AD=1]
                        N --> Q[Oui] --> R[Route Flottante de Secours<br>ip route ... ... distance AD > 1]
                        R --> S[Route Active Seulement si<br>Route Principale √âchoue]

                        style I fill:#d4edda,stroke:#c3e6cb
                        style J fill:#d4edda,stroke:#c3e6cb
                        style K fill:#d4edda,stroke:#c3e6cb
                        style L fill:#fff3cd,stroke:#ffeaa7
                        style M fill:#cce5ff,stroke:#b8daff
                        style R fill:#f8d7da,stroke:#f5c6cb
                </div>
            </div>
            
            <div class="quiz-container">
                <div class="quiz-question">Testez votre compr√©hension du mod√®le : Sur un r√©seau Ethernet, quel type de route statique est recommand√© et pourquoi?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="true">Route enti√®rement sp√©cifi√©e (interface + next-hop) pour √©viter les probl√®mes ARP</div>
                    <div class="quiz-option" data-correct="false">Route directement connect√©e (interface seule) car c'est plus simple</div>
                    <div class="quiz-option" data-correct="false">Route de tron√ßon suivant standard (next-hop seul) comme sur les liens s√©rie</div>
                </div>
                <div class="quiz-feedback" id="feedback1"></div>
                <button class="action-btn" onclick="checkQuiz(1)" style="width: auto; padding: 0.5rem 1rem; border-radius: var(--radius-sm); margin-top: 1rem;">
                    V√©rifier la r√©ponse
                </button>
            </div>
        </section>

        <!-- Section Noyau Dur -->
        <section id="noyau-dur" class="section section-core">
            <div class="section-header">
                <i class="fas fa-gem section-icon priority-critical"></i>
                <h2 class="section-title">‚ö° NOYAU DUR (Les Lois Immuables)</h2>
            </div>
            
            <div class="interactive-panel">
                <div class="priority-critical">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Loi #1 : La table de routage ob√©it √† la R√®gle du Plus Long Pr√©fixe (Longest Prefix Match).</strong>
                </div>
                <p>Une route d'h√¥te (/32 ou /128) l'emporte toujours sur une route r√©seau (/24), qui l'emporte sur une route par d√©faut (/0). C'est la premi√®re et ultime d√©cision du routeur.</p>
                
                <div class="code-block text" data-language="EXEMPLE">
# Hi√©rarchie de correspondance
192.168.1.5/32 (h√¥te) > 192.168.1.0/24 (r√©seau) > 0.0.0.0/0 (d√©faut)
                </div>
                
                <div class="priority-critical">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Loi #2 : La Distance Administrative (AD) est le premier tie-breaker.</strong>
                </div>
                <p>Entre deux routes vers le m√™me pr√©fixe, le routeur choisit celle avec la plus faible AD. Valeurs par d√©faut :</p>
                <ul>
                    <li><span class="badge badge-success">Connected = 0</span></li>
                    <li><span class="badge badge-critical">Static = 1</span></li>
                    <li><span class="badge badge-info">EIGRP = 90</span></li>
                    <li><span class="badge badge-info">OSPF = 110</span></li>
                    <li><span class="badge badge-info">IS-IS = 115</span></li>
                    <li><span class="badge badge-info">RIP = 120</span></li>
                </ul>
                
                <div class="priority-critical">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Loi #3 : Une route statique n√©cessite une r√©cursivit√© r√©soluble.</strong>
                </div>
                <p>Pour qu'une route statique avec uniquement une adresse IP next-hop soit valide, cette adresse IP next-hop doit elle-m√™me √™tre accessible (via une route connect√©e ou une autre route). Sinon, la route est dite "recursive" et ne s'installe pas.</p>
                
                <div class="priority-critical">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Loi #4 : Sur les r√©seaux multi-acc√®s (Ethernet), vous DEVEZ sp√©cifier le next-hop.</strong>
                </div>
                <p>Utiliser uniquement l'interface de sortie (`GigabitEthernet0/0`) sur un LAN cr√©e un probl√®me de couche 2 : le routeur fera une requ√™te ARP pour chaque adresse IP de destination, causant un √©chec ou un trafic excessif.</p>
                
                <div class="priority-critical">
                    <i class="fas fa-exclamation-circle"></i>
                    <strong>Loi #5 : Une route par d√©faut est la "passerelle de dernier recours".</strong>
                </div>
                <p>Elle capture TOUT le trafic non match√© par une route plus sp√©cifique. Sa mauvaise configuration est la cause num√©ro 1 des pannes de connectivit√© ou des blackholes.</p>
            </div>
        </section>

        <!-- Section S√©curit√© & M√©tier -->
        <section id="securite" class="section section-security">
            <div class="section-header">
                <i class="fas fa-shield-alt section-icon priority-warning"></i>
                <h2 class="section-title">üîê PROFONDEUR S√âCURIT√â & M√âTIER</h2>
            </div>
            
            <div class="priority-critical">
                <h3>üö® RISQUE PRINCIPAL</h3>
            </div>
            
            <p><strong>Risque Principal :</strong> Cr√©ation involontaire de points de blackhole ou de boucles de routage via des routes statiques erron√©es ou non v√©rifi√©es.</p>
            
            <div class="interactive-panel">
                <p><strong>‚Üí Attaque Type :</strong> Traffic Diversion ou Man-in-the-Middle via injection de route statique malveillante</p>
                <p><strong>‚Üí D√©tection :</strong></p>
                <div class="code-block cisco" data-language="CISCO">
R1# show ip route static
R1# show logging | include ROUTC
%ROUTC-6-ROUTECHANGE: Static route changed for 0.0.0.0 0.0.0.0
                </div>
                
                <p><strong>‚Üí Mitigation Imm√©diate :</strong></p>
                <div class="code-block cisco" data-language="CISCO">
! 1. Identifier la route probl√©matique
R1# show ip route 192.168.1.0

! 2. La supprimer
R1(config)# no ip route 192.168.1.0 255.255.255.0 <next-hop>

! 3. R√©tablir la route correcte avec tra√ßabilit√©
R1(config)# ip route 192.168.1.0 255.255.255.0 10.1.1.2 name LINK_TO_DATACENTER
                </div>
                
                <p><strong>‚Üí Int√©gration Entreprise :</strong></p>
                <ul>
                    <li><span class="priority-success">Ansible :</span> Playbooks idempotents pour d√©ploiement coh√©rent</li>
                    <li><span class="priority-warning">SIEM (Splunk, QRadar) :</span> Alerte sur changements non autoris√©s</li>
                    <li><span class="priority-info">Git :</span> Versionnement des configurations pour tra√ßabilit√©</li>
                </ul>
            </div>
        </section>

        <!-- Section Examen CCNA -->
        <section id="examen" class="section section-exam">
            <div class="section-header">
                <i class="fas fa-graduation-cap section-icon priority-info"></i>
                <h2 class="section-title">üìö PROFONDEUR EXAMEN CCNA</h2>
            </div>
            
            <div class="quiz-container">
                <div class="quiz-question">Pi√®ge Fr√©quent #1 : Que se passe-t-il si vous oubliez la commande `ipv6 unicast-routing` avant de configurer des routes statiques IPv6 ?</div>
                <div class="quiz-options">
                    <div class="quiz-option" data-correct="true">Les routes statiques IPv6 ne fonctionneront pas - le routeur se comporte comme un h√¥te</div>
                    <div class="quiz-option" data-correct="false">Les routes s'installent mais ne sont pas optimales</div>
                    <div class="quiz-option" data-correct="false">Cela n'a aucun impact sur les routes statiques</div>
                </div>
                <div class="quiz-feedback" id="feedback2"></div>
                <button class="action-btn" onclick="checkQuiz(2)" style="width: auto; padding: 0.5rem 1rem; border-radius: var(--radius-sm); margin-top: 1rem;">
                    V√©rifier la r√©ponse
                </button>
            </div>
            
            <div class="interactive-panel">
                <p><span class="priority-warning">? D√©tail Oubli√© #2 :</span> "La distance administrative d'une route statique n'est PAS la m√©trique. La m√©trique par d√©faut d'une route statique est 0. L'AD est la 'fiabilit√©' de la source de la route."</p>
                
                <p><span class="priority-warning">? Pi√®ge Fr√©quent #3 :</span> "Beaucoup confondent dans `show ip route` : `via Serial0/1/0, directly connected` (configur√©e avec interface seule) vs `via 172.16.2.2` (configur√©e avec next-hop)."</p>
                
                <div class="quiz-container">
                    <div class="quiz-question">Question Type CCNA : Un routeur a deux routes statiques vers le m√™me r√©seau 192.168.1.0/24, l'une avec AD=1 et l'autre avec AD=5. Laquelle sera utilis√©e ?</div>
                    <div class="quiz-options">
                        <div class="quiz-option" data-correct="true">Celle avec AD=1 (la plus faible)</div>
                        <div class="quiz-option" data-correct="false">Celle avec AD=5 (la plus r√©cente)</div>
                        <div class="quiz-option" data-correct="false">Les deux en load-balancing</div>
                    </div>
                    <div class="quiz-feedback" id="feedback3"></div>
                    <button class="action-btn" onclick="checkQuiz(3)" style="width: auto; padding: 0.5rem 1rem; border-radius: var(--radius-sm); margin-top: 1rem;">
                        V√©rifier la r√©ponse
                    </button>
                </div>
            </div>
        </section>

        <!-- Section Lab Complet -->
        <section id="lab" class="section section-lab">
            <div class="section-header">
                <i class="fas fa-flask section-icon priority-success"></i>
                <h2 class="section-title">‚öôÔ∏è LAB COMPLET : DE LA CONFIG √Ä L'AUTOMATISATION</h2>
            </div>
            
            <div class="simulator" id="cliSimulator" style="display: none;">
                <div class="simulator-output" id="simOutput">
R1> Bienvenue dans le simulateur CLI Cisco IOS
R1> Tapez 'help' pour la liste des commandes
                </div>
                <div class="simulator-input">
                    <span class="simulator-prompt">R1#</span>
                    <input type="text" class="simulator-input-field" id="cliInput" placeholder="Tapez votre commande..." onkeypress="handleCLIKeypress(event)">
                </div>
            </div>
            
            <div class="interactive-panel">
                <h4><i class="fas fa-layer-group"></i> Niveau 1 (CCNA) : Configuration Fondamentale</h4>
                <div class="code-block cisco" data-language="CISCO">
! Sur R1, configurer une route statique standard IPv4 vers 172.16.1.0/24 via R2
R1(config)# ip route 172.16.1.0 255.255.255.0 172.16.2.2
                </div>
                <p><em>Objectif :</em> √âtablir une connectivit√© basique.</p>
                <p><em>V√©rification :</em> <code>show ip route static</code></p>
                <div class="code-block text" data-language="SORTIE ATTENDUE">
R1# show ip route static | begin 172.16.1.0
S        172.16.1.0/24 [1/0] via 172.16.2.2
                </div>
            </div>
            
            <div class="interactive-panel">
                <h4><i class="fas fa-shield-alt"></i> Niveau 2 (Production S√©curis√©e) : Hardening</h4>
                <div class="code-block cisco" data-language="CISCO">
! 1. TOUJOURS nommer vos routes statiques pour la tra√ßabilit√©
R1(config)# ip route 172.16.1.0 255.255.255.0 172.16.2.2 name TO_DATA_VLAN_1

! 2. Sur Ethernet, utiliser une route ENTI√àREMENT SP√âCIFI√âE
R1(config)# ip route 192.168.1.0 255.255.255.0 GigabitEthernet0/0/1 172.16.2.2

! 3. Route flottante de secours avec AD explicite
R1(config)# ip route 0.0.0.0 0.0.0.0 172.16.2.2
R1(config)# ip route 0.0.0.0 0.0.0.0 10.10.10.2 5
                </div>
                <p><span class="priority-warning">Risque si omis :</span> Impossible de savoir pourquoi une route a √©t√© ajout√©e lors d'un d√©pannage urgent.</p>
            </div>
            
            <div class="interactive-panel">
                <h4><i class="fas fa-robot"></i> Niveau 3 (Expert/Automatisation) : Script & Scale</h4>
                <div class="code-block python" data-language="PYTHON">
# Script Python (Netmiko) pour d√©ployer une route statique
from netmiko import ConnectHandler

device = {
    'device_type': 'cisco_ios',
    'ip': '192.168.100.1',
    'username': 'admin',
    'password': 'Cisco123!',
    'secret': 'Cisco123!',
}

static_route = "ip route 10.10.0.0 255.255.0.0 192.168.100.254 name AUTO_DEPLOYED_VIA_SCRIPT"

connection = ConnectHandler(**device)
connection.enable()
output = connection.send_config_set([static_route])
print(f"Configuration appliqu√©e :\n{output}")
connection.save_config()
connection.disconnect()
                </div>
                <p><span class="priority-success">‚Üí Avantage :</span> D√©ploiement coh√©rent, z√©ro faute de frappe, journalisation automatique.</p>
            </div>
            
            <button class="action-btn" id="toggleSimulatorBtn" style="width: auto; padding: 0.75rem 1.5rem; border-radius: var(--radius-sm); margin-top: 1rem;">
                <i class="fas fa-terminal"></i> Ouvrir le simulateur CLI
            </button>
        </section>

        <!-- Section Sc√©nario de D√©pannage -->
        <section id="depannage" class="section section-troubleshoot">
            <div class="section-header">
                <i class="fas fa-tools section-icon priority-critical"></i>
                <h2 class="section-title">üö® SC√âNARIO DE D√âPANNAGE AVANC√â</h2>
            </div>
            
            <div class="priority-critical">
                <h3>Sympt√¥me Complexe :</h3>
            </div>
            <p>Les utilisateurs du VLAN 10 (172.16.10.0/24) ne peuvent plus joindre le serveur de fichiers 192.168.100.5. Le ping s'arr√™te au routeur du site local (R1). La connectivit√© vers d'autres r√©seaux fonctionne.</p>
            
            <div class="interactive-panel">
                <h4><i class="fas fa-sitemap"></i> Processus de Diagnostic (Arbre D√©cisionnel)</h4>
                
                <div class="mermaid-container">
                    <div class="mermaid">
                        graph TD
                            A[Sympt√¥me: Pas de connectivit√©<br>vers 192.168.100.5] --> B[R1# show ip route 192.168.100.0]
                            B --> C{Route pr√©sente?}
                            C -->|Non| D[show run | section ip route 192.168.100]
                            C -->|Oui, incorrecte| E[V√©rifier next-hop<br>ping <next-hop-ip>]
                            C -->|Oui, correcte| F[traceroute 192.168.100.5 source 172.16.10.1]
                            
                            D --> G{Route configur√©e?}
                            G -->|Oui| H[Probl√®me de r√©cursivit√©<br>V√©rifier connectivit√© vers next-hop]
                            G -->|Non| I[Erreur de configuration<br>V√©rifier sauvegardes Git]
                            
                            E --> J{Next-hop joignable?}
                            J -->|Non| K[Probl√®me couche 2/3<br>vers next-hop]
                            J -->|Oui| L[Probl√®me chez le voisin<br>Se connecter √† R2]
                            
                            style A fill:#f8d7da,stroke:#f5c6cb
                            style K fill:#fff3cd,stroke:#ffeaa7
                            style I fill:#d4edda,stroke:#c3e6cb
                    </div>
                </div>
                
                <p><strong>Root Cause Probable :</strong> Route statique r√©cursive dont le next-hop n'est plus accessible, ou route plus sp√©cifique (ex: un /32) qui √©crase la route r√©seau.</p>
                
                <h4><i class="fas fa-wrench"></i> Fix et Rollback :</h4>
                <div class="code-block cisco" data-language="CISCO">
! 1. Identifier et supprimer la route probl√©matique
R1# show ip route 192.168.100.0
! Supposons qu'elle pointe vers 10.1.1.1 qui est inaccessible
R1(config)# no ip route 192.168.100.0 255.255.255.0 10.1.1.1

! 2. Configurer la route correcte
R1(config)# ip route 192.168.100.0 255.255.255.0 172.16.2.2 name RESTORED_SERVER_FARM

! 3. V√©rification imm√©diate
R1# ping 192.168.100.5 source 172.16.10.1

! 4. COMMANDE DE ROLLBACK (toujours pr√©par√©e avant)
! Si le fix cause plus de probl√®mes
R1(config)# no ip route 192.168.100.0 255.255.255.0 172.16.2.2
R1(config)# ip route 192.168.100.0 255.255.255.0 10.1.1.1
                </div>
            </div>
        </section>

        <!-- Section Micro-Kit -->
        <section id="microkit" class="section section-micro">
            <div class="section-header">
                <i class="fas fa-file-alt section-icon priority-success"></i>
                <h2 class="section-title">üß© MICRO-KIT ESSENTIEL (SYNTH√àSE 1 PAGE A4)</h2>
            </div>
            
            <div class="microkit-grid">
                <div class="microkit-card">
                    <h4><i class="fas fa-gem"></i> 5 Lois Immuables</h4>
                    <ol>
                        <li>Longest Prefix Match d'abord</li>
                        <li>La plus faible AD gagne</li>
                        <li>Pas de r√©cursivit√©, pas de route</li>
                        <li>Sur Ethernet, sp√©cifiez TOUJOURS le next-hop IP</li>
                        <li>La route par d√©faut (/0) est un aimant √† trafic</li>
                    </ol>
                </div>
                
                <div class="microkit-card">
                    <h4><i class="fas fa-terminal"></i> 6 Commandes CLI</h4>
                    <ol>
                        <li><code>ip route ...</code> - Configurer</li>
                        <li><code>show ip route static</code> - Voir statiques</li>
                        <li><code>show ip route &lt;r√©seau&gt;</code> - V√©rifier chemin</li>
                        <li><code>traceroute ...</code> - Tester chemin</li>
                        <li><code>show run | section ip route</code> - Voir config</li>
                        <li><code>debug ip routing</code> - (Prudence) Voir changements</li>
                    </ol>
                </div>
                
                <div class="microkit-card">
                    <h4><i class="fas fa-exclamation-triangle"></i> 3 Pi√®ges CCNA</h4>
                    <ol>
                        <li>Oublier <code>ipv6 unicast-routing</code></li>
                        <li>Confondre "directly connected" dans show ip route</li>
                        <li>Ne pas savoir qu'une route flottante n√©cessite AD sup√©rieure</li>
                    </ol>
                </div>
                
                <div class="microkit-card">
                    <h4><i class="fas fa-wrench"></i> D√©pannage en 3 √âtapes</h4>
                    <ol>
                        <li><strong>V√âRIFIER</strong> (<code>show ip route</code>)</li>
                        <li><strong>PINGER</strong> le next-hop</li>
                        <li><strong>TRACER</strong> le chemin</li>
                    </ol>
                </div>
                
                <div class="microkit-card">
                    <h4><i class="fas fa-shield-alt"></i> Risque S√©curit√©</h4>
                    <p><strong>Risque :</strong> Injection de route malveillante (MITM)</p>
                    <p><strong>Mitigation :</strong> Nommage des routes + AAA + Journalisation + Git</p>
                </div>
                
                <div class="microkit-card">
                    <h4><i class="fas fa-calculator"></i> √âquation Mentale</h4>
                    <div class="priority-concept" style="font-size: 1.2rem; text-align: center; padding: 1rem;">
                        <strong>Routage Statique =<br>Pr√©visibilit√© Totale - Flexibilit√© Automatique</strong>
                    </div>
                </div>
            </div>
            
            <div class="mermaid-container">
                <div class="mermaid">
                    flowchart TD
                        A[Paquet √† Router] --> B{Match dans Table?}
                        B -->|Non| C[Utiliser Route par D√©faut<br>si elle existe]
                        B -->|Oui| D[Choisir Route<br>au Plus Long Pr√©fixe]
                        D --> E{M√™me Pr√©fixe?}
                        E -->|Non| F[Route Unique Gagne]
                        E -->|Oui| G[Choisir Celle avec<br>la PLUS FAIBLE AD]
                </div>
            </div>
            
            <button class="action-btn print" id="exportMicrokitBtn" style="width: auto; padding: 0.75rem 1.5rem; border-radius: var(--radius-sm); margin: 1rem auto; display: block;">
                <i class="fas fa-print"></i> Exporter/Imprimer le Micro-Kit
            </button>
        </section>
    </div>

    <script>
        // Initialisation Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#f8f9fa',
                primaryBorderColor: '#dee2e6',
                primaryTextColor: '#212529',
                lineColor: '#0d6efd',
                secondaryColor: '#6f42c1',
                tertiaryColor: '#198754'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true,
                curve: 'basis'
            }
        });
        
        // Gestion du d√©filement et progression
        window.addEventListener('scroll', function() {
            // Barre de progression
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
            
            // Mise √† jour de la table des mati√®res
            updateActiveSection();
        });
        
        // Table des mati√®res
        const sections = [
            {id: 'analogie', title: 'üìç Analogie Syst√©mique'},
            {id: 'modele-mental', title: 'üß† Mod√®le Mental'},
            {id: 'noyau-dur', title: '‚ö° Noyau Dur'},
            {id: 'securite', title: 'üîê S√©curit√© & M√©tier'},
            {id: 'examen', title: 'üìö Examen CCNA'},
            {id: 'lab', title: '‚öôÔ∏è Lab Complet'},
            {id: 'depannage', title: 'üö® D√©pannage Avanc√©'},
            {id: 'microkit', title: 'üß© Micro-Kit A4'}
        ];
        
        function buildTOC() {
            const tocList = document.getElementById('tocList');
            sections.forEach(section => {
                const item = document.createElement('div');
                item.className = 'toc-item';
                item.textContent = section.title;
                item.onclick = () => {
                    document.getElementById(section.id).scrollIntoView({behavior: 'smooth'});
                };
                tocList.appendChild(item);
            });
        }
        
        function updateActiveSection() {
            const tocItems = document.querySelectorAll('.toc-item');
            let currentActive = null;
            let currentTop = -Infinity;
            
            sections.forEach(section => {
                const element = document.getElementById(section.id);
                const rect = element.getBoundingClientRect();
                
                if (rect.top <= 100 && rect.top > currentTop) {
                    currentTop = rect.top;
                    currentActive = section.id;
                }
            });
            
            tocItems.forEach(item => {
                item.classList.remove('active');
            });
            
            if (currentActive) {
                const activeItem = Array.from(tocItems).find(item => 
                    item.textContent === sections.find(s => s.id === currentActive).title
                );
                if (activeItem) activeItem.classList.add('active');
            }
        }
        
        // Syst√®me de quiz
        function checkQuiz(quizNumber) {
            const options = document.querySelectorAll(`#feedback${quizNumber}`).previousElementSibling.querySelectorAll('.quiz-option');
            const feedback = document.getElementById(`feedback${quizNumber}`);
            
            let selected = null;
            options.forEach(option => {
                if (option.classList.contains('selected')) {
                    selected = option;
                }
            });
            
            if (!selected) {
                feedback.textContent = "‚ö†Ô∏è S√©lectionnez une r√©ponse d'abord !";
                feedback.className = 'quiz-feedback show priority-warning';
                return;
            }
            
            const isCorrect = selected.dataset.correct === 'true';
            
            options.forEach(option => {
                option.classList.remove('selected');
                if (option.dataset.correct === 'true') {
                    option.classList.add('correct');
                } else if (option === selected && !isCorrect) {
                    option.classList.add('incorrect');
                }
            });
            
            if (isCorrect) {
                feedback.textContent = "‚úÖ Correct ! Bonne r√©ponse.";
                feedback.className = 'quiz-feedback show priority-success';
            } else {
                feedback.textContent = "‚ùå Incorrect. Consultez la section correspondante.";
                feedback.className = 'quiz-feedback show priority-critical';
            }
        }
        
        // Simulateur CLI
        const cliCommands = {
            'show ip route': 'Codes: L - local, C - connected, S - static, R - RIP\n' +
                            '       M - mobile, B - BGP, D - EIGRP, EX - EIGRP external\n' +
                            '       O - OSPF, IA - OSPF inter area\n\n' +
                            'Gateway of last resort is 172.16.2.2 to network 0.0.0.0\n\n' +
                            'S*    0.0.0.0/0 [1/0] via 172.16.2.2\n' +
                            '      172.16.0.0/16 is variably subnetted, 5 subnets, 2 masks\n' +
                            'S        172.16.1.0/24 [1/0] via 172.16.2.2\n' +
                            'C        172.16.2.0/24 is directly connected, Serial0/1/0\n' +
                            'S        192.168.1.0/24 [1/0] via 172.16.2.2\n' +
                            'S        192.168.2.0/24 [1/0] via 172.16.2.2',
            
            'show ip route static': 'S*    0.0.0.0/0 [1/0] via 172.16.2.2\n' +
                                   'S        172.16.1.0/24 [1/0] via 172.16.2.2\n' +
                                   'S        192.168.1.0/24 [1/0] via 172.16.2.2\n' +
                                   'S        192.168.2.0/24 [1/0] via 172.16.2.2',
            
            'show run | section ip route': 'ip route 0.0.0.0 0.0.0.0 172.16.2.2\n' +
                                          'ip route 172.16.1.0 255.255.255.0 172.16.2.2\n' +
                                          'ip route 192.168.1.0 255.255.255.0 172.16.2.2\n' +
                                          'ip route 192.168.2.0 255.255.255.0 172.16.2.2',
            
            'ping 192.168.1.1': 'Type escape sequence to abort.\n' +
                               'Sending 5, 100-byte ICMP Echos to 192.168.1.1, timeout is 2 seconds:\n' +
                               '!!!!!\n' +
                               'Success rate is 100 percent (5/5), round-trip min/avg/max = 1/2/4 ms',
            
            'help': 'Commandes disponibles:\n' +
                   '  show ip route          - Affiche la table de routage\n' +
                   '  show ip route static   - Affiche uniquement les routes statiques\n' +
                   '  show run | section ip route - Affiche la configuration des routes\n' +
                   '  ping <adresse>         - Test de connectivit√©\n' +
                   '  clear                  - Efface l\'√©cran\n' +
                   '  help                   - Affiche cette aide'
        };
        
        function handleCLIKeypress(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('cliInput');
                const output = document.getElementById('simOutput');
                const command = input.value.trim();
                
                output.textContent += '\nR1# ' + command + '\n';
                
                if (command === 'clear') {
                    output.textContent = 'R1> ';
                } else if (cliCommands[command]) {
                    output.textContent += cliCommands[command];
                } else if (command.startsWith('ping ')) {
                    output.textContent += cliCommands['ping 192.168.1.1'];
                } else if (command) {
                    output.textContent += '% Commande non reconnue: "' + command + '"\nTapez "help" pour la liste des commandes';
                }
                
                input.value = '';
                output.scrollTop = output.scrollHeight;
            }
        }
        
        // Gestion des √©v√©nements
        document.addEventListener('DOMContentLoaded', function() {
            buildTOC();
            
            // S√©lection des options de quiz
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.addEventListener('click', function() {
                    this.parentElement.querySelectorAll('.quiz-option').forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                    });
                    this.classList.add('selected');
                });
            });
            
            // Bouton simulateur
            document.getElementById('toggleSimulatorBtn').addEventListener('click', function() {
                const simulator = document.getElementById('cliSimulator');
                if (simulator.style.display === 'none' || simulator.style.display === '') {
                    simulator.style.display = 'block';
                    this.innerHTML = '<i class="fas fa-times"></i> Fermer le simulateur CLI';
                    document.getElementById('cliInput').focus();
                } else {
                    simulator.style.display = 'none';
                    this.innerHTML = '<i class="fas fa-terminal"></i> Ouvrir le simulateur CLI';
                }
            });
            
            // Bouton impression
            document.getElementById('exportMicrokitBtn').addEventListener('click', function() {
                window.print();
            });
            
            // Bouton simulateur global
            document.getElementById('simulatorBtn').addEventListener('click', function() {
                document.getElementById('lab').scrollIntoView({behavior: 'smooth'});
                setTimeout(() => {
                    document.getElementById('toggleSimulatorBtn').click();
                }, 500);
            });
            
            // Bouton retour en haut
            document.getElementById('scrollTopBtn').addEventListener('click', function() {
                window.scrollTo({top: 0, behavior: 'smooth'});
            });
            
            // Bouton impression globale
            document.getElementById('printBtn').addEventListener('click', function() {
                document.getElementById('microkit').scrollIntoView({behavior: 'smooth'});
            });
        });
        
        // Redimensionnement des diagrammes Mermaid
        window.addEventListener('resize', function() {
            mermaid.init();
        });
    </script>
</body>
</html>