<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module-Kit de Ma√Ætrise : SLAAC et DHCPv6</title>
    <style>
        :root {
            --color-critical: #dc3545;
            --color-warning: #fd7e14;
            --color-success: #28a745;
            --color-info: #17a2b8;
            --color-concept: #6f42c1;
            --color-background: #ffffff;
            --color-text: #212529;
            --color-border: #dee2e6;
            --color-surface: #f8f9fa;
            --color-code-bg: #f1f3f4;
            --shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.7;
            color: var(--color-text);
            background-color: var(--color-background);
            padding-top: 0;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* ===== HEADER ===== */
        .mastery-header {
            background: linear-gradient(135deg, #1a365d 0%, #2d3748 50%, #4a5568 100%);
            color: white;
            padding: 50px 20px;
            text-align: center;
            border-radius: 0 0 25px 25px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .mastery-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--color-success), var(--color-info), var(--color-concept));
        }

        .header-title {
            font-size: 2.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header-subtitle {
            font-size: 1.8rem;
            font-weight: 300;
            margin-bottom: 20px;
            color: #e2e8f0;
        }

        .module-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--color-warning);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* ===== SECTIONS ===== */
        .section {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: var(--shadow);
            border: 1px solid var(--color-border);
        }

        .section-header {
            display: flex;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--color-border);
        }

        .section-icon {
            font-size: 2rem;
            margin-right: 15px;
            min-width: 50px;
        }

        .section-header h2 {
            color: var(--color-concept);
            font-size: 1.8rem;
            margin: 0;
            flex-grow: 1;
        }

        /* ===== COLOR CODING ===== */
        .critical {
            border-left: 6px solid var(--color-critical);
            padding: 20px;
            margin: 20px 0;
            background-color: #fff5f5;
            border-radius: 0 8px 8px 0;
        }

        .critical::before {
            content: 'üî¥ ';
            font-size: 1.2em;
        }

        .warning {
            border-left: 6px solid var(--color-warning);
            padding: 20px;
            margin: 20px 0;
            background-color: #fff9f0;
            border-radius: 0 8px 8px 0;
        }

        .warning::before {
            content: '‚ö†Ô∏è ';
            font-size: 1.2em;
        }

        .success {
            border-left: 6px solid var(--color-success);
            padding: 20px;
            margin: 20px 0;
            background-color: #f0fff4;
            border-radius: 0 8px 8px 0;
        }

        .success::before {
            content: '‚úÖ ';
            font-size: 1.2em;
        }

        .info {
            border-left: 6px solid var(--color-info);
            padding: 20px;
            margin: 20px 0;
            background-color: #f0f8ff;
            border-radius: 0 8px 8px 0;
        }

        .info::before {
            content: 'üîµ ';
            font-size: 1.2em;
        }

        .concept {
            border-left: 6px solid var(--color-concept);
            padding: 20px;
            margin: 20px 0;
            background-color: #f8f0ff;
            border-radius: 0 8px 8px 0;
        }

        .concept::before {
            content: 'üß† ';
            font-size: 1.2em;
        }

        /* ===== CODE BLOCKS ===== */
        pre {
            background-color: var(--color-code-bg);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .cisco { border-left: 5px solid var(--color-info); }
        .python { border-left: 5px solid #3572A5; }
        .yaml { border-left: 5px solid #cb171e; }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            background-color: var(--color-code-bg);
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
        }

        /* ===== TABS ===== */
        .tabs {
            margin: 25px 0;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 2px solid var(--color-border);
            margin-bottom: 0;
        }

        .tab-button {
            padding: 15px 25px;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: 600;
            color: var(--color-text);
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab-button:hover {
            background: #f8f9fa;
        }

        .tab-button.active {
            border-bottom-color: var(--color-info);
            color: var(--color-info);
            background: #f0f8ff;
        }

        .tab-content {
            border: 1px solid var(--color-border);
            border-top: none;
            border-radius: 0 0 10px 10px;
            padding: 25px;
            background: white;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* ===== QUIZ ===== */
        .quiz {
            background: #f8f9ff;
            border: 2px dashed var(--color-info);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .quiz-question {
            font-weight: 700;
            margin-bottom: 20px;
            color: var(--color-concept);
            font-size: 1.2em;
        }

        .quiz-option {
            display: block;
            margin: 10px 0;
            padding: 15px;
            background: white;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quiz-option:hover {
            border-color: var(--color-info);
            background: #f0f7ff;
        }

        .quiz-option.correct {
            border-color: var(--color-success);
            background: #e8f5e9;
        }

        .quiz-option.incorrect {
            border-color: var(--color-critical);
            background: #ffebee;
        }

        .quiz-feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 8px;
            display: none;
        }

        .quiz-feedback.show {
            display: block;
        }

        /* ===== BUTTONS ===== */
        .btn {
            display: inline-block;
            padding: 12px 25px;
            background: var(--color-info);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            text-decoration: none;
            margin: 5px;
        }

        .btn:hover {
            background: #138496;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* ===== MERMAID ===== */
        .mermaid-container {
            background: white;
            border: 1px solid var(--color-border);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            overflow-x: auto;
        }

        /* ===== COLLAPSIBLE ===== */
        .collapsible-header {
            background: var(--color-info);
            color: white;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .collapsible-content {
            padding: 20px;
            border: 1px solid var(--color-border);
            border-top: none;
            border-radius: 0 0 8px 8px;
            background: white;
            display: none;
        }

        .collapsible-content.show {
            display: block;
        }

        /* ===== MICRO-KIT ===== */
        .micro-kit {
            background: linear-gradient(135deg, #ffffff 0%, #f8fdff 100%);
            border: 3px solid var(--color-info);
            border-radius: 15px;
            padding: 40px;
            margin: 40px 0;
            position: relative;
        }

        .micro-kit::before {
            content: 'üìò';
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 4rem;
            opacity: 0.1;
        }

        .micro-kit-header {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--color-info);
        }

        .micro-kit-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .micro-kit-card {
            background: white;
            border: 2px solid var(--color-border);
            border-radius: 10px;
            padding: 20px;
            transition: all 0.3s;
        }

        .micro-kit-card:hover {
            border-color: var(--color-info);
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .header-title { font-size: 2rem; }
            .header-subtitle { font-size: 1.4rem; }
            .section { padding: 20px; }
            .tab-buttons { flex-wrap: wrap; }
            .tab-button { flex: 1; min-width: 120px; }
            .micro-kit-grid { grid-template-columns: 1fr; }
        }

        /* ===== BACK TO TOP ===== */
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--color-info);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            font-size: 1.5em;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            transition: all 0.3s;
            z-index: 1000;
            opacity: 0;
            transform: translateY(20px);
        }

        .back-to-top.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .back-to-top:hover {
            background: var(--color-success);
            transform: translateY(-5px);
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- HEADER -->
    <header class="mastery-header" id="top">
        <div class="module-badge">
            <i class="fas fa-graduation-cap"></i> MODULE 8
        </div>
        <h1 class="header-title">Module-Kit de Ma√Ætrise</h1>
        <h2 class="header-subtitle">SLAAC et DHCPv6</h2>
        <p style="max-width: 800px; margin: 20px auto; color: #cbd5e0;">
            Allocation dynamique d'adresses IPv6 | Reconstruction p√©dagogique 200%
        </p>
    </header>

    <main class="container">
        <!-- ANALOGIE SYST√âMIQUE -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üìç</span>
                <h2>ANALOGIE SYST√âMIQUE</h2>
            </div>
            <div class="concept">
                <p><strong>Th√®me_central:</strong> "L'Urbanisme Dynamique : Autoconstruction vs Cadastre Centralis√©"</p>
                <p><strong>M√©taphore:</strong> Un nouveau quartier (r√©seau IPv6) est loti. L'urbaniste (le routeur) d√©finit les r√®gles du plan (pr√©fixe /64, passerelle). Les propri√©taires (h√¥tes) peuvent alors :</p>
                <ol>
                    <li><strong>S'Autoconstruire (SLAAC Pur)</strong> : Chacun b√¢tit sa maison (adresse) selon des normes, sans registre central. Simple, scalable.</li>
                    <li><strong>Consulter la Mairie pour les Services (DHCPv6 Stateless)</strong> : Ils construisent leur maison mais obtiennent l'eau/√©lectricit√© (DNS, NTP) d'un service municipal qui ne suit pas qui habite o√π.</li>
                    <li><strong>Obtenir un Permis de Construire Centralis√© (DHCPv6 Stateful)</strong> : Une mairie (serveur) attribue chaque parcelle et tous les services, gardant un cadastre exhaustif.</li>
                </ol>
                <p><strong>√âl√©ments_cl√©s:</strong></p>
                <ul>
                    <li><em>Plan de Zonage (RA)</em> : D√©finit le pr√©fixe (rue) et la sortie (passerelle). Indicateurs A/O/M = types de permis.</li>
                    <li><em>Autoconstruction (SLAAC)</em> : M√©thode EUI-64 (bas√©e sur MAC) ou al√©atoire (pour la confidentialit√©).</li>
                    <li><em>V√©rification de l'Adresse (DAD)</em> : Crier "Cette adresse est-elle libre ?" avant d'emm√©nager.</li>
                    <li><em>Cadastre (Serveur Stateful)</em> : Base de donn√©es des baux (bindings) DHCPv6.</li>
                </ul>
                <p><strong>Risque_analogique:</strong> Un faux urbaniste (rogue RA) qui donne de mauvais plans, menant √† un quartier dysfonctionnel ou isol√©.</p>
            </div>
        </section>

        <!-- MOD√àLE MENTAL -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üß†</span>
                <h2>MOD√àLE MENTAL</h2>
            </div>
            <div class="mermaid-container">
                <div id="mermaid-diagram"></div>
            </div>
        </section>

        <!-- NOYAU DUR -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">‚ö°</span>
                <h2>NOYAU DUR (Les lois Immuables)</h2>
            </div>
            <div class="critical">
                <p><strong>LOI #1 : La passerelle par d√©faut est UNIQUEMENT fournie par le RA ICMPv6, JAMAIS par DHCPv6.</strong></p>
                <p><em>Preuve :</em> C'est l'adresse source LLA du RA. Un serveur DHCPv6 (stateful ou stateless) ne contient pas ce champ. Oublier <code>ipv6 unicast-routing</code> sur le routeur = pas de RA = pas de gateway pour les h√¥tes.</p>
            </div>
            <div class="critical">
                <p><strong>LOI #2 : Le comportement de l'h√¥te est dict√© par la combinaison BINAIRE des indicateurs A, O, M dans le RA.</strong></p>
                <p><em>Preuve :</em> C'est le noyau du module. <code>A=1</code> = "G√©n√©rez votre adresse". <code>M=1</code> = "Obtenez tout du DHCP". <code>O=1</code> = "Obtenez des infos suppl√©mentaires du DHCP". <code>A=1,M=1</code> sur certains OS cr√©e DEUX adresses.</p>
            </div>
            <div class="warning">
                <p><strong>LOI #3 : L'adresse Lien-Local (LLA) FE80::/10 est MANDATOIRE et auto-g√©n√©r√©e pour toute communication IPv6 sur le lien.</strong></p>
                <p><em>Preuve :</em> C'est la premi√®re adresse cr√©√©e, utilis√©e pour le DAD, les RS/RA, et souvent comme adresse source. Sans LLA, pas de couche 3 IPv6 op√©rationnelle sur l'interface.</p>
            </div>
            <div class="success">
                <p><strong>LOI #4 : Pour la s√©curit√© et la vie priv√©e, l'ID d'interface g√©n√©r√© al√©atoirement doit √™tre pr√©f√©r√© √† EUI-64.</strong></p>
                <p><em>Preuve :</em> EUI-64 embarque l'adresse MAC (OUI fixe), permettant le tra√ßage de l'appareil. Windows 10+ et iOS utilisent l'al√©atoire par d√©faut.</p>
            </div>
            <div class="info">
                <p><strong>LOI #5 : Un agent de relais DHCPv6 est REQUIS lorsque le client et le serveur sont sur des sous-r√©seaux IPv6 diff√©rents.</strong></p>
                <p><em>Preuve :</em> Les messages DHCPv6 (SOLICIT, etc.) sont de port√©e lien-local. Sans relais (<code>ipv6 dhcp relay destination</code>), ils ne traversent pas le routeur.</p>
            </div>
        </section>

        <!-- PROFONDEUR S√âCURIT√â & M√âTIER -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üîê</span>
                <h2>PROFONDEUR S√âCURIT√â & M√âTIER</h2>
            </div>
            <div class="concept">
                <p><strong>üß† Int√©gration M√©tier (Admin R√©seau) :</strong></p>
                <p>Dans un parc mature, on n'utilise presque jamais SLAAC seul. Le choix est entre :</p>
                <ol>
                    <li><strong>DHCPv6 Stateless (Scalable, Centralis√©)</strong> : Adresses g√©r√©es par l'h√¥te (SLAAC), param√®tres critiques (DNS, NTP, domaine) g√©r√©s de fa√ßon centralis√©e et versionn√©e via un serveur DHCPv6. Permet un inventory l√©ger.</li>
                    <li><strong>DHCPv6 Stateful (Audit, Contr√¥le)</strong> : N√©cessaire pour le tracking d'adresses exact (compliance), la r√©servation d'adresses, ou lorsque la politique interdit l'auto-configuration. Plus lourd √† g√©rer.</li>
                </ol>
                <pre class="yaml"><code># Exemple de playbook Ansible pour standardiser la config DHCPv6 Stateless
- name: Configure DHCPv6 Stateless sur les routers d'acc√®s
  hosts: edge_routers
  tasks:
    - name: Activer le routage IPv6
      cisco.ios.ios_config:
        lines: ipv6 unicast-routing
    - name: Configurer le pool DHCPv6 Stateless
      cisco.ios.ios_config:
        lines:
          - ipv6 dhcp pool DHCPv6-STATELESS
          - dns-server 2001:4860:4860::8888
          - domain-name enterprise.com
          - information refresh 86400
    - name: Appliquer le pool et les flags sur l'interface VLAN
      cisco.ios.ios_config:
        lines:
          - ipv6 dhcp server DHCPv6-STATELESS
          - ipv6 nd other-config-flag
        parents: interface Vlan10</code></pre>
            </div>
            <div class="critical">
                <p><strong>üö® RISQUE PRINCIPAL : Usurpation de Routeur (Rogue RA) & Empoisonnement de Configuration</strong></p>
                <p><strong>‚Üí Attaque Type :</strong> Rogue Router Advertisement. Un attaquant connect√© au r√©seau envoie des RA malveillants avec un <code>M=1</code> ou un pr√©fixe incorrect.</p>
                <p><strong>‚Üí D√©tection :</strong><br>
                    <code>show ipv6 routers</code> sur un h√¥te. Surveiller les logs syst√®me pour des changements de gateway IPv6 inattendus.<br>
                    <code>debug ipv6 nd</code> sur un routeur Cisco (√† utiliser avec pr√©caution) pour voir les RA en transit.
                </p>
                <p><strong>‚Üí Mitigation Imm√©diate :</strong>
                <pre class="cisco"><code>! Sur les ports d'acc√®s des switches
interface GigabitEthernet0/1
  ipv6 nd raguard
  ipv6 dhcp guard</code></pre>
                RA Guard bloque les RA non autoris√©s sur les ports h√¥tes. DHCPv6 Guard bloque les messages de serveurs DHCPv6 non autoris√©s.
                </p>
                <p><strong>‚Üí Int√©gration Entreprise :</strong> Ces commandes <code>guard</code> doivent faire partie de votre <strong>baseline de s√©curit√© des ports d'acc√®s</strong> d√©ploy√©e via Ansible/Terraform. Les alertes SIEM doivent √™tre configur√©es pour d√©tecter les changements de gateway IPv6 sur les serveurs critiques.</p>
            </div>
        </section>

        <!-- PROFONDEUR EXAMEN CCNA -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üìö</span>
                <h2>PROFONDEUR EXAMEN CCNA</h2>
            </div>
            <div class="warning">
                <p><strong>? Pi√®ge Fr√©quent #1 :</strong> "Quels indicateurs RA activent le DHCPv6 Stateless ?" Beaucoup r√©pondent <code>O=1</code>. La r√©ponse <strong>vraie</strong> est <code>A=1</code> <strong>ET</strong> <code>O=1</code>. <code>A=1</code> d√©clenche SLAAC, <code>O=1</code> dit "va chercher le reste en DHCP".</p>
            </div>
            <div class="warning">
                <p><strong>? Pi√®ge Fr√©quent #2 :</strong> La <strong>passerelle par d√©faut</strong>. L'examen aime demander "D'o√π l'h√¥te obtient-il son adresse de passerelle IPv6 ?" R√©ponse : <strong>Uniquement depuis l'adresse source LLA du RA</strong>. Pas du DHCP.</p>
            </div>
            <div class="info">
                <p><strong>D√©tail Oubli√© #3 :</strong> Les ports UDP. <strong>Client (546)</strong> ‚Üê <strong>Serveur (547)</strong>. C'est l'inverse de DHCPv4 (client 68, serveur 67).</p>
            </div>
            <div class="quiz">
                <div class="quiz-question"><i class="fas fa-question-circle"></i> Question Type CCNA :</div>
                <p>Un h√¥te re√ßoit un RA avec les flags A=1, O=0, M=1. Quelle adresse IPv6 l'h√¥te Windows 10 utilisera-t-il pour envoyer du trafic vers Internet ?</p>
                <div class="quiz-option" onclick="checkQuizAnswer(this, 'incorrect')">A. Seulement l'adresse obtenue via SLAAC.</div>
                <div class="quiz-option" onclick="checkQuizAnswer(this, 'incorrect')">B. Seulement l'adresse obtenue via DHCPv6 Stateful.</div>
                <div class="quiz-option" onclick="checkQuizAnswer(this, 'correct')">C. Les deux adresses (SLAAC et DHCPv6), mais il pr√©f√©rera celle obtenue via DHCPv6.</div>
                <div class="quiz-option" onclick="checkQuizAnswer(this, 'incorrect')">D. Aucune, la combinaison de flags est invalide.</div>
                <div class="quiz-feedback" id="feedback1">
                    <p><strong>Analyse :</strong> Bien que rare, A=1,M=1 est possible. Windows cr√©era DEUX adresses mais utilisera par d√©faut celle obtenue par DHCPv6 (stateful). R√©ponse C.</p>
                </div>
                <button class="btn" onclick="showQuizExplanation(1)"><i class="fas fa-lightbulb"></i> Voir l'explication</button>
            </div>
        </section>

        <!-- LAB COMPLET -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">‚öôÔ∏è</span>
                <h2>LAB COMPLET : DE LA CONFIG √Ä L'AUTOMATISATION</h2>
            </div>
            <div class="tabs">
                <div class="tab-buttons">
                    <button class="tab-button active" data-tab="lab1">Niveau 1 (CCNA)</button>
                    <button class="tab-button" data-tab="lab2">Niveau 2 (Production)</button>
                    <button class="tab-button" data-tab="lab3">Niveau 3 (Expert)</button>
                </div>
                <div class="tab-content">
                    <div id="lab1" class="tab-pane active">
                        <h3>Niveau 1 (CCNA) : Configuration Fondamentale</h3>
                        <pre class="cisco"><code>! Sur le Routeur (R1) - Servant de Serveur DHCPv6 Stateful et envoyant des RA
R1(config)# ipv6 unicast-routing  ! √âTAPE ABSOLUMENT CRITIQUE
R1(config)# ipv6 dhcp pool LAN-POOL
R1(config-dhcpv6)# address prefix 2001:DB8:ACAD:1::/64
R1(config-dhcpv6)# dns-server 2001:4860:4860::8888
R1(config-dhcpv6)# domain-name ccna-lab.com
R1(config-dhcpv6)# exit
R1(config)# interface GigabitEthernet0/0
R1(config-if)# ipv6 address 2001:DB8:ACAD:1::1/64
R1(config-if)# ipv6 dhcp server LAN-POOL
R1(config-if)# ipv6 nd managed-config-flag  ! Force M=1 pour le Stateful
R1(config-if)# ipv6 nd prefix default no-autoconfig ! D√©sactive A=1 pour √©viter 2 adresses</code></pre>
                        <div class="info">
                            <p><em>V√©rification :</em> <code>show ipv6 dhcp pool</code> <code>show ipv6 dhcp binding</code></p>
                        </div>
                    </div>
                    <div id="lab2" class="tab-pane">
                        <h3>Niveau 2 (Production S√©curis√©e) : Hardening</h3>
                        <pre class="cisco"><code>! Sur le Switch (Couche 2) - Protection contre les Rogue RA/DHCPv6
SW1(config)# interface range GigabitEthernet0/1-24
SW1(config-if-range)# switchport mode access
SW1(config-if-range)# ipv6 nd raguard     ! Bloque les RA sur les ports h√¥tes
SW1(config-if-range)# ipv6 dhcp guard     ! Bloque les messages de serveur DHCPv6 non autoris√©s
! Option : Politique de destination des RA bloqu√©s
SW1(config-if-range)# ipv6 nd raguard policy drop</code></pre>
                        <div class="warning">
                            <p><strong>Risque si omis :</strong> Un attaquant sur un port peut usurper le r√¥le de routeur ou de serveur DHCPv6, interceptant ou redirigeant le trafic.</p>
                        </div>
                    </div>
                    <div id="lab3" class="tab-pane">
                        <h3>Niveau 3 (Expert/Automatisation) : Script & Scale</h3>
                        <pre class="python"><code>#!/usr/bin/env python3
# Script Python (Netmiko) pour auditer la config DHCPv6 sur un parc de routeurs
from netmiko import ConnectHandler
import json

device = {
    'device_type': 'cisco_ios',
    'host': '192.168.1.1',
    'username': 'admin',
    'password': 'secret',
}

commands = [
    'show ipv6 interface brief',
    'show ipv6 dhcp pool',
    'show run | section ipv6 dhcp',
    'show ipv6 neighbors'
]

with ConnectHandler(**device) as net_connect:
    output = {}
    for cmd in commands:
        output[cmd] = net_connect.send_command(cmd, use_textfsm=True)
    # Analyse : V√©rifier si 'ipv6 unicast-routing' est pr√©sent, coh√©rence des pools, etc.
    print(json.dumps(output, indent=2))</code></pre>
                        <div class="success">
                            <p><strong>‚Üí Avantage :</strong> Audit automatis√© de la conformit√©, d√©tection des configs manquantes (<code>ipv6 unicast-routing</code>), gain de temps massif.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SC√âNARIO DE D√âPANNAGE -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üö®</span>
                <h2>SC√âNARIO DE D√âPANNAGE AVANC√â</h2>
            </div>
            <div class="critical">
                <p><strong>Sympt√¥me Complexe :</strong> Les h√¥tes sur le VLAN 30 obtiennent une adresse IPv6 et une passerelle, mais ne peuvent pas r√©soudre les noms de domaine. Les h√¥tes sur le VLAN 20 fonctionnent parfaitement.</p>
            </div>
            
            <div class="collapsible-header" onclick="toggleCollapse('process')">
                Processus de Diagnostic (Arbre D√©cisionnel)
                <i class="fas fa-chevron-down"></i>
            </div>
            <div id="process" class="collapsible-content">
                <ol>
                    <li><strong>V√©rifier la m√©thode</strong> sur le VLAN 30. Sur un h√¥te : <code>ipconfig /all</code> (Win) ou <code>ip -6 addr show</code> (Linux). L'h√¥te a-t-il <strong>une ou deux</strong> adresses IPv6 globales ?
                        <ul>
                            <li><strong>Si une seule adresse GUA :</strong> M√©thode probable = <strong>SLAAC seul (A=1, O=0, M=0)</strong>. Aller √† l'√©tape 2.</li>
                            <li><strong>Si deux adresses GUA :</strong> M√©thode = <strong>SLAAC + DHCPv6 Stateful (A=1,M=1)</strong>. Probl√®me diff√©rent. Aller √† l'√©tape 3.</li>
                        </ul>
                    </li>
                    <li><strong>Pour SLAAC seul :</strong> Le DNS n'est PAS fourni. C'est le comportement attendu. Le probl√®me n'est pas une panne, mais une <strong>mauvaise conception</strong>. La solution est de passer en DHCPv6 Stateless (A=1,O=1).</li>
                    <li><strong>Pour SLAAC + Stateful :</strong> V√©rifier la configuration du pool DHCPv6 sur le routeur.
                        <pre class="cisco"><code>R1# show run | section ipv6 dhcp pool VLAN30-POOL
! V√©rifier la ligne 'dns-server'
R1# show ipv6 dhcp pool VLAN30-POOL
! V√©rifier l'activit√© et les param√®tres</code></pre>
                        <em>Si le serveur DNS est configur√©</em>, v√©rifier la connectivit√© entre l'h√¥te et le serveur DNS (<code>ping 2001:4860:4860::8888</code>).
                    </li>
                </ol>
                <p><strong>Root Cause Probable (pour l'√©tape 2) :</strong> L'interface routeur sur VLAN 30 est configur√©e avec <code>ipv6 nd managed-config-flag</code> (M=1) <strong>mais</strong> le pool DHCPv6 correspondant n'est pas configur√© ou n'est pas li√© √† l'interface. Ou, l'indicateur <code>O</code> n'est pas d√©fini alors qu'un serveur DHCPv6 stateless est attendu.</p>
            </div>
            
            <div class="collapsible-header" onclick="toggleCollapse('fix')">
                Fix et Rollback
                <i class="fas fa-chevron-down"></i>
            </div>
            <div id="fix" class="collapsible-content">
                <pre class="cisco"><code>! FIX - Configurer un serveur DHCPv6 Stateless pour fournir le DNS
R1(config)# ipv6 dhcp pool VLAN30-STATELESS
R1(config-dhcpv6)# dns-server 2001:4860:4860::8888 2001:4860:4860::8844
R1(config-dhcpv6)# domain-name enterprise.com
R1(config)# interface Vlan30
R1(config-if)# ipv6 dhcp server VLAN30-STATELESS
R1(config-if)# ipv6 nd other-config-flag   ! D√©finit O=1
R1(config-if)# no ipv6 nd managed-config-flag ! Assure M=0 (si pr√©c√©demment set)

! V√âRIFICATION
R1# show ipv6 dhcp pool VLAN30-STATELESS
R1# show ipv6 interface Vlan30 | include ND
! V√©rifier 'Hosts use DHCP to obtain other configuration.'

! ROLLBACK (au cas o√π)
R1(config)# interface Vlan30
R1(config-if)# no ipv6 dhcp server VLAN30-STATELESS
R1(config-if)# no ipv6 nd other-config-flag
R1(config-if)# ipv6 nd managed-config-flag  ! Revenir √† l'ancienne config suppos√©e</code></pre>
            </div>
        </section>

        <!-- CONNECTIONS SYST√âMIQUES -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">üîó</span>
                <h2>CONNECTIONS SYST√âMIQUES</h2>
            </div>
            <div class="info">
                <p><strong>‚Üê Module Pr√©c√©dent (Adressage IPv6) :</strong> SLAAC/DHCPv6 r√©solvent la limitation de la configuration manuelle fastidieuse et error-prone des GUA IPv6. Ils automatisent la partie "h√¥te" du plan d'adressage d√©fini manuellement sur les routeurs.</p>
            </div>
            <div class="success">
                <p><strong>‚Üí Module Suivant (FHRP pour IPv6) :</strong> Une fois que les h√¥tes ont une GUA et une passerelle via SLAAC/DHCPv6, ils d√©pendent de la disponibilit√© de cette passerelle. Les protocoles comme HSRPv2 ou GLBP pour IPv6 (ou VRRPv3) fournissent une redondance de passerelle par d√©faut, cruciale pour un r√©seau r√©silient.</p>
            </div>
            <div class="concept">
                <p><strong>üîÑ √âcosyst√®me R√©el :</strong> Dans un r√©seau d'entreprise avec contr√¥leur Wi-Fi (ex: Cisco WLC), le WLC agit souvent comme <strong>agent de relais DHCPv6</strong> pour les clients sans fil, transmettant leurs requ√™tes au serveur DHCPv6 central situ√© sur le r√©seau filaire.</p>
            </div>
        </section>

        <!-- VALIDATION PAR EXERCICE MENTAL -->
        <section class="section">
            <div class="section-header">
                <span class="section-icon">‚ùì</span>
                <h2>VALIDATION PAR EXERCICE MENTAL</h2>
            </div>
            <div class="quiz">
                <div class="quiz-question"><i class="fas fa-brain"></i> Question de Concept :</div>
                <p>En utilisant l'analogie de l'urbanisme, expliquez pourquoi le "plan de zonage" (RA) doit √™tre prot√©g√© (RA Guard). Que se passe-t-il si un faux urbaniste distribue de mauvais plans ?</p>
                <button class="btn" onclick="toggleAnswer('concept-answer')">Voir la r√©ponse</button>
                <div id="concept-answer" class="collapsible-content">
                    <p>Si un faux urbaniste (rogue RA) donne de mauvais plans, les propri√©taires (h√¥tes) construiront leurs maisons (adresses) au mauvais endroit (mauvais pr√©fixe) ou utiliseront la mauvaise sortie de la ville (mauvaise passerelle). Cela peut isoler les h√¥tes, rediriger leur trafic vers un attaquant (man-in-the-middle) ou provoquer des conflits d'adresses. RA Guard agit comme la police municipale, v√©rifiant l'identit√© de l'urbaniste avant de laisser passer ses plans.</p>
                </div>
            </div>
            <div class="quiz">
                <div class="quiz-question"><i class="fas fa-exclamation-triangle"></i> Question de Pi√®ge :</div>
                <p>Un routeur a <code>ipv6 unicast-routing</code> et une GUA configur√©e sur Gi0/0. Un h√¥te connect√© √† ce port obtient une adresse LLA mais jamais de GUA. Quelle commande simple sur le routeur permettra tr√®s probablement de diagnostiquer le probl√®me de base ?</p>
                <button class="btn" onclick="toggleAnswer('trap-answer')">Voir la r√©ponse</button>
                <div id="trap-answer" class="collapsible-content">
                    <p>La commande <code>show ipv6 interface gigabitethernet 0/0</code> et v√©rifier la ligne "<strong>ICMP router advertisements are sent every 200 seconds</strong>". Si cette ligne est absente, le routage IPv6 n'est pas actif sur cette interface sp√©cifique (peut-√™tre d√ª √† une commande <code>shutdown</code> ou √† l'absence d'adresse GUA). Le probl√®me fondamental est souvent l'absence d'adresse GUA configur√©e sur l'interface du routeur, ce qui l'emp√™che d'envoyer des RA avec un pr√©fixe.</p>
                </div>
            </div>
            <div class="quiz">
                <div class="quiz-question"><i class="fas fa-fire"></i> Question de Crise :</div>
                <p>"Il est 3h du matin, tous les nouveaux clients IPv6 du b√¢timent A ne peuvent plus surfer. Votre monitoring montre que le serveur DHCPv6 principal est UP. Votre premi√®re commande SSH ? Votre premi√®re hypoth√®se ? Votre plan d'action en 3 √©tapes ?"</p>
                <button class="btn" onclick="toggleAnswer('crisis-answer')">Voir la r√©ponse</button>
                <div id="crisis-answer" class="collapsible-content">
                    <p><strong>Premi√®re commande :</strong> <code>ssh @router_building_a show ipv6 interface vlan 10 | include unicast-routing|ND</code>. V√©rifier si le routage IPv6 est actif et les param√®tres ND.</p>
                    <p><strong>Premi√®re hypoth√®se :</strong> Un administrateur a accidentellement ajout√© <code>no ipv6 unicast-routing</code> sur le routeur d'acc√®s ou un <code>ipv6 nd raguard</code> trop restrictif sur un switch.</p>
                    <p><strong>Plan d'action :</strong></p>
                    <ol>
                        <li><code>show run interface port-channel1</code> sur les deux switches pour v√©rifier <code>lacp max-bundle</code></li>
                        <li>Uniformiser √† la m√™me valeur (ex: 4) des deux c√¥t√©s</li>
                        <li><code>clear lacp counters</code> et surveiller la reconvergence avec <code>show etherchannel summary</code></li>
                    </ol>
                </div>
            </div>
        </section>

        <!-- MICRO-KIT ESSENTIEL -->
        <section class="micro-kit">
            <div class="micro-kit-header">
                <h2><i class="fas fa-puzzle-piece"></i> MICRO-KIT ESSENTIEL (SYNTH√àSE 1 PAGE A4)</h2>
                <p>Version imprimable pour r√©vision acc√©l√©r√©e avant l'examen</p>
            </div>
            <div class="micro-kit-grid">
                <div class="micro-kit-card">
                    <h4><i class="fas fa-gem"></i> Les 5 Lois Immuables</h4>
                    <ol>
                        <li>Gateway IPv6 = RA LLA, jamais DHCP</li>
                        <li>Comportement h√¥te = Combinaison binaire A/O/M</li>
                        <li>LLA FE80::/10 = Obligatoire, auto-g√©n√©r√©e</li>
                        <li>ID Interface : Privil√©gier Al√©atoire > EUI-64</li>
                        <li>Relais DHCPv6 obligatoire si client/serveur sur subnets diff√©rents</li>
                    </ol>
                </div>
                <div class="micro-kit-card">
                    <h4><i class="fas fa-terminal"></i> 6 Commandes CLI Incontournables</h4>
                    <pre style="font-size: 0.9em;"><code>ipv6 unicast-routing
ipv6 nd other-config-flag
ipv6 nd managed-config-flag
ipv6 dhcp pool
ipv6 dhcp server POOL
ipv6 dhcp relay destination</code></pre>
                </div>
                <div class="micro-kit-card">
                    <h4><i class="fas fa-traffic-light"></i> 3 Pi√®ges CCNA</h4>
                    <ol>
                        <li>DHCPv6 Stateless = A=1 ET O=1</li>
                        <li>Ports UDP: Client 546 ‚Üê Serveur 547 (inverse DHCPv4)</li>
                        <li>A=1,M=1 peut cr√©er 2 adresses sur Windows</li>
                    </ol>
                </div>
                <div class="micro-kit-card">
                    <h4><i class="fas fa-tools"></i> D√©pannage 3 √âtapes</h4>
                    <ol>
                        <li><strong>V√©rifier</strong> m√©thode sur l'h√¥te (1 ou 2 GUA ?)</li>
                        <li><strong>Diagnostiquer</strong> flags sur le routeur</li>
                        <li><strong>Corriger</strong> pool/service DHCPv6</li>
                    </ol>
                </div>
                <div class="micro-kit-card">
                    <h4><i class="fas fa-shield-alt"></i> Risque + Mitigation</h4>
                    <p><strong>Risque :</strong> Rogue RA / Usurpation de Routeur</p>
                    <p><strong>Mitigation :</strong> <code>ipv6 nd raguard</code> et <code>ipv6 dhcp guard</code> sur ports d'acc√®s</p>
                </div>
                <div class="micro-kit-card">
                    <h4><i class="fas fa-calculator"></i> √âquation Mentale</h4>
                    <div style="text-align: center; padding: 15px; background: #e3f2fd; border-radius: 8px;">
                        <p style="font-weight: bold; color: #1a237e; margin: 0;">
                            SLAAC = Pr√©fixe RA (64 bits) + ID Interface (64 bits)
                        </p>
                    </div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="btn btn-success" onclick="window.print()">
                    <i class="fas fa-print"></i> Imprimer ce Micro-Kit
                </button>
            </div>
        </section>
    </main>

    <footer style="background: var(--color-surface); padding: 30px; text-align: center; margin-top: 50px; border-top: 3px solid var(--color-border);">
        <div class="container">
            <p style="color: var(--color-text); margin-bottom: 20px;">
                <i class="fas fa-certificate"></i> Module-Kit de Ma√Ætrise SLAAC et DHCPv6 - CCNA
                <span style="margin: 0 10px">‚Ä¢</span>
                Transcription HTML fid√®le 1:1
                <span style="margin: 0 10px">‚Ä¢</span>
                Contenu technique pr√©serv√© √† 100%
            </p>
        </div>
    </footer>

    <a href="#top" class="back-to-top" id="backToTop">
        <i class="fas fa-chevron-up"></i>
    </a>

    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>
        // Initialisation Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#e3f2fd',
                primaryBorderColor: '#17a2b8',
                primaryTextColor: '#212121',
                lineColor: '#17a2b8',
                fontFamily: 'Segoe UI, Tahoma, sans-serif'
            }
        });

        // Diagramme Mermaid principal
        const diagram = `flowchart TD
    A[H√¥te IPv6 Boot] --> B{G√©n√©re LLA<br>FE80::/10};
    B --> C[Envoie RS -> ff02::2];
    C --> D[Re√ßoit RA du Routeur];
    D --> E{D√©crypte les Flags<br>A / O / M};
    E -- A=1, O=0, M=0 --> F[SLAAC Seul];
    E -- A=1, O=1, M=0 --> G[SLAAC + DHCPv6 Stateless];
    E -- A=0, M=1 --> H[DHCPv6 Stateful];
    F --> I[G√©n√®re GUA: Pr√©fixe RA + ID Interface<br>EUI-64 ou Al√©atoire];
    G --> J[G√©n√®re GUA via SLAAC<br>+ R√©cup√®re DNS/NTP via DHCPv6];
    H --> K[Obtient TOUTE la config<br>GUA, DNS, etc. via DHCPv6];
    I & J & K --> L[Ex√©cute DAD<br>Neighbor Solicitation];
    L -- Adresse Libre --> M[Adresse Op√©rationnelle];
    L -- Conflit D√©tect√© --> N[G√©n√®re un nouvel ID Interface];`;

        // Injecter le diagramme apr√®s le chargement
        document.addEventListener('DOMContentLoaded', function() {
            const container = document.getElementById('mermaid-diagram');
            if (container) {
                container.innerHTML = diagram;
                mermaid.init(undefined, container);
            }

            // Initialiser les tabs
            initTabs();
            
            // Initialiser le bouton back to top
            initBackToTop();
            
            // Initialiser les √©v√©nements des quiz
            initQuiz();
        });

        // Syst√®me de tabs
        function initTabs() {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-tab');
                    
                    // Retirer active de tous
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabPanes.forEach(pane => pane.classList.remove('active'));
                    
                    // Ajouter active au tab cliqu√©
                    button.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        }

        // Syst√®me de quiz
        function initQuiz() {
            window.checkQuizAnswer = function(element, result) {
                const allOptions = element.parentElement.querySelectorAll('.quiz-option');
                allOptions.forEach(opt => {
                    opt.classList.remove('correct', 'incorrect');
                });
                element.classList.add(result);
            };
            
            window.showQuizExplanation = function(num) {
                const feedback = document.getElementById('feedback' + num);
                feedback.classList.toggle('show');
            };
        }

        // Collapsible sections
        window.toggleCollapse = function(id) {
            const content = document.getElementById(id);
            const header = content.previousElementSibling;
            const icon = header.querySelector('i');
            
            content.classList.toggle('show');
            if (content.classList.contains('show')) {
                icon.className = 'fas fa-chevron-up';
            } else {
                icon.className = 'fas fa-chevron-down';
            }
        };

        // Afficher/masquer les r√©ponses
        window.toggleAnswer = function(id) {
            document.getElementById(id).classList.toggle('show');
        };

        // Bouton back to top
        function initBackToTop() {
            const backToTopBtn = document.getElementById('backToTop');
            
            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopBtn.classList.add('visible');
                } else {
                    backToTopBtn.classList.remove('visible');
                }
            });
            
            backToTopBtn.addEventListener('click', (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        }
    </script>
</body>
</html>