<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kit de Ma√Ætrise : D√©pannage des routes statiques et par d√©faut</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>
    <style>
        /* Variables de couleur pour le mode light */
        :root {
            /* Couleurs primaires */
            --primary-blue: #1e88e5;
            --primary-green: #43a047;
            --primary-orange: #fb8c00;
            --primary-purple: #8e24aa;
            --primary-red: #e53935;
            --primary-gray: #757575;
            
            /* Couleurs de fond */
            --bg-light: #ffffff;
            --bg-section: #f8f9fa;
            --bg-code: #f5f5f5;
            --bg-emphasis: #fff8e1;
            
            /* Couleurs de texte */
            --text-primary: #212121;
            --text-secondary: #616161;
            --text-code: #c7254e;
            
            /* Bordures */
            --border-light: #e0e0e0;
            --border-medium: #bdbdbd;
            
            /* Ombres */
            --shadow-light: 0 2px 4px rgba(0,0,0,0.1);
            --shadow-medium: 0 4px 8px rgba(0,0,0,0.15);
            
            /* Espacement */
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
        }
        
        /* Reset et base */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--bg-light);
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-sm);
        }
        
        /* Typographie */
        h1, h2, h3, h4 {
            color: var(--primary-blue);
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }
        
        h1 {
            font-size: 2.2rem;
            border-bottom: 3px solid var(--primary-blue);
            padding-bottom: var(--spacing-sm);
            margin-top: 0;
        }
        
        h2 {
            font-size: 1.8rem;
            border-left: 4px solid var(--primary-green);
            padding-left: var(--spacing-sm);
        }
        
        h3 {
            font-size: 1.5rem;
            color: var(--primary-orange);
        }
        
        h4 {
            font-size: 1.2rem;
            color: var(--primary-purple);
        }
        
        p {
            margin-bottom: var(--spacing-sm);
        }
        
        /* Sections avec couleurs */
        .section-analogy {
            background-color: rgba(142, 36, 170, 0.05);
            border-left: 4px solid var(--primary-purple);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 0 8px 8px 0;
        }
        
        .section-mental-model {
            background-color: rgba(67, 160, 71, 0.05);
            border: 1px solid var(--primary-green);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-core {
            background-color: rgba(229, 57, 53, 0.05);
            border: 2px solid var(--primary-red);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-security {
            background-color: rgba(251, 140, 0, 0.05);
            border-left: 4px solid var(--primary-orange);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 0 8px 8px 0;
        }
        
        .section-exam {
            background-color: rgba(30, 136, 229, 0.05);
            border: 1px solid var(--primary-blue);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-lab {
            background-color: rgba(117, 117, 117, 0.05);
            border: 1px solid var(--primary-gray);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-troubleshooting {
            background-color: rgba(229, 57, 53, 0.08);
            border: 2px dashed var(--primary-red);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-connections {
            background-color: rgba(142, 36, 170, 0.08);
            border: 1px solid var(--primary-purple);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-validation {
            background-color: rgba(67, 160, 71, 0.08);
            border: 1px solid var(--primary-green);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        .section-microkit {
            background-color: rgba(30, 136, 229, 0.08);
            border: 2px solid var(--primary-blue);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            border-radius: 8px;
        }
        
        /* Code blocks */
        pre, code {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-code);
            border-radius: 4px;
        }
        
        pre {
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            overflow-x: auto;
            border-left: 4px solid var(--primary-gray);
        }
        
        code {
            padding: 0.2em 0.4em;
            font-size: 0.9em;
            color: var(--text-code);
        }
        
        /* Blocs de code avec coloration syntaxique */
        .cisco-command {
            border-left: 4px solid var(--primary-blue);
            background-color: rgba(30, 136, 229, 0.1);
        }
        
        .python-code {
            border-left: 4px solid var(--primary-green);
            background-color: rgba(67, 160, 71, 0.1);
        }
        
        .mermaid-diagram {
            background-color: white;
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            border: 1px solid var(--border-light);
            overflow: auto;
        }
        
        /* √âl√©ments interactifs */
        .interactive-quiz {
            background-color: var(--bg-section);
            border-radius: 8px;
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            box-shadow: var(--shadow-light);
        }
        
        .quiz-question {
            margin-bottom: var(--spacing-md);
        }
        
        .quiz-options {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-xs);
        }
        
        .quiz-option {
            padding: var(--spacing-sm);
            background-color: white;
            border: 1px solid var(--border-light);
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .quiz-option:hover {
            background-color: rgba(30, 136, 229, 0.1);
            border-color: var(--primary-blue);
        }
        
        .quiz-option.correct {
            background-color: rgba(67, 160, 71, 0.2);
            border-color: var(--primary-green);
        }
        
        .quiz-option.incorrect {
            background-color: rgba(229, 57, 53, 0.2);
            border-color: var(--primary-red);
        }
        
        .quiz-feedback {
            padding: var(--spacing-sm);
            margin-top: var(--spacing-sm);
            border-radius: 4px;
            display: none;
        }
        
        .feedback-correct {
            background-color: rgba(67, 160, 71, 0.2);
            border-left: 4px solid var(--primary-green);
        }
        
        .feedback-incorrect {
            background-color: rgba(229, 57, 53, 0.2);
            border-left: 4px solid var(--primary-red);
        }
        
        /* Simulateur CLI */
        .cli-simulator {
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', Courier, monospace;
            padding: var(--spacing-md);
            border-radius: 8px;
            margin: var(--spacing-md) 0;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .cli-prompt {
            color: #0af;
            font-weight: bold;
        }
        
        .cli-output {
            margin-bottom: var(--spacing-xs);
            white-space: pre-wrap;
        }
        
        .cli-input {
            display: flex;
            align-items: center;
            margin-top: var(--spacing-sm);
        }
        
        .cli-cursor {
            background-color: #0f0;
            width: 8px;
            height: 16px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
        
        /* Navigation */
        .nav-container {
            position: sticky;
            top: 0;
            background-color: var(--bg-light);
            padding: var(--spacing-sm) 0;
            border-bottom: 2px solid var(--border-light);
            z-index: 100;
            margin-bottom: var(--spacing-md);
        }
        
        .nav-menu {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            justify-content: center;
        }
        
        .nav-item {
            padding: var(--spacing-xs) var(--spacing-sm);
            background-color: var(--bg-section);
            border-radius: 20px;
            text-decoration: none;
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.2s;
            border: 1px solid transparent;
        }
        
        .nav-item:hover {
            background-color: var(--primary-blue);
            color: white;
            transform: translateY(-2px);
            box-shadow: var(--shadow-light);
        }
        
        /* Liste et √©l√©ments */
        ul, ol {
            margin-left: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }
        
        li {
            margin-bottom: var(--spacing-xs);
        }
        
        .law-item {
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            background-color: white;
            border-left: 4px solid var(--primary-red);
            border-radius: 0 4px 4px 0;
        }
        
        .command-item {
            padding: var(--spacing-sm);
            margin-bottom: var(--spacing-xs);
            background-color: white;
            border-left: 4px solid var(--primary-blue);
            border-radius: 0 4px 4px 0;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            body {
                padding: var(--spacing-xs);
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            h2 {
                font-size: 1.5rem;
            }
            
            .nav-menu {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-item {
                width: 100%;
                text-align: center;
            }
            
            pre {
                font-size: 0.9rem;
                padding: var(--spacing-sm);
            }
        }
        
        /* Utilitaires */
        .color-red { color: var(--primary-red); }
        .color-orange { color: var(--primary-orange); }
        .color-green { color: var(--primary-green); }
        .color-blue { color: var(--primary-blue); }
        .color-purple { color: var(--primary-purple); }
        .color-gray { color: var(--primary-gray); }
        
        .icon {
            margin-right: 0.5rem;
        }
        
        .badge {
            display: inline-block;
            padding: 0.2em 0.6em;
            border-radius: 12px;
            font-size: 0.8em;
            font-weight: bold;
            margin-right: 0.5rem;
        }
        
        .badge-red { background-color: var(--primary-red); color: white; }
        .badge-orange { background-color: var(--primary-orange); color: white; }
        .badge-green { background-color: var(--primary-green); color: white; }
        .badge-blue { background-color: var(--primary-blue); color: white; }
        .badge-purple { background-color: var(--primary-purple); color: white; }
        
        .toggle-section {
            cursor: pointer;
            user-select: none;
        }
        
        .toggle-content {
            display: none;
            padding-top: var(--spacing-sm);
        }
        
        .toggle-icon {
            transition: transform 0.3s;
        }
        
        .toggle-section.active .toggle-icon {
            transform: rotate(90deg);
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-network-wired icon color-blue"></i>Module-Kit de Ma√Ætrise : D√©pannage des routes statiques et par d√©faut</h1>
        <p class="color-gray"><i class="fas fa-info-circle icon"></i>Version HTML Interactive - Transcription fid√®le 1:1 du Module-Kit de Ma√Ætrise</p>
    </header>
    
    <div class="nav-container">
        <div class="nav-menu">
            <a href="#analogie" class="nav-item"><i class="fas fa-brain icon"></i>Analogies</a>
            <a href="#modele-mental" class="nav-item"><i class="fas fa-project-diagram icon"></i>Mod√®le Mental</a>
            <a href="#noyau-dur" class="nav-item"><i class="fas fa-gem icon"></i>Noyau Dur</a>
            <a href="#securite" class="nav-item"><i class="fas fa-shield-alt icon"></i>S√©curit√©</a>
            <a href="#examen" class="nav-item"><i class="fas fa-graduation-cap icon"></i>Examen CCNA</a>
            <a href="#lab" class="nav-item"><i class="fas fa-flask icon"></i>Lab Complet</a>
            <a href="#depannage" class="nav-item"><i class="fas fa-tools icon"></i>Sc√©nario D√©pannage</a>
            <a href="#quiz" class="nav-item"><i class="fas fa-question-circle icon"></i>Quiz Interactif</a>
            <a href="#microkit" class="nav-item"><i class="fas fa-file-alt icon"></i>Micro-Kit</a>
        </div>
    </div>
    
    <main>
        <section id="analogie" class="section-analogy">
            <h2><i class="fas fa-map-signs icon color-purple"></i>üìç ANALOGIE SYST√âMIQUE</h2>
            <p><strong>Th√®me_central:</strong> "La tra√ßabilit√© compl√®te du colis r√©seau"</p>
            <p><strong>M√©taphore:</strong> "Un r√©seau est un syst√®me logistique o√π chaque routeur est un centre de tri qui doit avoir une fiche de routage pr√©cise pour chaque destination. Une route statique est comme une instruction manuscrite permanente, une route par d√©faut est comme 'envoyer toutes les exp√©ditions inconnues vers le hub central'."</p>
            
            <div class="toggle-section" onclick="toggleSection('analogie-elements')">
                <h4><i class="fas fa-caret-right toggle-icon icon"></i>√âl√©ments_cl√©s:</h4>
            </div>
            <div id="analogie-elements" class="toggle-content">
                <ul>
                    <li><strong>√âl√©ment_1:</strong> "Le plan de tri (table de routage) doit √™tre complet et sans erreur de transcription"</li>
                    <li><strong>√âl√©ment_2:</strong> "Les quais de chargement (interfaces) doivent √™tre op√©rationnels et connect√©s"</li>
                    <li><strong>√âl√©ment_3:</strong> "Les instructions de r√©exp√©dition (routes) doivent pointer vers le bon prochain centre de tri (next-hop)"</li>
                    <li><strong>√âl√©ment_4:</strong> "Le syst√®me de suivi (ICMP, traceroute) permet de localiser o√π le colis est bloqu√©"</li>
                </ul>
            </div>
            
            <p><strong>Risque_analogique:</strong> "Un colis mal √©tiquet√© qui tourne en boucle entre les centres de tri jusqu'√† expiration (TTL), ou pire, qui est envoy√© dans une impasse r√©seau (black hole)"</p>
        </section>
        
        <section id="modele-mental" class="section-mental-model">
            <h2><i class="fas fa-mind-share icon color-green"></i>üß† MOD√àLE MENTAL</h2>
            <div class="mermaid-diagram">
                <div id="mermaid-diagram-1"></div>
            </div>
        </section>
        
        <section id="noyau-dur" class="section-core">
            <h2><i class="fas fa-bolt icon color-red"></i>‚ö° NOYAU DUR (Les lois Immuables)</h2>
            
            <div class="law-item">
                <h4><span class="badge badge-red">!</span> Loi #1 : Une route statique n√©cessite UN chemin de sortie valide ET UNE r√©solution r√©cursive r√©ussie.</h4>
                <p><strong>Preuve :</strong> La commande <code>show ip route [r√©seau]</code> affiche deux choses : la route elle-m√™me (S) et la route vers son next-hop (g√©n√©ralement une route connect√©e C). Si la route vers le next-hop est manquante, la route statique est invalide et marqu√©e avec <code>%Network not in table</code>.</p>
            </div>
            
            <div class="law-item">
                <h4><span class="badge badge-red">!</span> Loi #2 : La table de routage est consult√©e DE HAUT EN BAS selon l'ordre administratif.</h4>
                <p><strong>Preuve :</strong> L'AD (Administrative Distance) d√©termine la priorit√© : Connect√© (0) > Statique (1) > EIGRP (90) > OSPF (110) > RIP (120). Une route statique avec AD 1 sera toujours pr√©f√©r√©e √† une route OSPF pour le m√™me pr√©fixe.</p>
            </div>
            
            <div class="law-item">
                <h4><span class="badge badge-red">!</span> Loi #3 : Le principe de la correspondance de masque la plus longue (Longest Prefix Match) gouverne toute d√©cision de transfert.</h4>
                <p><strong>Preuve :</strong> Un paquet destin√© √† 192.168.1.1 sera rout√© via une route vers 192.168.1.0/24 (masque /24) plut√¥t que vers 192.168.0.0/16 (masque /16), m√™me si cette derni√®re a une meilleure AD.</p>
            </div>
            
            <div class="law-item">
                <h4><span class="badge badge-red">!</span> Loi #4 : Une route par d√©faut (0.0.0.0/0) est un pi√®ge √† tout (catch-all) qui NE DOIT √™tre utilis√©e qu'en dernier recours.</h4>
                <p><strong>Preuve :</strong> Une mauvaise route par d√©faut peut cr√©er des boucles de routage ou envoyer du trafic vers un "trou noir". Elle doit pointer vers un routeur qui a une connaissance compl√®te du r√©seau (ex : routeur frontalier, ISP).</p>
            </div>
            
            <div class="law-item">
                <h4><span class="badge badge-red">!</span> Loi #5 : IPv6 suit les m√™mes principes mais avec des commandes et des subtilit√©s diff√©rentes (pas de broadcast, ND au lieu d'ARP).</h4>
                <p><strong>Preuve :</strong> <code>show ipv6 route</code> affiche des codes similaires (C, S, S::/0), mais le m√©canisme de r√©solution utilise NDP (Neighbor Discovery Protocol) au lieu d'ARP.</p>
            </div>
        </section>
        
        <section id="securite" class="section-security">
            <h2><i class="fas fa-lock icon color-orange"></i>## üîê PROFONDEUR S√âCURIT√â & M√âTIER</h2>
            
            <h3><i class="fas fa-exclamation-triangle icon color-red"></i># üö® RISQUE PRINCIPAL</h3>
            <p><strong>Risque Principal :</strong> Configuration de routes statiques incorrectes cr√©ant des trous noirs (black holes) ou des boucles de routage.</p>
            
            <div class="toggle-section" onclick="toggleSection('attaque-details')">
                <h4><i class="fas fa-caret-right toggle-icon icon"></i>D√©tails de l'attaque :</h4>
            </div>
            <div id="attaque-details" class="toggle-content">
                <p><strong>‚Üí Attaque Type :</strong> Bien que moins courante, une route statique malveillante peut √™tre inject√©e pour du d√©tournement de trafic (traffic hijacking) ou de l'√©coute (man-in-the-middle).</p>
                
                <p><strong>‚Üí D√©tection :</strong></p>
                <pre><code>show ip route | include S
show running-config | section ip route
show ip cef [destination] detail  <!-- V√©rification du plan de transfert mat√©riel --></code></pre>
                
                <p><strong>‚Üí Mitigation Imm√©diate :</strong></p>
                <pre class="cisco-command"><code>! Supprimer la route statique incorrecte
no ip route 192.168.1.0 255.255.255.0 10.1.1.1
! R√©tablir la route correcte
ip route 192.168.1.0 255.255.255.0 10.1.1.2  <!-- Notez le next-hop diff√©rent -->
! Ajouter une description pour l'audit
ip route 192.168.1.0 255.255.255.0 10.1.1.2 name "Route vers serveurs RH"</code></pre>
            </div>
            
            <p><strong>‚Üí Int√©gration Entreprise :</strong> Dans un pipeline CI/CD r√©seau (Ansible, Git), toutes les routes statiques DOIVENT √™tre document√©es avec :</p>
            <ol>
                <li><strong>Justification m√©tier</strong> dans le playbook Ansible</li>
                <li><strong>Ticket de changement</strong> associ√© dans le syst√®me ITSM</li>
                <li><strong>Monitoring sp√©cifique</strong> dans le SIEM pour d√©tecter les changements non autoris√©s (<code>%SYS-5-CONFIG_I</code>)</li>
            </ol>
        </section>
        
        <section id="examen" class="section-exam">
            <h2><i class="fas fa-book-reader icon color-blue"></i>üìö PROFONDEUR EXAMEN CCNA</h2>
            
            <div class="interactive-quiz">
                <div class="quiz-question">
                    <h4><span class="badge badge-orange">?</span> Question Type CCNA :</h4>
                    <p><em>Vous avez configur√© <code>ip route 10.0.0.0 255.0.0.0 192.168.1.1</code> sur R1. La commande <code>show ip route</code> affiche la route comme <code>S* 10.0.0.0/8 [1/0] via 192.168.1.1</code>. Cependant, le ping vers 10.1.1.1 √©choue. Quelle est la cause la plus probable?</em></p>
                    
                    <div class="quiz-options">
                        <div class="quiz-option" onclick="checkAnswer(this, 'A')">A) L'interface vers 192.168.1.1 est down.</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'B')">B) La route vers 192.168.1.1 est manquante.</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'C')">C) L'ACL bloque le trafic ICMP.</div>
                        <div class="quiz-option" onclick="checkAnswer(this, 'D')">D) La route est une route par d√©faut.</div>
                    </div>
                    
                    <div id="quiz-feedback-1" class="quiz-feedback">
                        <!-- Le feedback sera ins√©r√© par JavaScript -->
                    </div>
                </div>
            </div>
            
            <div class="toggle-section" onclick="toggleSection('pieges-examen')">
                <h4><span class="badge badge-orange">?</span> Pi√®ges Fr√©quents :</h4>
            </div>
            <div id="pieges-examen" class="toggle-content">
                <div class="law-item">
                    <h4>D√©tail Oubli√© #1 :</h4>
                    <p>La diff√©rence CRUCIALE entre <code>ip route 0.0.0.0 0.0.0.0 [next-hop]</code> et <code>ip route 0.0.0.0 0.0.0.0 [interface]</code>.</p>
                    <ul>
                        <li><strong>Avec next-hop :</strong> Le routeur effectue une recherche ARP/routage r√©cursive vers cette adresse IP.</li>
                        <li><strong>Avec interface :</strong> Le routeur envoie directement les paquets sur cette interface, avec l'adresse MAC de destination correspondant √† l'adresse IP de destination du paquet (n√©cessite un lien de broadcast comme Ethernet). Sur un lien s√©rie point-√†-point, cela fonctionne car il n'y a qu'un seul voisin.</li>
                    </ul>
                </div>
                
                <div class="law-item">
                    <h4>Pi√®ge Fr√©quent #2 :</h4>
                    <p><code>ip route 192.168.1.0 255.255.255.0 Serial0/1/0</code> ne fonctionne que si l'interface est <strong>point-√†-point</strong>. Sur une interface Ethernet multi-acc√®s, vous DEVEZ sp√©cifier un next-hop, sinon le routeur ne saura pas quelle adresse MAC utiliser.</p>
                </div>
            </div>
        </section>
        
        <section id="lab" class="section-lab">
            <h2><i class="fas fa-cogs icon color-gray"></i>‚öôÔ∏è LAB COMPLET : DE LA CONFIG √Ä L'AUTOMATISATION</h2>
            
            <div class="toggle-section" onclick="toggleSection('niveau1')">
                <h3><i class="fas fa-caret-right toggle-icon icon"></i>### Niveau 1 (CCNA) : Configuration Fondamentale</h3>
            </div>
            <div id="niveau1" class="toggle-content">
                <pre class="cisco-command"><code>! Configuration d'une route statique simple
R1(config)# ip route 192.168.2.0 255.255.255.0 10.1.1.2
! Objectif : Router tout le trafic vers le r√©seau 192.168.2.0/24 via le voisin 10.1.1.2</code></pre>
                
                <pre class="cisco-command"><code>! V√©rification
R1# show ip route 192.168.2.0
! Sortie attendue :
! S    192.168.2.0/24 [1/0] via 10.1.1.2
! La route appara√Æt avec le code 'S' (Static) et une distance administrative de 1.</code></pre>
                
                <pre class="cisco-command"><code>! Configuration d'une route par d√©faut pointant vers l'ISP
R1(config)# ip route 0.0.0.0 0.0.0.0 203.0.113.1
! V√©rification
R1# show ip route | begin Gateway
! Sortie attendue : S*    0.0.0.0/0 [1/0] via 203.0.113.1
! Le '*' confirme qu'il s'agit de la route par d√©faut candidate.</code></pre>
            </div>
            
            <div class="toggle-section" onclick="toggleSection('niveau2')">
                <h3><i class="fas fa-caret-right toggle-icon icon"></i>### Niveau 2 (Production S√©curis√©e) : Hardening</h3>
            </div>
            <div id="niveau2" class="toggle-content">
                <pre class="cisco-command"><code>! 1. REMPLACER les routes par interface par des routes par next-hop
! Ancienne (risqu√©e sur Ethernet) :
! ip route 192.168.1.0 255.255.255.0 GigabitEthernet0/1
! Nouvelle (s√©curis√©e) :
R1(config)# ip route 192.168.1.0 255.255.255.0 172.16.1.2
! Risque si omis : Sur un segment Ethernet, sans next-hop, le routeur tente une ARP pour chaque IP de destination, ce qui √©choue si l'h√¥te n'est pas sur le m√™me segment.</code></pre>
                
                <pre class="cisco-command"><code>! 2. AJOUTER des routes de secours (Floating Static) avec une AD plus √©lev√©e
R1(config)# ip route 0.0.0.0 0.0.0.0 192.0.2.1  <!-- Lien primaire -->
R1(config)# ip route 0.0.0.0 0.0.0.0 198.51.100.1 250 <!-- Lien backup, AD=250 -->
! Justification best-practice : Fournit une redondance si le lien primaire tombe. La route avec AD 250 n'appara√Æt dans la table que si la route avec AD 1 dispara√Æt.</code></pre>
            </div>
            
            <div class="toggle-section" onclick="toggleSection('niveau3')">
                <h3><i class="fas fa-caret-right toggle-icon icon"></i>### Niveau 3 (Expert/Automatisation) : Script & Scale</h3>
            </div>
            <div id="niveau3" class="toggle-content">
                <pre class="python-code"><code># Script Python (Netmiko) pour auditer et corriger les routes statiques
from netmiko import ConnectHandler

device = {
    'device_type': 'cisco_ios',
    'host': 'router1.company.com',
    'username': 'admin',
    'password': 'secret',
}

correct_routes = [
    'ip route 10.10.0.0 255.255.0.0 192.168.1.2',
    'ip route 0.0.0.0 0.0.0.0 203.0.113.1',
]

with ConnectHandler(**device) as net_connect:
    # R√©cup√©rer la config actuelle
    running_config = net_connect.send_command('show run | section ip route')
    
    # Analyser et comparer
    current_routes = [line.strip() for line in running_config.split('\n') if 'ip route' in line]
    
    # Appliquer les corrections si n√©cessaire
    for correct_route in correct_routes:
        if correct_route not in current_routes:
            net_connect.send_config_set([correct_route])
            print(f"Route appliqu√©e : {correct_route}")</code></pre>
                <p><strong>‚Üí Avantage :</strong> Audit et correction automatis√©s de la configuration de routage sur des centaines de routeurs, garantissant la conformit√© et √©vitant les erreurs humaines.</p>
            </div>
        </section>
        
        <section id="depannage" class="section-troubleshooting">
            <h2><i class="fas fa-exclamation-circle icon color-red"></i>üö® SC√âNARIO DE D√âPANNAGE AVANC√â</h2>
            
            <p><strong>Sympt√¥me Complexe :</strong> Les utilisateurs du r√©seau 172.16.10.0/24 ne peuvent pas joindre le serveur 192.168.100.5, mais peuvent acc√©der √† d'autres destinations sur Internet. Le ping depuis le routeur frontalier (R1) vers 192.168.100.5 fonctionne.</p>
            
            <h3>Processus de Diagnostic (Arbre D√©cisionnel) :</h3>
            <ol>
                <li><strong>V√©rifier la table de routage sur le routeur de l'utilisateur (R-User) :</strong>
                    <pre><code>R-User# show ip route 192.168.100.5</code></pre>
                    <p><em>Si r√©sultat : <code>% Network not in table</code> ‚Üí Aller √† 2.</em><br>
                    <em>Si r√©sultat : Affiche une route ‚Üí Aller √† 4.</em></p>
                </li>
                
                <li><strong>R-User n'a pas de route sp√©cifique.</strong> V√©rifier la route par d√©faut :
                    <pre><code>R-User# show ip route | include 0.0.0.0</code></pre>
                    <p><em>Elle devrait pointer vers R1. Si ce n'est pas le cas, la corriger.</em></p>
                </li>
                
                <li><strong>Sur R1, v√©rifier la route vers 192.168.100.0/24 :</strong>
                    <pre><code>R1# show ip route 192.168.100.0</code></pre>
                    <p><em>La route doit exister (statique ou dynamique). Si c'est une statique, v√©rifier le next-hop.</em></p>
                </li>
                
                <li><strong>Si la route existe sur R1, v√©rifier le forwarding CEF (plus rapide que la table de routage) :</strong>
                    <pre><code>R1# show ip cef 192.168.100.5</code></pre>
                    <p><em>La sortie doit montrer une interface de sortie et un next-hop valides. Si l'entr√©e est <code>drop</code> ou <code>recurse</code>, il y a un probl√®me de r√©solution.</em></p>
                </li>
                
                <li><strong>Utiliser <code>traceroute</code> depuis R-User pour voir o√π le trafic s'arr√™te :</strong>
                    <pre><code>R-User# traceroute 192.168.100.5 source 172.16.10.1</code></pre>
                    <p><em>Le dernier saut (hop) r√©pondant indique le dernier point de fonctionnement.</em></p>
                </li>
            </ol>
            
            <h3>Root Cause Probable :</h3>
            <p><strong>Route statique r√©cursive invalide.</strong> La route <code>ip route 192.168.100.0 255.255.255.0 10.0.0.2</code> est configur√©e sur R1, mais la route vers le next-hop <code>10.0.0.2</code> est absente (peut-√™tre due √† une interface down ou √† une erreur de masque).</p>
            
            <h3>Fix et Rollback :</h3>
            <pre class="cisco-command"><code>! Fix - R1
R1# configure terminal
! Option A : R√©tablir la connectivit√© vers le next-hop
R1(config)# interface GigabitEthernet0/0
R1(config-if)# no shutdown
! Option B : Red√©finir la route statique avec un next-hop joignable
R1(config)# no ip route 192.168.100.0 255.255.255.0 10.0.0.2
R1(config)# ip route 192.168.100.0 255.255.255.0 10.0.0.3
! V√©rification du fix
R1# show ip route 192.168.100.0
R1# ping 192.168.100.5 source g0/0
! Rollback au cas o√π
R1# configure terminal
R1(config)# no ip route 192.168.100.0 255.255.255.0 10.0.0.3
R1(config)# ip route 192.168.100.0 255.255.255.0 10.0.0.2</code></pre>
        </section>
        
        <section id="quiz" class="section-validation">
            <h2><i class="fas fa-question-circle icon color-green"></i>‚ùì VALIDATION PAR EXERCICE MENTAL</h2>
            
            <div class="interactive-quiz">
                <div class="quiz-question">
                    <h4>Question de Concept :</h4>
                    <p><em>En utilisant l'analogie du centre de tri, d√©crivez ce qui se passe lorsqu'un routeur re√ßoit un paquet pour un r√©seau inconnu, mais qu'il a une route par d√©faut et une route statique plus sp√©cifique mais incorrecte.</em></p>
                    
                    <div class="toggle-section" onclick="toggleSection('reponse-concept')">
                        <p class="color-blue"><i class="fas fa-lightbulb icon"></i>Voir la r√©ponse</p>
                    </div>
                    <div id="reponse-concept" class="toggle-content">
                        <div class="feedback-correct">
                            <p>Le "colis" pour une destination inconnue est d'abord compar√© √† toutes les instructions sp√©cifiques. Si une instruction correspond partiellement (mais est incorrecte), le colis est envoy√© vers le mauvais quai. La route par d√©faut (hub central) n'est utilis√©e que si AUCUNE autre instruction ne correspond.</p>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h4>Question de Pi√®ge :</h4>
                    <p><em>Quelle est la diff√©rence de comportement entre <code>ip route 10.0.0.0 255.0.0.0 Null0</code> et ne pas avoir de route du tout pour 10.0.0.0/8 ?</em></p>
                    
                    <div class="toggle-section" onclick="toggleSection('reponse-piege')">
                        <p class="color-blue"><i class="fas fa-lightbulb icon"></i>Voir la r√©ponse</p>
                    </div>
                    <div id="reponse-piege" class="toggle-content">
                        <div class="feedback-correct">
                            <p>Avec <code>Null0</code>, le routeur accepte activement le paquet et le jette (black hole), g√©n√©rant √©ventuellement une ICMP unreachable. Sans route, le routeur rejette simplement le paquet et peut renvoyer un "host unreachable" √† la source. <code>Null0</code> est parfois utilis√© pour r√©sumer des routes et √©viter les boucles.</p>
                        </div>
                    </div>
                </div>
                
                <div class="quiz-question">
                    <h4>Question de Crise :</h4>
                    <p><em>"Il est 3h du matin, tout le trafic Internet de l'entreprise passe par un lien MPLS de secours lent, bien que le lien primaire semble op√©rationnel. Votre premier reflexe est que la route par d√©faut a bascul√©, mais <code>show ip route</code> montre toujours la m√™me route par d√©faut vers le lien primaire. Quelle est votre premi√®re commande, votre premi√®re hypoth√®se, et votre plan d'action en 3 √©tapes ?"</em></p>
                    
                    <div class="toggle-section" onclick="toggleSection('reponse-crise')">
                        <p class="color-blue"><i class="fas fa-lightbulb icon"></i>Voir la r√©ponse</p>
                    </div>
                    <div id="reponse-crise" class="toggle-content">
                        <div class="feedback-correct">
                            <ol>
                                <li><strong>Premi√®re commande :</strong> <code>show ip cef 0.0.0.0/0 detail</code> pour v√©rifier le plan de transfert CEF, qui peut √™tre diff√©rent de la table de routage logicielle.</li>
                                <li><strong>Premi√®re hypoth√®se :</strong> Probl√®me de r√©solution ARP/NDP vers le next-hop de la route par d√©faut primaire, for√ßant CEF √† utiliser la route de secours (floating static).</li>
                                <li><strong>Plan en 3 √©tapes :</strong>
                                    <ul>
                                        <li><code>clear arp-cache</code> ou <code>clear ipv6 neighbors</code> sur l'interface vers le lien primaire.</li>
                                        <li>V√©rifier la connectivit√© L2 vers le next-hop (<code>show cdp neighbors</code>, <code>show interface status</code>).</li>
                                        <li>Si le probl√®me persiste, forcer manuellement le trafic vers le primaire en augmentant temporairement l'AD de la route de secours.</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="cli-simulator">
                <h4><i class="fas fa-terminal icon"></i>Simulateur CLI Basique</h4>
                <div id="cli-output">
                    <div class="cli-output">Bienvenue dans le simulateur CLI. Tapez 'help' pour voir les commandes disponibles.</div>
                </div>
                <div class="cli-input">
                    <span class="cli-prompt">R1# </span>
                    <input type="text" id="cli-input" style="flex-grow: 1; background: transparent; border: none; color: #0f0; font-family: 'Courier New'; outline: none;" placeholder="Tapez une commande...">
                    <div class="cli-cursor"></div>
                </div>
            </div>
        </section>
        
        <section id="microkit" class="section-microkit">
            <h2><i class="fas fa-puzzle-piece icon color-blue"></i>üß© MICRO-KIT ESSENTIEL (SYNTH√àSE 1 PAGE A4)</h2>
            
            <div class="toggle-section" onclick="toggleSection('microkit-content')">
                <h3><i class="fas fa-caret-right toggle-icon icon"></i>Contenu du Micro-Kit</h3>
            </div>
            <div id="microkit-content" class="toggle-content">
                <h4>üîπ Les 5 Lois Immuables (version courte)</h4>
                <ol>
                    <li><strong>Statique = Route + Next-hop joignable</strong> (Sinon, elle est invalide).</li>
                    <li><strong>La table se lit du plus sp√©cifique au plus g√©n√©ral</strong> (Longest Prefix Match).</li>
                    <li><strong>La distance administrative (AD) d√©partage les sources</strong> (0=Connect√©, 1=Statique, etc.).</li>
                    <li><strong>La route par d√©faut (0/0) est un pi√®ge √† tout, √† manier avec pr√©caution.</strong></li>
                    <li><strong>IPv6 = m√™mes r√®gles, autres commandes</strong> (<code>ipv6 route</code>, <code>show ipv6 route</code>).</li>
                </ol>
                
                <h4>üîπ Mini-mod√®le mental</h4>
                <div class="mermaid-diagram">
                    <div id="mermaid-diagram-2"></div>
                </div>
                
                <h4>üîπ Les 6 commandes CLI incontournables</h4>
                <div class="command-item">
                    <code>show ip route [r√©seau]</code> ‚Üí <strong>V√©rifie l'existence et les d√©tails d'une route.</strong>
                </div>
                <div class="command-item">
                    <code>show ip route static</code> ‚Üí <strong>Liste uniquement les routes statiques.</strong>
                </div>
                <div class="command-item">
                    <code>show ip cef [r√©seau]</code> ‚Üí <strong>V√©rifie le chemin de transfert mat√©riel (CEF).</strong>
                </div>
                <div class="command-item">
                    <code>traceroute [destination] source [interface]</code> ‚Üí <strong>Trace le chemin emprunt√©.</strong>
                </div>
                <div class="command-item">
                    <code>ping</code> ‚Üí <strong>Test de connectivit√© de base (couche 3).</strong>
                </div>
                <div class="command-item">
                    <code>show ip interface brief</code> ‚Üí <strong>√âtat "Up/Up" des interfaces.</strong>
                </div>
                
                <h4>üîπ Les 3 pi√®ges CCNA les plus fr√©quents</h4>
                <ol>
                    <li><strong>Confondre <code>ip route ... [interface]</code> et <code>ip route ... [next-hop]</code></strong> sur Ethernet.</li>
                    <li><strong>Oublier que la route statique a besoin d'une route vers son next-hop</strong> (r√©cursivit√©).</li>
                    <li><strong>Penser qu'une route par d√©faut est prioritaire</strong> (elle a la priorit√© la PLUS FAIBLE en termes de LPM).</li>
                </ol>
                
                <h4>üîπ Un sc√©nario de d√©pannage r√©sum√© en 3 √©tapes</h4>
                <ol>
                    <li><strong>De la source, <code>ping</code> la destination.</strong> Si √ßa √©choue...</li>
                    <li><strong>Sur le routeur local, <code>show ip route [destination]</code>.</strong> Si manquant ou incorrect...</li>
                    <li><strong><code>traceroute</code> pour voir o√π √ßa bloque, puis v√©rifiez la route/interface √† ce saut.</strong></li>
                </ol>
                
                <h4>üîπ 1 risque s√©curit√© + la mitigation la plus cruciale</h4>
                <p><strong>Risque :</strong> Injection d'une route statique malveillante d√©tournant le trafic.</p>
                <p><strong>Mitigation :</strong> Utiliser l'authentification AAA et des listes de contr√¥le d'acc√®s (ACL) pour restreindre l'acc√®s en mode configuration (<code>enable secret</code>, <code>aaa authentication</code>).</p>
                
                <h4>üîπ 1 √©quation mentale</h4>
                <div class="section-core" style="padding: var(--spacing-sm);">
                    <p class="color-red" style="text-align: center; font-size: 1.2rem; font-weight: bold;">
                        <strong>Routage = (Destination & Masque) ‚Üí (Next-hop & Interface)</strong>
                    </p>
                    <p style="text-align: center; font-style: italic;">
                        Traduction : Pour qu'un paquet soit rout√©, la table doit faire correspondre l'adresse de destination avec un masque, et donner la paire "prochain saut / interface de sortie". Si un √©l√©ment manque, le routage √©choue.
                    </p>
                </div>
            </div>
        </section>
        
        <section class="section-connections">
            <h2><i class="fas fa-link icon color-purple"></i>üîó CONNECTIONS SYST√âMIQUES</h2>
            
            <p><strong>‚Üê Module Pr√©c√©dent (Configuration des routes statiques) :</strong> Ce module de d√©pannage suppose que vous savez configurer une route statique. Il se concentre sur le diagnostic lorsque cette configuration ne produit pas le r√©sultat attendu, souvent √† cause de probl√®mes de connectivit√© sous-jacents ou d'erreurs de conception.</p>
            
            <p><strong>‚Üí Module Suivant (Routing Dynamique - OSPF/EIGRP) :</strong> La ma√Ætrise du d√©pannage des routes statiques est le pr√©-requis ABSOLU pour aborder le routage dynamique. Pourquoi ? Parce que les protocoles dynamiques automatisent la d√©couverte et la maintenance des routes, mais les <strong>principes fondamentaux de la consultation de la table de routage, de la r√©cursivit√© et du Longest Prefix Match restent identiques</strong>. Si vous ne savez pas d√©panner une route statique manuelle, vous serez perdu face aux routes dynamiques apprises automatiquement.</p>
            
            <h4>üîÑ √âcosyst√®me R√©el :</h4>
            <ul>
                <li><strong>Avec le Firewall :</strong> Les routes statiques dirigent souvent le trafic vers un firewall (next-hop). Une erreur de route peut contourner compl√®tement les politiques de s√©curit√©.</li>
                <li><strong>Avec le Contr√¥leur SD-WAN :</strong> Dans un SD-WAN, les routes statiques peuvent √™tre utilis√©es pour forcer le trafic √† emprunter un tunnel sp√©cifique vers le cloud.</li>
                <li><strong>Avec le DNS :</strong> Un probl√®me de routage est souvent confondu avec un probl√®me de DNS. Toujours tester avec une adresse IP directement avant de bl√¢mer le DNS.</li>
            </ul>
        </section>
        
        
    </main>
    
    <footer style="text-align: center; padding: var(--spacing-md); border-top: 1px solid var(--border-light); margin-top: var(--spacing-xl); color: var(--text-secondary);">
        <p>Module-Kit de Ma√Ætrise - D√©pannage des routes statiques et par d√©faut</p>
        <p><small>Conforme aux sp√©cifications de fid√©lit√©.</small></p>
		<p>¬© 2025</p>
    </footer>
    
    <script>
        // Initialiser Mermaid
        mermaid.initialize({
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                'primaryColor': '#f8f9fa',
                'primaryTextColor': '#212121',
                'primaryBorderColor': '#e0e0e0',
                'lineColor': '#1e88e5',
                'secondaryColor': '#43a047',
                'tertiaryColor': '#fb8c00'
            },
            flowchart: {
                useMaxWidth: true,
                htmlLabels: true
            }
        });
        
        // D√©finir les diagrammes Mermaid
        const diagram1 = `flowchart TD
    A[Probl√®me de connectivit√©] --> B{V√©rifier la connectivit√© directe}
    B --> C[ping destination]
    C --> D{R√©ussite?}
    D -- Non --> E[ping passerelle locale]
    E --> F{R√©ussite?}
    F -- Non --> G[Probl√®me couche 1-2]
    F -- Oui --> H[Probl√®me de routage]
    H --> I[show ip route]
    I --> J{La route existe?}
    J -- Non --> K[Route manquante<br>Configurer route statique]
    J -- Oui --> L{La route est correcte?}
    L -- Non --> M[Route incorrecte<br>Corriger next-hop/sortie]
    L -- Oui --> N[V√©rifier r√©cursivit√©<br>show ip route next-hop]
    N --> O{Le next-hop est joignable?}
    O -- Non --> P[R√©soudre connectivit√©<br>vers next-hop]
    O -- Oui --> Q[Probl√®me r√©solu]`;
        
        const diagram2 = `flowchart LR
    A[Paquet re√ßu] --> B{Existe dans<br>la table?}
    B -- Oui --> C[Envoyer via<br>la route]
    B -- Non --> D{Route par<br>d√©faut existe?}
    D -- Oui --> C
    D -- Non --> E[DROP]`;
        
        // Fonction pour rendre les diagrammes
        function renderMermaidDiagrams() {
            try {
                // Diagramme 1
                mermaid.render('mermaid-diagram-1', diagram1, (svgCode) => {
                    document.getElementById('mermaid-diagram-1').innerHTML = svgCode;
                });
                
                // Diagramme 2
                mermaid.render('mermaid-diagram-2', diagram2, (svgCode) => {
                    document.getElementById('mermaid-diagram-2').innerHTML = svgCode;
                });
            } catch (error) {
                console.error('Erreur de rendu Mermaid:', error);
                document.getElementById('mermaid-diagram-1').innerHTML = '<p>Diagramme non disponible</p>';
                document.getElementById('mermaid-diagram-2').innerHTML = '<p>Diagramme non disponible</p>';
            }
        }
        
        // Fonction pour basculer les sections
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            const toggleBtn = section.previousElementSibling;
            
            if (section.style.display === 'block') {
                section.style.display = 'none';
                toggleBtn.classList.remove('active');
            } else {
                section.style.display = 'block';
                toggleBtn.classList.add('active');
            }
        }
        
        // Fonction pour v√©rifier les r√©ponses du quiz
        function checkAnswer(element, selectedAnswer) {
            const correctAnswer = 'B'; // La bonne r√©ponse est B
            
            // R√©initialiser toutes les options
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
            });
            
            // Marquer la r√©ponse s√©lectionn√©e et la bonne r√©ponse
            if (selectedAnswer === correctAnswer) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
                
                // Trouver et marquer la bonne r√©ponse
                options.forEach(opt => {
                    if (opt.getAttribute('onclick') && opt.getAttribute('onclick').includes(`'${correctAnswer}'`)) {
                        opt.classList.add('correct');
                    }
                });
            }
            
            // Afficher le feedback
            const feedbackDiv = document.getElementById('quiz-feedback-1');
            if (selectedAnswer === correctAnswer) {
                feedbackDiv.innerHTML = '<div class="feedback-correct"><p><strong>Correct!</strong> R√©ponse B. Le `*` indique que la route est candidate pour √™tre la route par d√©faut, mais ce n\'est pas le probl√®me. Si la route vers le next-hop 192.168.1.1 (probablement une route connect√©e) est absente, la route statique est invalide.</p></div>';
            } else {
                feedbackDiv.innerHTML = '<div class="feedback-incorrect"><p><strong>Incorrect.</strong> La bonne r√©ponse est B. Le `*` indique que la route est candidate pour √™tre la route par d√©faut, mais ce n\'est pas le probl√®me. Si la route vers le next-hop 192.168.1.1 (probablement une route connect√©e) est absente, la route statique est invalide, m√™me si elle appara√Æt dans la table.</p></div>';
            }
            feedbackDiv.style.display = 'block';
        }
        
        // Simulateur CLI simple
        const cliCommands = {
            'help': 'Commandes disponibles: ping, show ip route, show ip interface brief, traceroute, clear, exit',
            'ping': 'PING 192.168.1.1 (192.168.1.1): 56 data bytes\n64 bytes from 192.168.1.1: icmp_seq=0 ttl=64 time=1.123 ms\n64 bytes from 192.168.1.1: icmp_seq=1 ttl=64 time=0.987 ms\n\n--- 192.168.1.1 ping statistics ---\n2 packets transmitted, 2 packets received, 0.0% packet loss',
            'show ip route': 'Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP\n       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area\n       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2\n       E1 - OSPF external type 1, E2 - OSPF external type 2\n       i - IS-IS, su - IS-IS summary, L1 - IS-IS level-1, L2 - IS-IS level-2\n       ia - IS-IS inter area, * - candidate default, U - per-user static route\n       o - ODR, P - periodic downloaded static route, H - NHRP, l - LISP\n       a - application route\n\nGateway of last resort is 203.0.113.1 to network 0.0.0.0\n\nS*    0.0.0.0/0 [1/0] via 203.0.113.1\n      172.16.0.0/16 is variably subnetted, 2 subnets, 2 masks\nC        172.16.1.0/24 is directly connected, GigabitEthernet0/0\nL        172.16.1.1/32 is directly connected, GigabitEthernet0/0\nS     192.168.1.0/24 [1/0] via 172.16.1.254',
            'show ip interface brief': 'Interface              IP-Address      OK? Method Status                Protocol\nGigabitEthernet0/0      172.16.1.1      YES manual up                    up\nGigabitEthernet0/1      unassigned      YES manual administratively down down\nSerial0/1/0             10.0.0.1        YES manual up                    up',
            'traceroute': 'traceroute to 8.8.8.8 (8.8.8.8), 30 hops max, 38 byte packets\n 1  172.16.1.254 (172.16.1.254)  1.234 ms  1.123 ms  1.098 ms\n 2  10.0.0.2 (10.0.0.2)  5.678 ms  5.432 ms  5.411 ms\n 3  203.0.113.1 (203.0.113.1)  10.123 ms  10.098 ms  10.087 ms',
            'clear': 'Commandes clear: clear arp-cache, clear ip route *',
            'clear arp-cache': 'ARP cache cleared.',
            'clear ip route *': 'All static routes cleared from routing table.',
            'exit': 'Fin de la simulation CLI.'
        };
        
        document.getElementById('cli-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const command = this.value.trim().toLowerCase();
                const outputDiv = document.getElementById('cli-output');
                
                // Ajouter la commande √† l'output
                outputDiv.innerHTML += `<div class="cli-output"><span class="cli-prompt">R1# </span>${this.value}</div>`;
                
                // Ex√©cuter la commande
                if (cliCommands[command]) {
                    outputDiv.innerHTML += `<div class="cli-output">${cliCommands[command]}</div>`;
                } else if (command) {
                    outputDiv.innerHTML += `<div class="cli-output">Command not found: "${command}". Type 'help' for available commands.</div>`;
                }
                
                // Effacer l'input
                this.value = '';
                
                // Faire d√©filer vers le bas
                outputDiv.scrollTop = outputDiv.scrollHeight;
            }
        });
        
        // Initialiser les sections repliables
        document.addEventListener('DOMContentLoaded', function() {
            // Rendre les diagrammes Mermaid
            renderMermaidDiagrams();
            
            // Initialiser toutes les sections repliables comme ferm√©es
            const toggleSections = document.querySelectorAll('.toggle-content');
            toggleSections.forEach(section => {
                section.style.display = 'none';
            });
            
            // Initialiser le simulateur CLI
            document.getElementById('cli-input').focus();
        });
        
        // Navigation fluide
        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop - 80,
                        behavior: 'smooth'
                    });
                }
            });
        });
    </script>
</body>
</html>