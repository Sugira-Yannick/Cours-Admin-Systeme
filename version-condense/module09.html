<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Acad√©mique : Protocoles de Redondance de Premier Saut (FHRP)</title>
    <!-- Int√©gration de Mermaid pour les diagrammes -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true, theme:'neutral'});</script>
    <!-- Styles CSS -->
    <style>
        /* D√©finition des polices et variables */
        :root {
            --color-primary: #1a365d; /* Bleu fonc√© pour les titres */
            --color-secondary: #2d3748; /* Gris fonc√© pour sous-titres */
            --color-accent: #2b6cb0; /* Bleu accent pour concepts cl√©s */
            --color-law: #c53030; /* Rouge pour les lois mentales */
            --color-illusion: #b7791f; /* Or pour illusions conceptuelles */
            --color-background: #ffffff;
            --color-surface: #f7fafc;
            --color-border: #e2e8f0;
            --font-heading: 'Space Grotesk', 'Segoe UI', system-ui, sans-serif;
            --font-body: 'Source Sans 3', 'Inter', 'Open Sans', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-secondary);
            background-color: var(--color-background);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a {
            color: var(--color-accent);
            text-decoration: none;
        }

        /* Header */
        .page-header {
            background-color: var(--color-primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 5px solid var(--color-accent);
        }

        .page-header h1 {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation principale */
        #main-nav {
            background-color: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-weight: bold;
            color: var(--color-primary);
            font-size: 1.5rem;
            padding: 1rem 0;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--color-secondary);
            font-weight: 600;
            padding: 1rem 0;
            display: block;
            position: relative;
            transition: color 0.2s;
        }

        .nav-menu a:hover, .nav-menu a:focus {
            color: var(--color-accent);
        }

        .nav-menu a.active {
            color: var(--color-accent);
            border-bottom: 3px solid var(--color-accent);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            height: 3px;
            width: 25px;
            background-color: var(--color-primary);
            border-radius: 2px;
        }

        /* Contenu principal en deux colonnes */
        .main-wrapper {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Sidebar / Navigation lat√©rale */
        #sidebar {
            width: 280px;
            background-color: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: 2rem 1rem;
            position: sticky;
            top: 80px; /* Hauteur de la nav principale */
            align-self: flex-start;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-accent);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            color: var(--color-secondary);
            transition: all 0.2s;
        }

        .sidebar-nav a:hover, .sidebar-nav a:focus, .sidebar-nav a.active-section {
            background-color: rgba(43, 108, 176, 0.1);
            color: var(--color-accent);
            font-weight: 600;
        }

        /* Zone de contenu principal */
        #content {
            flex: 1;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .module-section {
            margin-bottom: 4rem;
            scroll-margin-top: 100px;
            background-color: white;
            border-radius: 8px;
            padding: 2.5rem;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .section-tag {
            display: inline-block;
            background-color: var(--color-accent);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        /* Styles typographiques sp√©cifiques */
        h3 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-secondary);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h4 {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-secondary);
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        p, ul, ol {
            margin-bottom: 1.5rem;
        }

        ul, ol {
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* √âl√©ments de mise en forme s√©mantique */
        .analogy-box {
            background-color: rgba(247, 250, 252, 0.8);
            border-left: 4px solid var(--color-accent);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .concept-key {
            color: var(--color-accent);
            font-weight: 700;
            background-color: rgba(43, 108, 176, 0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
        }

        .law-box {
            background-color: rgba(197, 48, 48, 0.05);
            border-left: 4px solid var(--color-law);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .illusion-box {
            background-color: rgba(183, 121, 31, 0.05);
            border-left: 4px solid var(--color-illusion);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .equation-box {
            text-align: center;
            font-family: var(--font-heading);
            font-size: 1.2rem;
            padding: 1.5rem;
            margin: 2rem 0;
            background-color: var(--color-surface);
            border-radius: 8px;
            border: 1px dashed var(--color-border);
        }

        .mermaid-diagram {
            margin: 2rem 0;
            padding: 1rem;
            background-color: white;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            overflow-x: auto;
            text-align: center;
        }

        /* Objectifs cognitifs */
        .cognitive-objectives {
            background: linear-gradient(135deg, var(--color-primary) 0%, #2c5282 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 10px;
            margin: 3rem 0;
        }

        .cognitive-objectives h3 {
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .cognitive-objectives ul {
            list-style: none;
            padding-left: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .cognitive-objectives li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .cognitive-objectives li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }

        /* Footer */
        .page-footer {
            background-color: var(--color-primary);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: auto;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-wrapper {
                flex-direction: column;
            }

            #sidebar {
                width: 100%;
                position: static;
                top: auto;
                max-height: none;
                border-right: none;
                border-bottom: 1px solid var(--color-border);
            }

            .nav-menu {
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--color-surface);
                flex-direction: column;
                padding: 1rem;
                border-top: 1px solid var(--color-border);
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .nav-menu li {
                width: 100%;
            }

            .module-section {
                padding: 1.5rem;
            }

            .page-header h1 {
                font-size: 1.8rem;
            }
        }

        @media print {
            #main-nav, #sidebar, .page-footer, .hamburger {
                display: none;
            }

            .main-wrapper {
                flex-direction: column;
            }

            #content {
                padding: 0;
            }

            .module-section {
                border: none;
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1>üìò Module Acad√©mique : Protocoles de Redondance de Premier Saut (FHRP)</h1>
        <p class="subtitle">Reconstruction acad√©mique ultra-approfondie orient√©e ma√Ætrise ‚Äî Architecturer la r√©silience de la passerelle par d√©faut (Niveau √âlite)</p>
    </header>

    <nav id="main-nav">
        <div class="nav-container">
            <div class="nav-logo">FHRP Expert</div>
            <div class="hamburger" id="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="main-menu">
                <li><a href="#analogie" class="active">Analogie Ma√Ætre</a></li>
                <li><a href="#modele-mental">Mod√®le Mental</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#mecanismes">M√©canismes</a></li>
                <li><a href="#protocoles">Protocoles & Services</a></li>
                <li><a href="#illusions">Illusions Conceptuelles</a></li>
                <li><a href="#raisonnement">Raisonnement</a></li>
                <li><a href="#synthese">Synth√®se</a></li>
                <li><a href="#extension">Extension</a></li>
                <li><a href="#objectifs">Objectifs</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-wrapper">
        <aside id="sidebar">
            <div class="sidebar-title">Navigation du Module</div>
            <ul class="sidebar-nav">
                <li><a href="#analogie" class="active-section">üß† Analogie Syst√©mique Ma√Ætre</a></li>
                <li><a href="#modele-mental">üß© Mod√®le Mental Global</a></li>
                <li><a href="#architecture">1Ô∏è‚É£ Architecture Conceptuelle Fondamentale</a></li>
                <li><a href="#mecanismes">2Ô∏è‚É£ M√©canismes Internes D√©tail√©s</a>
                    <ul style="margin-left: 1rem; margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><a href="#mecanisme-creation">Routeur Virtuel</a></li>
                        <li><a href="#mecanisme-election">√âlection & Pr√©emption</a></li>
                        <li><a href="#mecanisme-basculement">Surveillance & Basculement</a></li>
                    </ul>
                </li>
                <li><a href="#protocoles">3Ô∏è‚É£ Protocoles, Couches et Services</a></li>
                <li><a href="#illusions">4Ô∏è‚É£ Erreurs Conceptuelles Majeures</a></li>
                <li><a href="#raisonnement">5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert</a></li>
                <li><a href="#synthese">6Ô∏è‚É£ Synth√®se M√©morisable Long Terme</a></li>
                <li><a href="#extension">7Ô∏è‚É£ Extension au-del√† de NetAcad (200%+)</a></li>
                <li><a href="#objectifs">üéØ Objectifs Cognitifs Finaux</a></li>
            </ul>
        </aside>

        <main id="content">
            <!-- Section Analogie -->
            <section id="analogie" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Analogie Centrale</span>
                    <h2>üß† ANALOGIE SYST√âMIQUE MA√éTRE : LE CONCIERGE DE L'IMMEUBLE R√âSEAU</h2>
                </div>
                <p>Imaginez un immeuble (votre r√©seau local) dont tous les habitants (les h√¥tes : PC, serveurs, imprimantes) doivent envoyer leur courrier vers le monde ext√©rieur. L'immeuble poss√®de une <span class="concept-key">bo√Æte aux lettres centrale unique</span> (la passerelle par d√©faut) o√π tous d√©posent leur courrier sortant. Un concierge (le routeur actif) est charg√© de vider cette bo√Æte et d'exp√©dier le courrier.</p>
                <div class="analogy-box">
                    <p><strong>Le probl√®me :</strong> Si le concierge tombe malade, plus rien ne sort. L'immeuble est coup√© du monde.</p>
                    <p><strong>La solution FHRP :</strong> L'agence immobili√®re embauche <strong>plusieurs concierges</strong> (routeurs physiques). Ils s'organisent entre eux :</p>
                    <ul>
                        <li><strong>Un concierge actif</strong> travaille et vide la bo√Æte.</li>
                        <li><strong>Un concierge de secours</strong> est pr√©sent sur site, pr√™t √† prendre le relais instantan√©ment.</li>
                        <li>Ils partagent <strong>un m√™me uniforme et un m√™me nom de badge</strong> (IP et MAC virtuelles). Pour les habitants, <strong>il n'y a qu'un seul concierge</strong>. Ils ne voient jamais le changement.</li>
                    </ul>
                </div>
                <h4>Mapping Explicite</h4>
                <ul>
                    <li><span class="concept-key">Bo√Æte aux lettres centrale (IP virtuelle) ‚Üí</span> Adresse de passerelle par d√©faut configur√©e sur tous les h√¥tes.</li>
                    <li><span class="concept-key">Uniforme & nom de badge (MAC virtuelle) ‚Üí</span> Adresse MAC de couche 2 associ√©e √† l'IP virtuelle.</li>
                    <li><span class="concept-key">Concierge actif ‚Üí</span> Routeur HSRP/VRRP actif ou AVG (Active Virtual Gateway) GLBP.</li>
                    <li><span class="concept-key">Concierge de secours ‚Üí</span> Routeur HSRP/VRRP en veille ou routeur GLBP pr√™t √† devenir AVG.</li>
                    <li><span class="concept-key">R√®gles de l'agence (protocole FHRP) ‚Üí</span> M√©canismes d'√©lection, de surveillance (Hello), et de basculement.</li>
                    <li><span class="concept-key">D√©faillance du concierge actif ‚Üí</span> Panne de liaison ou du routeur. Le secours prend le relais sans que les habitants ne s'en aper√ßoivent.</li>
                </ul>
                <p>Cette analogie syst√©mique explique l'<strong>illusion de continuit√©</strong> et la <strong>collaboration invisible</strong> qui sont au c≈ìur de tous les FHRP.</p>
            </section>

            <!-- Section Mod√®le Mental -->
            <section id="modele-mental" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Sch√©ma Directeur</span>
                    <h2>üß© MOD√àLE MENTAL GLOBAL DU SYST√àME</h2>
                </div>
                <p>Le domaine des FHRP est un <strong>syst√®me de r√©silience proactive</strong> ins√©r√© entre la couche de liaison de donn√©es (commutation) et la couche r√©seau (routage). Son but n'est pas de router, mais de <strong>garantir la disponibilit√© du point d'entr√©e vers le routage</strong>.</p>
                <h4>Composants & Interactions :</h4>
                <ol>
                    <li><strong>Les H√¥tes :</strong> Configur√©s avec une <strong>IP de passerelle statique et unique</strong> (l'IP virtuelle). Ils ne participent pas au protocole ; ils sont les b√©n√©ficiaires passifs de la redondance.</li>
                    <li><strong>Le Groupe Virtuel :</strong> Entit√© logique compos√©e de plusieurs routeurs physiques. Il est d√©fini par une <strong>Adresse IP Virtuelle</strong> (couche 3) et une <strong>Adresse MAC Virtuelle</strong> (couche 2).</li>
                    <li><strong>Les Routeurs Physiques Membre :</strong> Ex√©cutent le protocole FHRP. Ils ont des r√¥les dynamiques (Actif/Standby, AVG/AVF) d√©termin√©s par une √©lection.</li>
                    <li><strong>Le Protocole FHRP :</strong> Langage de coordination. Il g√®re l'√©lection, la surveillance par messages Hello, et le transfert ordonn√© des r√¥les en cas de d√©faillance.</li>
                </ol>
                <h4>D√©pendances & Causalit√©s :</h4>
                <ul>
                    <li><strong>Si</strong> un routeur membre augmente sa priorit√© <strong>et</strong> que la pr√©emption est activ√©e, <strong>alors</strong> il d√©clenche une nouvelle √©lection et peut devenir actif.</li>
                    <li><strong>Si</strong> le routeur actif cesse d'√©mettre des messages Hello (d√©lai Hold d√©pass√©), <strong>alors</strong> le(s) routeur(s) de secours le d√©clarent d√©faillant et un nouveau routeur actif est √©lu.</li>
                    <li><strong>Si</strong> l'IP virtuelle change, <strong>alors</strong> la configuration de tous les h√¥tes doit √™tre mise √† jour ‚Üí C'est pourquoi elle est con√ßue pour √™tre stable.</li>
                    <li><strong>Si</strong> un FHRP est mal configur√© (ex: priorit√©s identiques, pr√©emption incoh√©rente), <strong>alors</strong> des basculements intempestifs ou une indisponibilit√© peuvent survenir.</li>
                </ul>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    subgraph ‚ÄúR√©seau Local (Couche 2/3)‚Äù
        H[H√¥tes<br/>IP: Passerelle = IP_Virtuelle]
        GV[Groupe Virtuel FHRP<br/>IP_Virtuelle / MAC_Virtuelle]
    end

    subgraph ‚ÄúMembres FHRP (Routeurs Physiques)‚Äù
        R1[Routeur 1<br/>R√¥le: Actif]
        R2[Routeur 2<br/>R√¥le: Standby]
        Rn[Routeur n...]
    end

    subgraph ‚ÄúR√©seau Externe‚Äù
        EXT[Routage vers Internet<br/>& autres r√©seaux]
    end

    H -- ‚ÄúTrame destin√©e √†<br/>MAC_Virtuelle‚Äù --> GV
    GV -- ‚ÄúTrait√© par le<br/>routeur au r√¥le Actif‚Äù --> R1
    R1 -- ‚ÄúRoute le paquet‚Äù --> EXT
    R2 -- ‚ÄúSurveillance continue<br/>messages Hello‚Äù --> R1
    R1 -. ‚ÄúD√©faillance /<br/>Hello perdu‚Äù .-> R2
    R2 == ‚ÄúBasculement:<br/>R2 devient Actif‚Äù ==> GV

    style GV fill:#e1f5fe
    style R1 fill:#c8e6c9
    style R2 fill:#fff3e0
                    </div>
                </div>
            </section>

            <!-- Section Architecture -->
            <section id="architecture" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fondamentaux</span>
                    <h2>1Ô∏è‚É£ ARCHITECTURE CONCEPTUELLE FONDAMENTALE</h2>
                </div>
                <p><strong>R√¥le dans les r√©seaux modernes :</strong> Les FHRP sont une brique essentielle de la <strong>haute disponibilit√© (HA)</strong> au niveau de l'acc√®s au r√©seau. Ils √©liminent le <strong>point de d√©faillance unique (SPOF)</strong> que constitue la passerelle par d√©faut statique dans un LAN, sans n√©cessiter de reconfiguration dynamique complexe sur les milliers d'h√¥tes finaux.</p>

                <h4>Positionnement dans les mod√®les OSI/TCP-IP :</h4>
                <ul>
                    <li><strong>OSI :</strong> Op√®re √† l'<strong>interface entre les couches 2 (Liaison de donn√©es) et 3 (R√©seau)</strong>. Il utilise des trames Ethernet (L2) pour ses messages de contr√¥le, mais g√®re une entit√© logique (le routeur virtuel) qui est une notion de couche r√©seau (L3).</li>
                    <li><strong>TCP/IP :</strong> R√©side dans la couche <strong>Internet</strong>, plus pr√©cis√©ment dans la sous-couche de <strong>gestion de la livraison locale</strong> des paquets vers le prochain saut. Il est ind√©pendant des protocoles de routage (OSPF, EIGRP) qui fonctionnent en amont.</li>
                </ul>

                <h4>Fronti√®res du domaine :</h4>
                <ul>
                    <li><strong>Interne au LAN :</strong> Le ph√©nom√®ne FHRP est confin√© √† un segment de broadcast (VLAN). Un groupe FHRP est sp√©cifique √† une interface/VLAN.</li>
                    <li><strong>Transparent pour les h√¥tes :</strong> Les h√¥tes ignorent totalement la mise en ≈ìuvre du FHRP. Ils ARP-ent et envoient des trames vers l'IP/MAC virtuelles comme vers un routeur unique.</li>
                    <li><strong>Transparent pour le routage externe :</strong> Les routeurs en amont voient le trafic provenir de l'IP physique du routeur actif, pas de l'IP virtuelle. Le FHRP n'affecte pas les tables de routage du c≈ìur de r√©seau.</li>
                </ul>

                <h4>Relations avec les autres briques :</h4>
                <ul>
                    <li><strong>Avec STP :</strong> Tous deux fournissent de la redondance, mais √† des niveaux diff√©rents. <strong>STP</strong> √©limine les boucles de <strong>couche 2</strong> et g√®re la redondance des chemins entre commutateurs. <strong>FHRP</strong> g√®re la redondance des chemins de <strong>sortie du LAN (couche 3)</strong>. Ils sont compl√©mentaires et souvent d√©ploy√©s ensemble.</li>
                    <li><strong>Avec le Routage Dynamique :</strong> Les protocoles de routage convergent pour trouver de nouveaux chemins vers les r√©seaux si un lien tombe. Cependant, <strong>cette convergence est lente (secondes/minutes) et ne r√©sout pas le probl√®me de la passerelle par d√©faut locale des h√¥tes.</strong> Le FHRP agit en quelques secondes, voire moins, pour basculer la fonction de passerelle locale.</li>
                </ul>
            </section>

            <!-- Section M√©canismes -->
            <section id="mecanismes" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fonctionnement Causal</span>
                    <h2>2Ô∏è‚É£ M√âCANISMES INTERNES D√âTAILL√âS</h2>
                </div>

                <h3 id="mecanisme-creation">A. La Cr√©ation et l'Abstraction du Routeur Virtuel</h3>
                <ul>
                    <li><strong>Fonctionnement :</strong> Plusieurs routeurs physiques sur le m√™me segment LAN s'accordent pour former un groupe. Ils d√©finissent de concert une <strong>adresse IP virtuelle</strong> (hors de leur plage d'adresses physiques) et <strong>calculent une adresse MAC virtuelle</strong> (souvent bas√©e sur un identifiant de protocole et de groupe).</li>
                    <li><strong>S√©quence :</strong> 1) Configuration manuelle de l'IP virtuelle et du groupe sur chaque membre. 2) Un protocole d'√©lection d√©termine le membre qui "incarnera" initialement ce routeur virtuel. 3) Ce membre r√©pond aux requ√™tes ARP pour l'IP virtuelle avec la MAC virtuelle.</li>
                    <li><strong>Condition de validit√© :</strong> L'IP virtuelle doit √™tre dans le m√™me sous-r√©seau que les interfaces physiques des membres, mais ne doit pas √™tre assign√©e √† une interface physique existante (pour √©viter les conflits IP).</li>
                </ul>

                <h3 id="mecanisme-election">B. L'√âlection et la Pr√©emption</h3>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    A[√âlection] --> B{Priorit√© la + haute ?};
    B -- Oui --> C[Ce routeur gagne];
    B -- √âgale --> D{IP physique la + haute ?};
    D -- Oui --> C;
    D -- √âgale --> E[MAC la + basse ?];
    E --> C;
    C --> F{Pr√©emption activ√©e ?};
    F -- Non --> G[Statu quo: Le gagnant initial reste];
    F -- Oui --> H[Le routeur avec priorit√© sup√©rieure peut r√©clamer le r√¥le actif];
                    </div>
                </div>
                <ul>
                    <li><strong>Fonctionnement :</strong> L'attribution du r√¥le "Actif" (ou principal) se fait par une √©lection bas√©e sur deux param√®tres, dans l'ordre : <strong>1. La priorit√© (valeur num√©rique), 2. L'adresse IP physique</strong> (en cas d'√©galit√© des priorit√©s). La valeur la plus haute pour chaque param√®tre l'emporte.</li>
                    <li><strong>Pr√©emption :</strong> Capacit√© d'un routeur √† <strong>r√©clamer de force</strong> le r√¥le actif s'il a une priorit√© sup√©rieure √† l'actuel actif. Sans pr√©emption, un routeur avec une priorit√© inf√©rieure mais d√©marr√© en premier reste actif ind√©finiment, m√™me si un routeur "mieux class√©" rejoint le groupe.</li>
                    <li><strong>Cas fronti√®re :</strong> Que se passe-t-il si deux routeurs ont la m√™me priorit√© et la m√™me adresse IP ? (Impossible dans une configuration saine). Le protocole peut utiliser l'adresse MAC physique comme ultime tie-breaker, ou consid√©rer cela comme une condition d'erreur.</li>
                </ul>

                <h3 id="mecanisme-basculement">C. La Surveillance par Messages Hello et le Basculement</h3>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph LR
    subgraph ‚ÄúRouteur Actif (R1)‚Äù
        A1[√âmission p√©riodique<br/>Hello tous les 3s]
    end
    subgraph ‚ÄúRouteur Standby (R2)‚Äù
        B1[Surveillance continue<br/>Hold Timer = 10s]
    end
    A1 --> B1
    B1 -. ‚ÄúAucun Hello re√ßu pendant > 10s‚Äù .-> C[D√©clare R1 d√©faillant]
    C --> D[D√©clenche nouvelle √©lection]
    D --> E[R2 devient Actif]
    E --> F[R2 r√©pond aux ARP, route le trafic]
                    </div>
                </div>
                <ul>
                    <li><strong>Fonctionnement :</strong> Le routeur actif √©met p√©riodiquement (ex: toutes les 3 secondes pour HSRP) un message <strong>Hello</strong> multicast vers les autres membres. Ce message signifie "Je suis vivant et en fonction".</li>
                    <li><strong>S√©quence de basculement :</strong>
                        <ol>
                            <li>Le routeur de secours (standby) surveille ces messages avec un <strong>timer de maintien (Hold Timer)</strong>, typiquement 3 fois l'intervalle Hello (ex: 10 secondes).</li>
                            <li>Si aucun Hello n'est re√ßu avant l'expiration du Hold Timer, le routeur de secours <strong>d√©clare l'actif d√©faillant</strong>.</li>
                            <li>Il d√©clenche une nouvelle √©lection (o√π il est souvent le seul candidat viable) et assume le r√¥le actif.</li>
                            <li>Il commence √† r√©pondre aux ARP pour l'IP virtuelle et √† router le trafic. <strong>La transition est transparente pour les h√¥tes</strong> car l'IP et la MAC de destination n'ont pas chang√©.</li>
                        </ol>
                    </li>
                </ul>
            </section>

            <!-- Section Protocoles -->
            <section id="protocoles" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√âl√©ments du Syst√®me</span>
                    <h2>3Ô∏è‚É£ PROTOCOLES, COUCHES ET SERVICES (EXHAUSTIF)</h2>
                </div>

                <h4>HSRP (Hot Standby Router Protocol) ‚Äì Le Propri√©taire Cisco</h4>
                <ul>
                    <li><strong>Objectif :</strong> Fournir une redondance de passerelle par d√©faut transparente avec un routeur actif et un ou plusieurs routeurs de secours.</li>
                    <li><strong>Couches :</strong> L2 (trames Ethernet) pour le transport des messages, L3 (gestion de l'IP virtuelle).</li>
                    <li><strong>Encapsulation :</strong> Ses messages (Hello, Coupure) sont encapsul√©s dans des <strong>paquets IP</strong> (protocole UDP port 1985) adress√©s √† une <strong>adresse multicast</strong> d√©di√©e (224.0.0.2 avec TTL=1). Ils ne traversent donc pas de routeur.</li>
                    <li><strong>Champs importants :</strong> Priorit√© (0-255, d√©faut=100), √âtat (Initial, Apprendre, √âcouter, Parler, Standby, Actif), Adresse IP virtuelle, Timers Hello/Hold.</li>
                    <li><strong>Comportement normal :</strong> Un routeur actif, un standby. Pas d'√©quilibrage de charge par d√©faut. Version 2 (HSRPv2) supporte IPv6 et utilise le multicast 224.0.0.102.</li>
                    <li><strong>Interaction :</strong> Ne communique qu'avec les autres membres du m√™me groupe HSRP. Ind√©pendant du routage.</li>
                    <li><strong>Erreur conceptuelle fr√©quente :</strong> Croire que HSRP fait de l'√©quilibrage de charge. <strong>Faux.</strong> Il ne fait que de la redondance. Pour l'√©quilibrage de charge entre passerelles, Cisco propose GLBP.</li>
                </ul>

                <h4>VRRP (Virtual Router Redundancy Protocol) ‚Äì Le Standard Ouvert (IETF)</h4>
                <ul>
                    <li><strong>Objectif :</strong> Identique √† HSRP. C'est le standard IETF (RFC 5798), permettant l'interop√©rabilit√© entre √©quipements de diff√©rents constructeurs.</li>
                    <li><strong>Diff√©rences cl√©s avec HSRP :</strong>
                        <ul>
                            <li><strong>Terminologie :</strong> Le routeur principal est le <strong>Master</strong>, les autres sont des <strong>Backups</strong>.</li>
                            <li><strong>Adresses Multicast :</strong> Utilise 224.0.0.18 (IP protocol 112).</li>
                            <li><strong>Priorit√© :</strong> Plage 1-254. 255 est r√©serv√© au routeur propri√©taire de l'IP virtuelle (si elle est aussi une IP physique). La priorit√© 0 signifie "abdication imm√©diate" (utile pour une mise hors service planifi√©e).</li>
                            <li><strong>Pr√©emption :</strong> Activ√©e <strong>par d√©faut</strong> dans VRRP (contrairement √† HSRP).</li>
                        </ul>
                    </li>
                    <li><strong>VRRPv3 :</strong> Supporte √† la fois IPv4 et IPv6, apportant une coh√©rence de gestion.</li>
                </ul>

                <h4>GLBP (Gateway Load Balancing Protocol) ‚Äì L'√âquilibreur Cisco</h4>
                <ul>
                    <li><strong>Objectif :</strong> Combiner <strong>redondance</strong> et <strong>√©quilibrage de charge</strong> entre les membres du groupe.</li>
                    <li><strong>M√©canisme unique :</strong> Un routeur est √©lu <strong>AVG (Active Virtual Gateway)</strong>. C'est le seul √† r√©pondre aux requ√™tes ARP pour l'IP virtuelle. <strong>Mais</strong>, il r√©pond en alternance avec <strong>diff√©rentes adresses MAC virtuelles</strong>, chacune assign√©e √† un membre diff√©rent du groupe (un <strong>AVF - Active Virtual Forwarder</strong>). Ainsi, les diff√©rents h√¥tes du LAN auront la m√™me passerelle IP, mais des passerelles MAC diff√©rentes, r√©partissant le trafic.</li>
                    <li><strong>Comportement normal :</strong> Jusqu'√† <strong>4 routeurs actifs</strong> peuvent partager la charge de trafic sortant. Si un AVF tombe, l'AVG le retire de la rotation ARP et sa charge est reprise par les autres.</li>
                    <li><strong>Limite :</strong> Complexit√© accrue par rapport √† HSRP/VRRP. L'√©quilibrage est "par h√¥te" (bas√© sur l'ARP), pas "par flux" ou "par paquet".</li>
                </ul>

                <h4>IRDP (ICMP Router Discovery Protocol) ‚Äì La D√©couverte Dynamique (Obsol√®te)</h4>
                <ul>
                    <li><strong>Objectif :</strong> Permettre aux h√¥tes de <strong>d√©couvrir dynamiquement</strong> leur passerelle par d√©faut via des messages ICMP Router Advertisement et Solicitation.</li>
                    <li><strong>Probl√®me :</strong> Il ne fournit <strong>pas de m√©canisme de redondance rapide et coordonn√©</strong> entre routeurs. Si plusieurs routeurs envoient des advertisements, l'h√¥te en choisit un, mais la reprise sur panne est lente et non garantie. <strong>Il n'est pas consid√©r√© comme un v√©ritable FHRP moderne</strong> et est rarement utilis√© seul en production.</li>
                </ul>
            </section>

            <!-- Section Illusions -->
            <section id="illusions" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Pi√®ges √† √âviter</span>
                    <h2>4Ô∏è‚É£ ERREURS CONCEPTUELLES MAJEURES (ISSUES DES R√âPONSES FAUSSES)</h2>
                </div>

                <div class="illusion-box">
                    <h4>1. ¬´ Le commutateur de couche 3 est la passerelle par d√©faut naturelle. ¬ª</h4>
                    <p><strong>Pourquoi c'est plausible :</strong> Un commutateur L3 fait du routage inter-VLAN, il est donc souvent la passerelle des h√¥tes.</p>
                    <p><strong>Pourquoi c'est faux :</strong> La notion de "passerelle par d√©faut" est <strong>fonctionnelle</strong>, pas mat√©rielle. Elle peut √™tre assur√©e par un routeur d√©di√©, un commutateur L3, ou un groupe virtuel. La bonne r√©ponse est <strong>¬´ Passerelle par d√©faut ¬ª</strong>, qui d√©crit la <strong>fonction</strong>, pas le type de p√©riph√©rique.</p>
                    <p><strong>Raisonnement correct :</strong> Identifier l'entit√© (physique ou logique) √† laquelle les h√¥tes envoient le trafic pour les r√©seaux inconnus. C'est une d√©finition de r√¥le, pas de mat√©riel.</p>
                </div>

                <div class="illusion-box">
                    <h4>2. ¬´ HSRP et VRRP font de l'√©quilibrage de charge. ¬ª</h4>
                    <p><strong>Pourquoi c'est plausible :</strong> Ils utilisent plusieurs routeurs, donnant l'impression que la charge est partag√©e.</p>
                    <p><strong>Pourquoi c'est faux :</strong> HSRP et VRRP standard ont <strong>un seul routeur actif/master</strong> √† un instant T. Tout le trafic passe par lui. Le(s) autre(s) sont inactifs (en veille). L'√©quilibrage de charge est le domaine exclusif de <strong>GLBP</strong> ou de solutions plus complexes (ECMP au niveau du routage).</p>
                    <p><strong>Raisonnement correct :</strong> Demandez-vous : "√Ä un instant donn√©, par combien de routeurs physiques le trafic des h√¥tes transite-t-il ?" Si la r√©ponse est "un seul", ce n'est pas de l'√©quilibrage de charge.</p>
                </div>

                <div class="illusion-box">
                    <h4>3. ¬´ La priorit√© la plus √©lev√©e devient toujours active imm√©diatement. ¬ª</h4>
                    <p><strong>Pourquoi c'est plausible :</strong> C'est logique : le "meilleur" routeur devrait prendre la main.</p>
                    <p><strong>Pourquoi c'est faux :</strong> Cela d√©pend du param√®tre <strong>Pr√©emption</strong>. Sans pr√©emption activ√©e, le premier routeur d√©marr√© (ou √©lu initialement) reste actif, m√™me si un routeur avec une priorit√© sup√©rieure rejoint le groupe plus tard.</p>
                    <p><strong>Raisonnement correct :</strong> Penser en deux temps : 1) <strong>√âlection</strong> (qui gagne initialement ?). 2) <strong>Stabilit√©/Pr√©emption</strong> (les changements sont-ils autoris√©s apr√®s l'√©lection initiale ?). La pr√©emption doit √™tre explicitement configur√©e dans HSRP.</p>
                </div>

                <div class="illusion-box">
                    <h4>4. ¬´ STP est un protocole de redondance de couche 3 comme HSRP. ¬ª</h4>
                    <p><strong>Pourquoi c'est plausible :</strong> Les deux √©liminent des points de d√©faillance unique et utilisent des √©lections (pont racine, routeur actif).</p>
                    <p><strong>Pourquoi c'est faux :</strong> Ils op√®rent √† des <strong>couches absolument diff√©rentes</strong>.
                        <ul>
                            <li><strong>STP (Spanning Tree)</strong> : <strong>Couche 2 (Liaison de donn√©es)</strong>. G√®re les <strong>boucles physiques entre commutateurs</strong>. Son √©lection (pont racine) concerne <strong>le cheminement des trames</strong> dans un domaine de broadcast.</li>
                            <li><strong>FHRP (HSRP, etc.)</strong> : <strong>Interface Couche 2/3</strong>. G√®re la <strong>disponibilit√© de la passerelle IP</strong>. Son √©lection concerne <strong>le choix du routeur qui acc√®de au r√©seau externe</strong>.</li>
                        </ul>
                    </p>
                    <p><strong>Raisonnement correct :</strong> Posez la question : "Ce protocole r√©sout-il un probl√®me de boucle de trames (L2) ou un probl√®me d'acc√®s √† une passerelle IP (L3) ?" La r√©ponse vous donne la couche.</p>
                </div>
            </section>

            <!-- Section Raisonnement -->
            <section id="raisonnement" class="module-section">
                <div class="section-header">
                    <span class="section-tag">M√©thode Expert</span>
                    <h2>5Ô∏è‚É£ RAISONNEMENT D'ADMINISTRATEUR R√âSEAU EXPERT</h2>
                </div>
                <p><strong>Penser en Syst√®mes, pas en Appareils :</strong><br>
                Ne voyez pas R1, R2, SW1. Voyez <strong>le Groupe Virtuel VLAN10</strong>, <strong>le chemin de sortie du LAN des serveurs</strong>. Le FHRP est un service rendu √† un segment r√©seau. Sa configuration et son √©tat doivent √™tre v√©rifi√©s <strong>par groupe</strong>, <strong>par VLAN</strong>.</p>

                <p><strong>Anticiper les Effets de Basculement :</strong></p>
                <ul>
                    <li><strong>Avant un changement :</strong> Si vous devez √©teindre le routeur actif pour maintenance, <strong>v√©rifiez que le standby est op√©rationnel</strong> (<code>show standby</code>). Activez √©ventuellement la pr√©emption sur le standby avec une priorit√© temporairement √©lev√©e pour garantir le basculement.</li>
                    <li><strong>Apr√®s un basculement :</strong> Le nouveau routeur actif assume la MAC virtuelle. Cela implique un <strong>ph√©nom√®ne d'apprentissage de MAC</strong> sur les commutateurs : les ports menant √† l'ancien actif doivent "oublier" la MAC virtuelle, et ceux menant au nouveau doivent l'apprendre. Ce processus est rapide mais peut causer une micro-coupure.</li>
                </ul>

                <p><strong>Comprendre les Cons√©quences Invisibles :</strong></p>
                <ul>
                    <li><strong>Charge CPU :</strong> Un routeur actif HSRP/VRRP traite <strong>tout</strong> le trafic de sortie du LAN. Assurez-vous qu'il a la capacit√© de le faire. GLBP r√©partit cette charge.</li>
                    <li><strong>Asym√©trie des Chemins :</strong> Un sc√©nario classique : le trafic sort par le routeur actif FHRP, mais le trafic de retour (du c≈ìur de r√©seau) peut arriver sur l'autre routeur (si les routes sont √©gales). Cela fonctionne <strong>seulement si les deux routeurs partagent un peering de routage et font du "stateful" inspection ou ont un m√©canisme de synchronisation d'√©tat (comme les firewalls en cluster)</strong>. Sinon, le trafic de retour sera abandonn√©.</li>
                </ul>

                <p><strong>Diagnostic par Couche :</strong></p>
                <ol>
                    <li><strong>L'h√¥te ne ping pas l'ext√©rieur.</strong></li>
                    <li><strong>Couche 3 sur l'h√¥te :</strong> L'adresse de passerelle est-elle correcte (l'IP virtuelle) ? Un <code>arp -a</code> montre-t-il l'adresse MAC virtuelle associ√©e ?</li>
                    <li><strong>Couche 2 sur le commutateur :</strong> La table MAC (<code>show mac address-table</code>) associe-t-elle la MAC virtuelle au port correct (celui du routeur actif actuel) ?</li>
                    <li><strong>√âtat FHRP (<code>show standby/ show vrrp</code>) :</strong> Quel routeur est actif ? Ses interfaces sont-elles UP/UP ? Les timers sont-ils coh√©rents entre les membres ?</li>
                    <li><strong>Routage sur l'actif :</strong> A-t-il une route par d√©faut ou vers la destination ?</li>
                </ol>
            </section>

            <!-- Section Synth√®se -->
            <section id="synthese" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√Ä Retenir Absolument</span>
                    <h2>6Ô∏è‚É£ SYNTH√àSE M√âMORISABLE LONG TERME</h2>
                </div>

                <h3>Lois Conceptuelles :</h3>
                <div class="law-box">
                    <p><strong>Loi Conceptuelle #1 :</strong> <strong>La Passerelle est une Fonction, pas une Bo√Æte.</strong> Les FHRP d√©coupent cette fonction de l'appareil physique qui l'ex√©cute √† un instant T.</p>
                    <p><strong>Loi Conceptuelle #2 :</strong> <strong>L'Illusion est la Cl√©.</strong> L'efficacit√© des FHRP repose sur le maintien parfait de l'illusion, pour les h√¥tes, d'un routeur unique et toujours disponible.</p>
                </div>

                <h3>√âquation Mentale du Choix de Protocole :</h3>
                <div class="equation-box">
                    <p><strong>Besoins = Redondance seule, environnement Cisco ‚Üí HSRP.</strong></p>
                    <p><strong>Besoins = Redondance seule, environnement multi-constructeur ‚Üí VRRP.</strong></p>
                    <p><strong>Besoins = Redondance + √âquilibrage de charge simple, environnement Cisco ‚Üí GLBP.</strong></p>
                </div>

                <h3>R√®gles de Raisonnement :</h3>
                <ul>
                    <li>Identifiez toujours <strong>l'IP virtuelle</strong> et le <strong>groupe</strong>.</li>
                    <li>Pour savoir qui est actif, consultez <strong>l'√©tat du protocole</strong>, pas l'activit√© LED du routeur.</li>
                    <li>Un basculement FHRP r√©ussi est celui que <strong>personne (sauf l'admin) ne remarque</strong>.</li>
                </ul>

                <h3>Rappel via l'Analogie :</h3>
                <div class="analogy-box">
                    <p>Tant que les concierges (routeurs) suivent scrupuleusement les r√®gles de l'agence (protocole FHRP) et coordonnent leur changement de service, les habitants (h√¥tes) ont l'impression d'avoir <strong>un concierge infaillible</strong>.</p>
                </div>
            </section>

            <!-- Section Extension -->
            <section id="extension" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Perspectives</span>
                    <h2>7Ô∏è‚É£ EXTENSION AU-DEL√Ä DE NETACAD (200%+)</h2>
                </div>
                <ul>
                    <li><strong>FHRP dans le Cloud & Virtualisation :</strong> Les concepts FHRP sont repris dans les hyperviseurs (ex : VMware NSX, Microsoft Hyper-V avec MLAG/Active-Active) et les clouds publics (ex : Azure Gateway, AWS Gateway Load Balancer) pour assurer la haute disponibilit√© des services r√©seau virtuels. Le principe d'une IP virtuelle devant plusieurs instances reste universel.</li>
                    <li><strong>Redondance Multi-Groupe & Object Tracking :</strong> Les FHRP avanc√©s permettent de lier l'√©tat d'un groupe √† la disponibilit√© d'un <strong>lien montant</strong>. Ex: Si la liaison WAN du routeur actif tombe, sa priorit√© HSRP est automatiquement diminu√©e, for√ßant un basculement vers le standby dont la liaison WAN est op√©rationnelle. C'est la <strong>surveillance d'objet (object tracking)</strong>.</li>
                    <li><strong>Vision Vendor-Neutre et Autonomie :</strong> Un expert r√©seau comprend que HSRP, VRRP, GLBP sont des impl√©mentations diff√©rentes d'un <strong>pattern architectural commun</strong>. Cette compr√©hension lui permet de s'adapter √† n'importe quel √©quipement ou protocole futur impl√©mentant ce pattern (d√©finition d'un groupe, √©lection, IP/MAC virtuelles, messages de sant√©).</li>
                    <li><strong>Liens vers la S√©curit√© :</strong> Les messages FHRP (Hello) ne sont pas authentifi√©s par d√©faut. Un attaquant sur le LAN pourrait √©mettre des messages Hello forg√©s, se faire √©lire routeur actif, et ainsi <strong>intercepter tout le trafic sortant du LAN</strong> (attaque de l'homme du milieu). <strong>Bonnes pratiques :</strong> Toujours activer l'authentification (MD5, texte clair) pour les groupes FHRP en production.</li>
                </ul>
            </section>

            <!-- Section Objectifs -->
            <section id="objectifs" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Finalit√©</span>
                    <h2>üéØ Objectifs Cognitifs Finaux ‚Äì Administrateur R√©seau √âlite</h2>
                </div>
                <div class="cognitive-objectives">
                    <p>√Ä la fin de ce module, vous pensez d√©sormais en termes de <strong>service de r√©silience de passerelle</strong>, pas de routeurs individuels. Vous concevez des groupes FHRP pour √©liminer le SPOF, vous choisissez un protocole (HSRP, VRRP, GLBP) en fonction des besoins de redondance, d'√©quilibrage et d'√©cosyst√®me, et vous savez que la continuit√© repose sur l'illusion parfaite d'un routeur unique.</p>
                    <p>Vous pouvez expliquer pourquoi un h√¥te est isol√© en raisonnant de la couche applicative jusqu'√† la configuration de la priorit√© HSRP et √† l'√©tat du tunnel de routage. Votre compr√©hension des compromis (simplicit√© vs √©quilibrage, pr√©emption vs stabilit√©, redondance locale vs routage asym√©trique) vous permet de prendre des d√©cisions architecturales √©clair√©es et de d√©panner avec m√©thodologie. Vous √™tes pr√™t √† garantir la haute disponibilit√© de l'acc√®s r√©seau pour n'importe quel segment d'entreprise.</p>
                    <br>
                    <h3>Vous devez pouvoir dire, sans h√©sitation :</h3>
                    <ul>
                        <li>¬´ Je pense comme un architecte et un administrateur r√©seau senior ¬ª</li>
                        <li>¬´ Je comprends les causes profondes, pas seulement les sympt√¥mes ¬ª</li>
                        <li>¬´ Je peux intervenir sur des r√©seaux complexes avec m√©thode et confiance ¬ª</li>
                        <li>¬´ Mon niveau d√©passe largement celui attendu d'une formation classique ¬ª</li>
                        <li>¬´ Je comprends comment √ßa fonctionne ¬ª</li>
                        <li>¬´ Je sais expliquer pourquoi √ßa casse ¬ª</li>
                        <li>¬´ Je peux raisonner sans par c≈ìur ¬ª</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <footer class="page-footer">
        <p>Module Acad√©mique FHRP ‚Äî Reconstruction pour la Ma√Ætrise Expert</p>
        <p>¬© Format p√©dagogique HTML ‚Äî Contenu fig√© et valid√©.</p>
    </footer>

    <script>
        // Script pour la navigation mobile et le suivi des sections actives
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-btn');
            const mainMenu = document.getElementById('main-menu');
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            const mainNavLinks = document.querySelectorAll('.nav-menu a');

            // Gestion du menu hamburger
            hamburger.addEventListener('click', function() {
                mainMenu.classList.toggle('active');
            });

            // Fermer le menu mobile en cliquant sur un lien
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (mainMenu.classList.contains('active')) {
                        mainMenu.classList.remove('active');
                    }
                });
            });

            // Suivi de la section active (scroll)
            const sections = document.querySelectorAll('.module-section');
            const navLi = document.querySelectorAll('.sidebar-nav a, .nav-menu a');

            function setActiveSection() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 150;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLi.forEach(li => {
                    li.classList.remove('active', 'active-section');
                    if (li.getAttribute('href') === `#${current}`) {
                        li.classList.add('active', 'active-section');
                    }
                });
            }

            window.addEventListener('scroll', setActiveSection);
            // Initialiser l'√©tat actif au chargement
            setActiveSection();
        });
    </script>
</body>
</html>