<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Acad√©mique : Routage Inter-VLAN</title>
    <!-- Int√©gration de Mermaid pour les diagrammes -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true, theme:'neutral'});</script>
    <!-- Styles CSS -->
    <style>
        /* D√©finition des polices et variables */
        :root {
            --color-primary: #1a365d; /* Bleu fonc√© pour les titres */
            --color-secondary: #2d3748; /* Gris fonc√© pour sous-titres */
            --color-accent: #2b6cb0; /* Bleu accent pour concepts cl√©s */
            --color-law: #c53030; /* Rouge pour les lois mentales */
            --color-illusion: #b7791f; /* Or pour illusions conceptuelles */
            --color-background: #ffffff;
            --color-surface: #f7fafc;
            --color-border: #e2e8f0;
            --font-heading: 'Space Grotesk', 'Segoe UI', system-ui, sans-serif;
            --font-body: 'Source Sans 3', 'Inter', 'Open Sans', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-secondary);
            background-color: var(--color-background);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a {
            color: var(--color-accent);
            text-decoration: none;
        }

        /* Header */
        .page-header {
            background-color: var(--color-primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 5px solid var(--color-accent);
        }

        .page-header h1 {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation principale */
        #main-nav {
            background-color: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-weight: bold;
            color: var(--color-primary);
            font-size: 1.5rem;
            padding: 1rem 0;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--color-secondary);
            font-weight: 600;
            padding: 1rem 0;
            display: block;
            position: relative;
            transition: color 0.2s;
        }

        .nav-menu a:hover, .nav-menu a:focus {
            color: var(--color-accent);
        }

        .nav-menu a.active {
            color: var(--color-accent);
            border-bottom: 3px solid var(--color-accent);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            height: 3px;
            width: 25px;
            background-color: var(--color-primary);
            border-radius: 2px;
        }

        /* Contenu principal en deux colonnes */
        .main-wrapper {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Sidebar / Navigation lat√©rale */
        #sidebar {
            width: 280px;
            background-color: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: 2rem 1rem;
            position: sticky;
            top: 80px; /* Hauteur de la nav principale */
            align-self: flex-start;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-accent);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            color: var(--color-secondary);
            transition: all 0.2s;
        }

        .sidebar-nav a:hover, .sidebar-nav a:focus, .sidebar-nav a.active-section {
            background-color: rgba(43, 108, 176, 0.1);
            color: var(--color-accent);
            font-weight: 600;
        }

        /* Zone de contenu principal */
        #content {
            flex: 1;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .module-section {
            margin-bottom: 4rem;
            scroll-margin-top: 100px;
            background-color: white;
            border-radius: 8px;
            padding: 2.5rem;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .section-tag {
            display: inline-block;
            background-color: var(--color-accent);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        /* Styles typographiques sp√©cifiques */
        h3 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-secondary);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h4 {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-secondary);
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        p, ul, ol {
            margin-bottom: 1.5rem;
        }

        ul, ol {
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* √âl√©ments de mise en forme s√©mantique */
        .analogy-box {
            background-color: rgba(247, 250, 252, 0.8);
            border-left: 4px solid var(--color-accent);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .concept-key {
            color: var(--color-accent);
            font-weight: 700;
            background-color: rgba(43, 108, 176, 0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
        }

        .law-box {
            background-color: rgba(197, 48, 48, 0.05);
            border-left: 4px solid var(--color-law);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .illusion-box {
            background-color: rgba(183, 121, 31, 0.05);
            border-left: 4px solid var(--color-illusion);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .equation-box {
            text-align: center;
            font-family: var(--font-heading);
            font-size: 1.2rem;
            padding: 1.5rem;
            margin: 2rem 0;
            background-color: var(--color-surface);
            border-radius: 8px;
            border: 1px dashed var(--color-border);
        }

        .mermaid-diagram {
            margin: 2rem 0;
            padding: 1rem;
            background-color: white;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            overflow-x: auto;
            text-align: center;
        }

        /* Objectifs cognitifs */
        .cognitive-objectives {
            background: linear-gradient(135deg, var(--color-primary) 0%, #2c5282 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 10px;
            margin: 3rem 0;
        }

        .cognitive-objectives h3 {
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .cognitive-objectives ul {
            list-style: none;
            padding-left: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .cognitive-objectives li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .cognitive-objectives li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }

        /* Footer */
        .page-footer {
            background-color: var(--color-primary);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: auto;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-wrapper {
                flex-direction: column;
            }

            #sidebar {
                width: 100%;
                position: static;
                top: auto;
                max-height: none;
                border-right: none;
                border-bottom: 1px solid var(--color-border);
            }

            .nav-menu {
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--color-surface);
                flex-direction: column;
                padding: 1rem;
                border-top: 1px solid var(--color-border);
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .nav-menu li {
                width: 100%;
            }

            .module-section {
                padding: 1.5rem;
            }

            .page-header h1 {
                font-size: 1.8rem;
            }
        }

        @media print {
            #main-nav, #sidebar, .page-footer, .hamburger {
                display: none;
            }

            .main-wrapper {
                flex-direction: column;
            }

            #content {
                padding: 0;
            }

            .module-section {
                border: none;
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1>üìò Module Acad√©mique : Routage Inter-VLAN</h1>
        <p class="subtitle">Reconstruction acad√©mique ultra-approfondie orient√©e ma√Ætrise ‚Äî Formation d'un administrateur r√©seau d'exception (Niveau √âlite)</p>
    </header>

    <nav id="main-nav">
        <div class="nav-container">
            <div class="nav-logo">Routage Inter-VLAN</div>
            <div class="hamburger" id="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="main-menu">
                <li><a href="#analogie" class="active">Analogie Ma√Ætre</a></li>
                <li><a href="#modele-mental">Mod√®le Mental</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#mecanismes">M√©canismes</a></li>
                <li><a href="#protocoles">Protocoles & Services</a></li>
                <li><a href="#illusions">Illusions Conceptuelles</a></li>
                <li><a href="#raisonnement">Raisonnement Expert</a></li>
                <li><a href="#synthese">Synth√®se</a></li>
                <li><a href="#extension">Extension</a></li>
                <li><a href="#objectifs">Objectifs</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-wrapper">
        <aside id="sidebar">
            <div class="sidebar-title">Navigation du Module</div>
            <ul class="sidebar-nav">
                <li><a href="#analogie" class="active-section">üß† Analogie Syst√©mique Ma√Ætre</a></li>
                <li><a href="#modele-mental">üß© Mod√®le Mental Global</a></li>
                <li><a href="#architecture">1Ô∏è‚É£ Architecture Conceptuelle Fondamentale</a></li>
                <li><a href="#mecanismes">2Ô∏è‚É£ M√©canismes Internes D√©taill√©s</a></li>
                <li><a href="#protocoles">3Ô∏è‚É£ Protocoles, Couches et Services</a></li>
                <li><a href="#illusions">4Ô∏è‚É£ Erreurs Conceptuelles Majeures</a></li>
                <li><a href="#raisonnement">5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert</a></li>
                <li><a href="#synthese">6Ô∏è‚É£ Synth√®se M√©morisable Long Terme</a></li>
                <li><a href="#extension">7Ô∏è‚É£ Extension au-del√† de NetAcad (500%+)</a></li>
                <li><a href="#objectifs">üéØ Objectifs Cognitifs Finaux</a></li>
            </ul>
        </aside>

        <main id="content">
            <!-- Section Analogie -->
            <section id="analogie" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Analogie Centrale</span>
                    <h2>üß† Analogie Syst√©mique Ma√Ætre : L'Archipel Logistique Interconnect√©</h2>
                </div>
                <p>Imaginez un archipel de plusieurs √Æles industrielles sp√©cialis√©es (les VLANs). Chaque √Æle produit des marchandises sp√©cifiques dans son port int√©rieur s√©curis√© (domaine de broadcast). Pour que l'√©conomie de l'archipel prosp√®re, ces marchandises doivent s'√©changer. Cependant, aucun pont direct ne relie les √Æles entre elles.</p>
                <div class="analogy-box">
                    <p><strong>√éle Industrielle ‚Üí VLAN</strong> : Zone de production isol√©e avec ses propres r√®gles (adressage IP). Les docks de l'√Æle sont les <span class="concept-key">ports d'acc√®s</span> du commutateur.</p>
                    <p><strong>Cargaison ‚Üí Paquet IP</strong> : Le contenu √† transporter. L'√©tiquette de destination est l'adresse IP.</p>
                    <p><strong>Conteneur Maritime ‚Üí Trame Ethernet</strong> : L'emballage standard pour le transport. L'√©tiquette sur le conteneur est l'<span class="concept-key">adresse MAC</span>. Le code de l'√Æle d'origine/destination est le <span class="concept-key">tag VLAN (802.1Q)</span>.</p>
                    <p><strong>Barge de Liaison (Lien Unique) ‚Üí Router-on-a-Stick</strong> : Une seule barge fait la navette entre chaque √Æle et le HUB. Elle transporte les conteneurs de *toutes* les √Æles, un √† un. <strong>Goulot d'√©tranglement √©vident.</strong></p>
                    <p><strong>Portique de Tri Intelligent (HUB) ‚Üí P√©riph√©rique L3</strong> :
                        <ul>
                            <li><strong>Mode "A quai par √Æle" (Routage Legacy)</strong> : Le HUB poss√®de un quai d√©di√© par √Æle. Co√ªteux en infrastructures, mais d√©bit garanti par quai.</li>
                            <li><strong>Mode "Terminal √† sous-voies" (ROAS)</strong> : Le HUB n'a qu'un seul grand quai. Les barges y accostent. Un syst√®me de sous-voies (<span class="concept-key">G0/0.10, .20</span>) √† l'int√©rieur du terminal trie les conteneurs par code √Æle (tag VLAN).</li>
                            <li><strong>Mode "Centre de Tri Automatique Int√©gr√©" (Commutateur Multicouche)</strong> : Le HUB n'existe plus en tant qu'entit√© s√©par√©e. Chaque √Æle est √©quip√©e d'un <strong>portique intelligent int√©gr√© (SVI)</strong> qui conna√Æt instantan√©ment la destination de chaque conteneur et l'envoie via un r√©seau de convoyeurs souterrains ultra-rapides (ASIC) directement vers l'√Æle destinataire. <strong>Performance maximale, co√ªt d'infrastructure √©lev√©.</strong></li>
                        </ul>
                    </p>
                    <p><strong>Canal de Contr√¥le HUB-√éles ‚Üí Protocoles de D√©couverte/Gestion</strong> : Syst√®me radio qui permet au HUB de savoir quelles √Æles sont actives et quelles marchandises elles attendent (ARP, Tables de Routage).</p>
                    <p><strong>Erreur de Code √éle (Mauvaise encapsulation 802.1Q)</strong> : Un conteneur √©tiquet√© "√éle Aci√©rie (VLAN 10)" est envoy√© sur le convoyeur de "l'√éle Agro-alimentaire (VLAN 20)". La cargaison est perdue.</p>
                </div>
            </section>

            <!-- Section Mod√®le Mental -->
            <section id="modele-mental" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Sch√©ma Directeur</span>
                    <h2>üß© Mod√®le Mental Global du Syst√®me : L'√âcosyst√®me de Segmentation et d'Interconnexion</h2>
                </div>
                <p>Le routage inter-VLAN n'est pas une fonction isol√©e, mais un <strong>syst√®me m√©tabolique</strong> dans l'organisme r√©seau. Il transforme un amas de segments ind√©pendants (VLANs) en un tissu interconnect√© capable d'√©changes complexes.</p>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    subgraph ‚ÄúCouche 2 : S√©gr√©gation (Le Terrain)‚Äù
        A[VLAN 10&lt;br/&gt;Domaine Broadcast&lt;br/&gt;192.168.10.0/24] -- Port Acc√®s --> SW[Commutateur L2&lt;br/&gt;Table MAC par VLAN];
        B[VLAN 20&lt;br/&gt;Domaine Broadcast&lt;br/&gt;192.168.20.0/24] -- Port Acc√®s --> SW;
    end

    subgraph ‚ÄúCouche 3 : Interconnexion (Le Cerveau & Le Syst√®me Sanguin)‚Äù
        SW -- Tag 802.1Q VLAN 10 --> L3[Processeur de Routage L3];
        SW -- Tag 802.1Q VLAN 20 --> L3;

        L3 -- D√©cision via --> RT[Table de Routage&lt;br/&gt;- 192.168.10.0/24 ‚Üí Vlanif10&lt;br/&gt;- 192.168.20.0/24 ‚Üí Vlanif20];
        L3 -- R√©solution d'adjacence --> ARP[Table ARP&lt;br/&gt;- IP ‚Üî MAC de Passerelle];

        L3 -- Nouvelle Trame pour VLAN 20 --> SW;
    end

    SW -- Trame VLAN 20 --> B;

    C[Client VLAN10&lt;br/&gt;IP: 192.168.10.5&lt;br/&gt;GW: 192.168.10.1] --> A;
    D[Client VLAN20&lt;br/&gt;IP: 192.168.20.5&lt;br/&gt;GW: 192.168.20.1] --> B;

    style A fill:#e1f5fe
    style B fill:#f3e5f5
    style L3 fill:#fff3e0
    style RT fill:#f1f8e9
                    </div>
                </div>
                <h3>Causalit√©s Fondamentales du Syst√®me :</h3>
                <ol>
                    <li><strong>Si</strong> un h√¥te veut parler √† une IP hors de son sous-r√©seau, <strong>alors</strong> il envoie la trame √† l'adresse MAC de sa <span class="concept-key">passerelle par d√©faut</span>.</li>
                    <li><strong>Si</strong> la passerelle est une interface L3 active (<code>up/up</code>), <strong>alors</strong> elle d√©pouille la trame, consulte sa <span class="concept-key">table de routage</span>.</li>
                    <li><strong>Si</strong> une route existe vers le r√©seau de destination, <strong>alors</strong> le processeur L3 cherche l'adresse MAC de l'h√¥te cible (ARP).</li>
                    <li><strong>Si</strong> l'adresse MAC cible est connue, <strong>alors</strong> le paquet est r√©-encapsul√© dans une <span class="concept-key">nouvelle trame</span> pour le VLAN de destination et inject√© dans le syst√®me.</li>
                    <li><strong>Si</strong> une de ces conditions √©choue (VLAN inexistant, SVI down, pas de route, √©chec ARP), <strong>alors</strong> l'√©change est rompu. La panne est syst√©mique, pas al√©atoire.</li>
                </ol>
            </section>

            <!-- Section Architecture -->
            <section id="architecture" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fondamentaux</span>
                    <h2>1Ô∏è‚É£ Architecture Conceptuelle Fondamentale : La Fonction Critique de Passerelle</h2>
                </div>
                <p>Le routage inter-VLAN est la <strong>fonction de passerelle par d√©faut mat√©rialis√©e et multipli√©e</strong>. Il se situe au point de rupture entre deux paradigmes :</p>
                <ul>
                    <li><strong>Le paradigme de la commutation (L2)</strong> : "Je connais cette adresse MAC locale, je l'envoie directement." (Forwarding bas√© sur la table CAM/MAC).</li>
                    <li><strong>Le paradigme du routage (L3)</strong> : "Cette adresse IP n'est pas locale, je l'envoie √† mon routeur pour qu'il trouve le chemin." (Forwarding bas√© sur la table de routage).</li>
                </ul>

                <h3>Positionnement dans la pile protocolaire :</h3>
                <ul>
                    <li><strong>Mod√®le OSI</strong> : Il op√®re √† la <span class="concept-key">couche 3 (R√©seau)</span>, mais son *trigger* est un √©chec √† la <span class="concept-key">couche 2 (Liaison)</span>. Il consomme des trames L2 (Ethernet + 802.1Q) et produit de nouvelles trames L2.</li>
                    <li><strong>Mod√®le TCP/IP</strong> : C'est une fonction du <span class="concept-key">couche Internet (IP)</span>. L'interface de passerelle (SVI, sous-interface) est une entit√© IP √† part enti√®re.</li>
                    <li><strong>Fronti√®res</strong> : Son domaine s'arr√™te l√† o√π commence le routage IP g√©n√©ral. Il ne s'occupe pas des routes vers Internet (BGP) ou des protocoles de routage dynamique complexes (OSPF, EIGRP), bien qu'il puisse les supporter.</li>
                </ul>

                <h3>Relations syst√©miques critiques :</h3>
                <ul>
                    <li><strong>Avec STP (Spanning Tree)</strong> : Une boucle L2 peut rendre un VLAN inaccessible, mettant <em>down</em> son SVI. Le routage L3 d√©pend de la stabilit√© L2.</li>
                    <li><strong>Avec DHCP</strong> : Les passerelles SVI sont souvent les relais DHCP (<code>ip helper-address</code>) pour les clients de leurs VLANs.</li>
                    <li><strong>Avec la s√©curit√© (ACLs)</strong> : Les SVI et sous-interfaces sont les points d'application privil√©gi√©s des ACLs pour filtrer le trafic <strong>Est-Ouest</strong> (inter-VLAN).</li>
                </ul>
            </section>

            <!-- Section M√©canismes -->
            <section id="mecanismes" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fonctionnement Causal</span>
                    <h2>2Ô∏è‚É£ M√©canismes Internes D√©taill√©s : La Danse des Trames et des Paquets</h2>
                </div>
                <p><strong>S√©quence d√©taill√©e d'un √©change inter-VLAN (VLAN 10 ‚Üí VLAN 20) :</strong></p>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    subgraph ‚Äú√âtape 1 : √âmission H√¥te Source (L2 Decision)‚Äù
        A[PC1: 192.168.10.5] -- ‚ÄúDest IP 192.168.20.5&lt;br/&gt;hors de mon sous-r√©seau‚Äù --> B[‚ÄúEnvoi √† la GW MAC&lt;br/&gt;(ARP pour 192.168.10.1)‚Äù];
    end

    subgraph ‚Äú√âtape 2 : Commutation vers la Passerelle (L2 Forwarding)‚Äù
        B --> C[Comm. L2&lt;br/&gt;Port Acc√®s VLAN10];
        C -- ‚ÄúTrame untagged&lt;br/&gt;Port ‚Üí MAC de GW‚Äù --> D[‚ÄúVers Port Trunk /&lt;br/&gt;Port Rout√©‚Äù];
    end

    subgraph ‚Äú√âtape 3 : Traitement Couche 3 (Routing Decision & Rewrite)‚Äù
        D -- ‚ÄúTrame arrive sur&lt;br/&gt;Interface L3 (SVI10/.10)‚Äù --> E[Processeur L3];
        E -- ‚ÄúD√©pouillage L2,&lt;br/&gt;Extraction Paquet IP‚Äù --> F{‚ÄúLookup Table&lt;br/&gt;de Routage‚Äù};
        F -- ‚ÄúR√©seau 192.168.20.0/24&lt;br/&gt;‚Üí SVI20 /.20‚Äù --> G;
        G[‚ÄúR√©-encapsulation L2:&lt;br/&gt;Src MAC: MAC de SVI20&lt;br/&gt;Dst MAC: MAC de PC2 (ARP)&lt;br/&gt;Tag: VLAN 20‚Äù] --> H;
    end

    subgraph ‚Äú√âtape 4 : R√©injection et Livraison (L2 Forwarding √† nouveau)‚Äù
        H[Nouvelle Trame Tagged VLAN20] --> I[Comm. L2];
        I -- ‚ÄúCommutation vers&lt;br/&gt;Port Acc√®s de PC2‚Äù --> J[PC2: 192.168.20.5];
    end

    style A fill:#bbdefb
    style J fill:#d1c4e9
    style E fill:#ffecb3
                    </div>
                </div>

                <h3>Points d'√©chec critiques (Conditions de validit√©) :</h3>
                <ol>
                    <li><strong>VLAN inexistant sur le commutateur</strong> : La trame de PC1 est drop√©e par le commutateur avant m√™me d'atteindre la passerelle.</li>
                    <li><strong>SVI ou sous-interface <code>administratively down</code></strong> : La passerelle est "ferm√©e". Le trafic L2 arrive, mais l'entit√© L3 ne le traite pas.</li>
                    <li><strong>Absence de route dans la table de routage</strong> : "Network not in table". Le processeur L3 ne sait pas o√π envoyer le paquet, il le drop.</li>
                    <li><strong>√âchec de r√©solution ARP pour l'h√¥te cible</strong> : Le processeur L3 sait vers quel r√©seau router, mais ne conna√Æt pas l'adresse MAC pr√©cise de l'h√¥te dans ce VLAN. Il envoie une requ√™te ARP et peut <em>temporellement</em> dropper le paquet.</li>
                    <li><strong>Lien Trunk mal configur√© (VLANs non autoris√©s)</strong> : La trame tagged est filtr√©e par le commutateur avant d'atteindre le routeur (ROAS) ou apr√®s en √™tre sortie.</li>
                </ol>
            </section>

            <!-- Section Protocoles -->
            <section id="protocoles" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√âl√©ments du Syst√®me</span>
                    <h2>3Ô∏è‚É£ Protocoles, Couches et Services (Exhaustif)</h2>
                </div>

                <h3>A. Les Trois Arch√©types Mat√©riels (Couches 1-3)</h3>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    subgraph ‚ÄúRoutage Legacy‚Äù
        L1[VLAN10] -- Acc√®s --> P1[Port Physique G0/0];
        L2[VLAN20] -- Acc√®s --> P2[Port Physique G0/1];
        P1 & P2 --> R[Routeur];
        style R fill:#ffccbc
    end

    subgraph ‚ÄúRouter-on-a-Stick (ROAS)‚Äù
        L3[VLAN10] -- Acc√®s --> SW1[Commutateur L2];
        L4[VLAN20] -- Acc√®s --> SW1;
        SW1 -- Trunk (VLAN10,20) --> P3[Port Unique G0/0];
        P3 --> SR[Routeur];
        SR -.-> SI1[Sous-Interface .10];
        SR -.-> SI2[Sous-Interface .20];
        style SR fill:#c8e6c9
        style SI1 stroke-dasharray: 5 5
        style SI2 stroke-dasharray: 5 5
    end

    subgraph ‚ÄúCommutateur Multicouche (L3 Switch)‚Äù
        L5[VLAN10] -- Acc√®s --> SW2[Commutateur L3];
        L6[VLAN20] -- Acc√®s --> SW2;
        SW2 -.-> SVI1[Interface Virtuelle Vlan10];
        SW2 -.-> SVI2[Interface Virtuelle Vlan20];
        SVI1 -- Routage via ASIC --> SVI2;
        style SW2 fill:#bbdefb
        style SVI1 stroke-dasharray: 5 5
        style SVI2 stroke-dasharray: 5 5
    end
                    </div>
                </div>
                <p><strong>Comparatif des Arch√©types :</strong></p>
                <ul>
                    <li><span class="concept-key">Routage Legacy (Physique)</span> : 1 VLAN = 1 Lien Physique. Simplicit√©, d√©bit d√©di√©, mais <strong>non √©volutif</strong>.</li>
                    <li><span class="concept-key">Router-on-a-Stick (ROAS)</span> : N VLANs = 1 Lien (Trunk) + N Sous-Interfaces. √âconomie de ports, mais <strong>goulot d'√©tranglement</strong> sur le lien partag√©.</li>
                    <li><span class="concept-key">Commutateur Multicouche (L3 Switch)</span> : Routage interne via <strong>SVI (Switched Virtual Interface)</strong> par VLAN ou <strong>Ports Rout√©s</strong> (<code>no switchport</code>). Performance (ASIC) et √©volutivit√© maximales, mais <strong>co√ªt</strong> plus √©lev√©.</li>
                </ul>

                <h3>B. Le Protocole Cl√© : IEEE 802.1Q (Couche 2)</h3>
                <ul>
                    <li><strong>Objectif</strong> : Transporter l'appartenance √† un VLAN sur un lien unique (trunk).</li>
                    <li><strong>M√©canisme</strong> : Ins√®re un <span class="concept-key">tag de 4 octets</span> entre l'adresse MAC source et le champ Type/Length de la trame Ethernet.</li>
                    <li><strong>Champ critique : VID (VLAN Identifier)</strong> : <strong>12 bits identifiant le VLAN (1-4094)</strong>. C'est ce num√©ro r√©f√©renc√© dans <code>encapsulation dot1Q &lt;vid&gt;</code>.</li>
                    <li><strong>VLAN Natif (Native VLAN)</strong> : VLAN dont le trafic traverse le trunk <strong>sans tag</strong>. Configur√© avec le mot-cl√© <code>native</code>. <span class="concept-key">Erreur de s√©curit√© classique</span> : mismatch de VLAN natif entre les deux extr√©mit√©s du trunk.</li>
                </ul>

                <h3>C. Les Services de D√©couverte et de Maintenance (Couches 2-3)</h3>
                <ul>
                    <li><span class="concept-key">ARP (Address Resolution Protocol)</span> : <strong>Absolument critique</strong>. La passerelle doit faire du <strong>proxy ARP</strong> pour les h√¥tes d'autres VLANs. <code>show arp</code> est un outil de diagnostic vital.</li>
                    <li><span class="concept-key">Table de Routage</span> : Doit contenir les r√©seaux directement connect√©s de chaque SVI/sous-interface. Une route statique ou dynamique n'est <strong>pas</strong> n√©cessaire pour le routage inter-VLAN de base.</li>
                </ul>
            </section>

            <!-- Section Illusions -->
            <section id="illusions" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Pi√®ges √† √âviter</span>
                    <h2>4Ô∏è‚É£ Erreurs Conceptuelles Majeures (Illusions Cognitives)</h2>
                </div>

                <div class="illusion-box">
                    <h4>Illusion 1 : "Le routage inter-VLAN, c'est juste configurer des IP sur diff√©rentes interfaces."</h4>
                    <p><strong>Racine de l'illusion</strong> : Confusion entre <em>interfaces r√©seau IP</em> et <em>interfaces de routage inter-VLAN</em>.</p>
                    <p><strong>Explication</strong> : L'essence est la <span class="concept-key">mapping 1:1 entre une entit√© L3 (SVI/sous-interface) et un domaine de broadcast L2 (VLAN ID)</span>. L'IP est une cons√©quence, pas la d√©finition.</p>
                    <p><strong>Cons√©quence de l'erreur</strong> : Tentative de configurer deux SVIs pour le m√™me VLAN, ou d'assigner une IP √† un port d'acc√®s L2.</p>
                </div>

                <div class="illusion-box">
                    <h4>Illusion 2 : "Une SVI <code>interface Vlan10</code> est juste un alias pour un groupe de ports."</h4>
                    <p><strong>Racine de l'illusion</strong> : Pens√©e trop "commutatrice". On voit le VLAN comme un ensemble de ports.</p>
                    <p><strong>Explication</strong> : Une <span class="concept-key">SVI est une entit√© de couche 3 autonome</span>. Son √©tat <code>up/up</code> d√©pend que 1) le VLAN existe, et 2) <strong>au moins un port L2 dans ce VLAN est <code>up/up</code></strong>. C'est un point de terminaison de routage qui <em>d√©pend</em> de la sant√© L2 sous-jacente.</p>
                    <p><strong>Cons√©quence de l'erreur</strong> : Ne pas comprendre pourquoi une SVI reste <code>down/down</code> alors que le VLAN est configur√©.</p>
                </div>

                <div class="illusion-box">
                    <h4>Illusion 3 : "<code>no switchport</code> rend un port 'plus intelligent' pour faire du trunking avanc√©."</h4>
                    <p><strong>Racine de l'illusion</strong> : Association du mot "switch" √† VLAN/trunk. <code>no switchport</code> semble d√©sactiver une limitation.</p>
                    <p><strong>Explication</strong> : <code>no switchport</code> effectue une <span class="concept-key">m√©tamorphose de couche</span>. Le port passe du monde <strong>L2</strong> (commutation, VLANs) au monde <strong>L3</strong> (routage, adresse IP directe). Il devient une interface de routeur. Il ne comprend plus les tags 802.1Q.</p>
                    <p><strong>Cons√©quence de l'erreur</strong> : Erreur de syntaxe en essayant de configurer <code>encapsulation dot1Q</code> sur un port en <code>no switchport</code>.</p>
                </div>

                <div class="illusion-box">
                    <h4>Illusion 4 : "Le goulot d'√©tranglement de ROAS, c'est le CPU du routeur."</h4>
                    <p><strong>Racine de l'illusion</strong> : On sait que le routage est CPU-intensive sur les routeurs logiciels.</p>
                    <p><strong>Explication</strong> : Le vrai goulot d'√©tranglement est <span class="concept-key">la bande passante du lien physique unique</span>. M√™me avec un CPU rapide, si le lien trunk est 1 Gbps, la somme de tout le trafic inter-VLAN ne peut d√©passer 1 Gbps. C'est une limite <strong>physique</strong>.</p>
                    <p><strong>Cons√©quence de l'erreur</strong> : Croire qu'am√©liorer le routeur r√©soudra les probl√®mes de performance. Il faut augmenter la bande passante du lien (LAG) ou passer √† un commutateur L3.</p>
                </div>
            </section>

            <!-- Section Raisonnement -->
            <section id="raisonnement" class="module-section">
                <div class="section-header">
                    <span class="section-tag">M√©thode Expert</span>
                    <h2>5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert : La Pens√©e Syst√©mique Appliqu√©e</h2>
                </div>
                <p>Un expert ne voit pas des commandes, il voit des <strong>flux, des √©tats et des d√©pendances</strong>.</p>

                <h3>1. La M√©thode Diagnostique "Causal Stack" :</h3>
                <ol>
                    <li><strong>Niveau 0 (Physique)</strong> : Le c√¢ble est branch√© ? Les LEDs sont vertes ? <code>show interfaces status</code></li>
                    <li><strong>Niveau 1 (Connexion L2 - VLAN)</strong> : Le port est-il dans le bon mode (acc√®s/trunk) ? Le VLAN existe-t-il ? <code>show interfaces switchport</code>, <code>show vlan</code></li>
                    <li><strong>Niveau 2 (Connexion L3 - Passerelle)</strong> : L'interface L3 (SVI/.10) est-elle <code>up/up</code> ? A-t-elle une IP ? <code>show ip interface brief</code>, <code>show interfaces vlan 10</code></li>
                    <li><strong>Niveau 3 (√âtat du R√©seau - Routes)</strong> : La route vers le r√©seau distant est-elle dans la table ? <code>show ip route</code></li>
                    <li><strong>Niveau 4 (R√©solution des Adresses - ARP)</strong> : La passerelle conna√Æt-elle l'adresse MAC de l'h√¥te destination ? <code>show arp</code></li>
                    <li><strong>Niveau 5 (S√©curit√© - ACLs/Firewall)</strong> : Une ACL bloque-t-elle le trafic ? <code>show access-lists</code>, <code>show run interface vlan 10</code></li>
                </ol>
                <p><strong>R√®gle d'or</strong> : Ne passez pas au niveau N+1 tant que le niveau N n'est pas valid√©.</p>

                <h3>2. Pens√©e "Co√ªt/B√©n√©fice Architectural" :</h3>
                <p><strong>Sc√©nario</strong> : "Nous avons 10 VLANs avec un trafic inter-VLAN mod√©r√© (web, email)."</p>
                <ul>
                    <li><strong>ROAS</strong> : B√©n√©fice (co√ªt bas, configuration simple). Co√ªt (limite future, goulot d'√©tranglement latent). <strong>Verdict</strong> : Acceptable pour le pr√©sent, risque futur.</li>
                    <li><strong>Commutateur L3</strong> : B√©n√©fice (performance, √©volutivit√©, gestion centralis√©e). Co√ªt (investissement initial). <strong>Verdict</strong> : D√©cision strat√©gique pour l'avenir.</li>
                </ul>
                <p>L'expert quantifie le trafic, anticipe la croissance, et choisit en connaissance de cause.</p>

                <h3>3. Compr√©hension des "Modes d'√âchec" :</h3>
                <ul>
                    <li>Une <strong>panne de STP</strong> peut isoler un VLAN et faire tomber sa SVI.</li>
                    <li>Une <strong>ACL mal appliqu√©e sur une SVI</strong> bloquera tout le trafic inter-VLAN pour ce VLAN.</li>
                    <li><strong>L'asym√©trie de routage</strong> (un flux qui part par un chemin et revient par un autre o√π le VLAN n'existe pas) casse la communication.</li>
                </ul>
                <p>L'expert pense toujours en <strong>boucles de trafic compl√®tes (aller-retour)</strong>, pas en chemins unidirectionnels.</p>
            </section>

            <!-- Section Synth√®se -->
            <section id="synthese" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√Ä Retenir Absolument</span>
                    <h2>6Ô∏è‚É£ Synth√®se M√©morisable Long Terme</h2>
                </div>

                <h3>Les 5 Lois Immuables du Routage Inter-VLAN :</h3>
                <div class="law-box">
                    <p>1. <strong>Loi de la Mat√©rialisation de la Passerelle</strong> : "Un VLAN sans interface L3 active est une √Æle sans port. Il peut communiquer en interne, mais jamais avec le monde ext√©rieur."</p>
                    <p>2. <strong>Loi de la D√©pendance Ascendante</strong> : "La couche 3 repose sur la couche 2. Une SVI <code>down</code> est souvent le sympt√¥me d'un probl√®me de VLAN ou de port <code>down</code>."</p>
                    <p>3. <strong>Loi de la Conservation de la Bande Passante (ROAS)</strong> : "La somme des d√©bits inter-VLAN ne peut exc√©der la capacit√© du lien trunk. C'est une loi physique, pas configurable."</p>
                    <p>4. <strong>Loi de l'√âquivalence Logique</strong> : "Aux yeux du paquet IP, une SVI, une sous-interface et une interface physique sont toutes des *passerelles*. La diff√©rence est de performance et d'√©chelle, pas de logique."</p>
                    <p>5. <strong>Loi du Diagnostic S√©quentiel</strong> : "Du c√¢ble √† la politique, parcourez les couches dans l'ordre. Le temps perdu √† sauter des √©tapes est toujours sup√©rieur au temps de les v√©rifier."</p>
                </div>

                <h3>√âquations Mentales :</h3>
                <div class="equation-box">
                    <p><strong>Communication Inter-VLAN = (VLAN_A actif) + (Passerelle_A `up/up`) + (Route vers VLAN_B) + (Passerelle_B `up/up`) + (VLAN_B actif)</strong></p>
                    <p><strong>Performance = Bande Passante Disponible / Nombre de Sauts L3</strong></p>
                    <p><strong>S√©curit√© Inter-VLAN = Contr√¥le aux Passerelles (ACLs sur SVI) + Bonne Hygi√®ne L2 (VLAN Natif s√©curis√©)</strong></p>
                </div>

                <h3>Retour √† l'Analogie (L'Archipel) :</h3>
                <div class="analogy-box">
                    <p>Pour d√©panner, demandez-vous : La cargaison (paquet) quitte-t-elle bien l'√Æle source (VLAN actif, port acc√®s) ? La barge/convoyeur (trunk/ASIC) fonctionne-t-il ? Le centre de tri (p√©riph√©rique L3) re√ßoit-il la cargaison (SVI/interface `up`) ? Conna√Æt-il la destination (table de routage) ? A-t-il un moyen de l'acheminer (ARP, lien sortant) ? L'√Æle destination l'accepte-t-elle (VLAN actif, port acc√®s) ?</p>
                </div>
            </section>

            <!-- Section Extension -->
            <section id="extension" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Perspectives</span>
                    <h2>7Ô∏è‚É£ Extension au-del√† de NetAcad (500%+) : Le Monde R√©el de l'Ing√©nierie R√©seau</h2>
                </div>

                <h3>1. VLAN de Management et Routage Hi√©rarchique :</h3>
                <p>Dans un r√©seau d'entreprise, le routage inter-VLAN n'est pas plat. Un <span class="concept-key">VLAN de Management (ex: VLAN 999)</span> existe pour les p√©riph√©riques r√©seau. Les SVIs des VLAN utilisateurs font souvent du <strong>routage hi√©rarchique</strong> : leur passerelle par d√©faut pointe vers une <strong>SVI centrale sur un commutateur c≈ìur (core switch)</strong>, cr√©ant une topologie en <strong>couches (Core-Distribution-Access)</strong>.</p>

                <h3>2. First-Hop Redundancy Protocol (FHRP) : HSRP, VRRP, GLBP :</h3>
                <p>Une seule passerelle SVI est un <strong>Single Point of Failure</strong>. Les FHRP permettent √† deux commutateurs multicouches de simuler une <span class="concept-key">passerelle virtuelle unique</span>. Les h√¥tes configurent cette IP virtuelle comme GW. Le routage inter-VLAN devient <strong>haute disponibilit√©</strong>.</p>

                <h3>3. Routage Inter-VLAN Distribu√© (Cisco Catalyst avec StackWise/VDL) :</h3>
                <p>Dans un ch√¢ssis ou un stack, le routage peut √™tre <strong>distribu√©</strong> sur toutes les cartes de ligne. La carte d'entr√©e fait elle-m√™me le lookup et r√©injecte le trafic, √©liminant tout goulot central et scalant lin√©airement.</p>

                <h3>4. Micro-Segmentation et S√©curit√© Zero-Trust :</h3>
                <p>Tendance moderne : <strong>micro-segmentation</strong> (un VLAN par application). Le routage inter-VLAN devient le <span class="concept-key">choke point</span> parfait pour appliquer une politique <strong>Zero-Trust</strong>. Des ACLs granulaires ou un <strong>firewall interne</strong> inspectent <strong>tout</strong> le trafic Est-Ouest. L'administrateur expert ne voit plus le routage comme une simple connectivit√©, mais comme l'<strong>√©pine dorsale de la politique de s√©curit√© interne</strong>.</p>

                <h3>5. Automatisation et Infrastructure as Code (IaC) :</h3>
                <p>L'expert moderne utilise <strong>Ansible, Terraform, Python</strong> pour g√©n√©rer de fa√ßon idempotente la configuration des SVI, v√©rifier la coh√©rence, et rendre le r√©seau pr√©visible, reproductible et document√©. Le routage inter-VLAN devient une <strong>d√©claration d'√©tat</strong> dans un fichier YAML/JSON.</p>
            </section>

            <!-- Section Objectifs -->
            <section id="objectifs" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Finalit√©</span>
                    <h2>üéØ Objectifs Cognitifs Finaux ‚Äì Administrateur R√©seau √âlite</h2>
                </div>
                <div class="cognitive-objectives">
                    <p>Ce module a transform√© un ensemble de QCM en une <strong>cartographie compl√®te de l'√©cosyst√®me du routage inter-VLAN</strong>, de ses m√©canismes atomiques √† ses implications architecturales et s√©curitaires les plus avanc√©es.</p>
                    <p>Vous ne savez pas seulement "configurer ROAS", vous comprenez <strong>pourquoi, quand et √† quel prix</strong> le choisir, et comment le faire √©voluer vers des architectures d'entreprise robustes, s√©curis√©es et automatis√©es.</p>
                    <br>
                    <h3>Vous devez pouvoir dire, sans h√©sitation :</h3>
                    <ul>
                        <li>¬´ Je ma√Ætrise les trois arch√©types mat√©riels et leurs compromis performance/co√ªt/√©volutivit√©. ¬ª</li>
                        <li>¬´ Je peux tracer et expliquer la s√©quence compl√®te de r√©-encapsulation L2/L3 d'un paquet inter-VLAN. ¬ª</li>
                        <li>¬´ Je diagnostique une panne avec la m√©thode "Causal Stack", du c√¢ble √† la politique de s√©curit√©. ¬ª</li>
                        <li>¬´ Je comprends les d√©pendances critiques entre STP, les VLANs, les SVIs et le routage. ¬ª</li>
                        <li>¬´ Je con√ßois des solutions de routage inter-VLAN en pensant √† la haute disponibilit√© (FHRP) et √† la s√©curit√© (micro-segmentation). ¬ª</li>
                        <li>¬´ Je vois le routage inter-VLAN comme un service fondamental, pivot de la s√©curit√© Est-Ouest et de l'automatisation r√©seau. ¬ª</li>
                        <li>¬´ Je pense en syst√®mes et en causalit√©, pas en configurations isol√©es. ¬ª</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <footer class="page-footer">
        <p>Module Acad√©mique Routage Inter-VLAN ‚Äî Reconstruction pour la Ma√Ætrise Expert</p>
        <p>¬© Format p√©dagogique HTML ‚Äî Contenu fig√© et valid√©.</p>
    </footer>

    <script>
        // Script pour la navigation mobile et le suivi des sections actives
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-btn');
            const mainMenu = document.getElementById('main-menu');
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            const mainNavLinks = document.querySelectorAll('.nav-menu a');

            // Gestion du menu hamburger
            hamburger.addEventListener('click', function() {
                mainMenu.classList.toggle('active');
            });

            // Fermer le menu mobile en cliquant sur un lien
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (mainMenu.classList.contains('active')) {
                        mainMenu.classList.remove('active');
                    }
                });
            });

            // Suivi de la section active (scroll)
            const sections = document.querySelectorAll('.module-section');
            const navLi = document.querySelectorAll('.sidebar-nav a, .nav-menu a');

            function setActiveSection() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 150;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLi.forEach(li => {
                    li.classList.remove('active', 'active-section');
                    if (li.getAttribute('href') === `#${current}`) {
                        li.classList.add('active', 'active-section');
                    }
                });
            }

            window.addEventListener('scroll', setActiveSection);
            // Initialiser l'√©tat actif au chargement
            setActiveSection();
        });
    </script>
</body>
</html>