<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Acad√©mique : Syst√®mes de R√©seau √† Commutation Virtuelle (VLAN)</title>
    <!-- Int√©gration de Mermaid pour les diagrammes -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true, theme:'neutral'});</script>
    <!-- Styles CSS -->
    <style>
        /* D√©finition des polices et variables */
        :root {
            --color-primary: #1a365d; /* Bleu fonc√© pour les titres */
            --color-secondary: #2d3748; /* Gris fonc√© pour sous-titres */
            --color-accent: #2b6cb0; /* Bleu accent pour concepts cl√©s */
            --color-law: #c53030; /* Rouge pour les lois mentales */
            --color-illusion: #b7791f; /* Or pour illusions conceptuelles */
            --color-background: #ffffff;
            --color-surface: #f7fafc;
            --color-border: #e2e8f0;
            --font-heading: 'Space Grotesk', 'Segoe UI', system-ui, sans-serif;
            --font-body: 'Source Sans 3', 'Inter', 'Open Sans', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-secondary);
            background-color: var(--color-background);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a {
            color: var(--color-accent);
            text-decoration: none;
        }

        /* Header */
        .page-header {
            background-color: var(--color-primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 5px solid var(--color-accent);
        }

        .page-header h1 {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation principale */
        #main-nav {
            background-color: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-weight: bold;
            color: var(--color-primary);
            font-size: 1.5rem;
            padding: 1rem 0;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--color-secondary);
            font-weight: 600;
            padding: 1rem 0;
            display: block;
            position: relative;
            transition: color 0.2s;
        }

        .nav-menu a:hover, .nav-menu a:focus {
            color: var(--color-accent);
        }

        .nav-menu a.active {
            color: var(--color-accent);
            border-bottom: 3px solid var(--color-accent);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            height: 3px;
            width: 25px;
            background-color: var(--color-primary);
            border-radius: 2px;
        }

        /* Contenu principal en deux colonnes */
        .main-wrapper {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Sidebar / Navigation lat√©rale */
        #sidebar {
            width: 280px;
            background-color: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: 2rem 1rem;
            position: sticky;
            top: 80px; /* Hauteur de la nav principale */
            align-self: flex-start;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-accent);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            color: var(--color-secondary);
            transition: all 0.2s;
        }

        .sidebar-nav a:hover, .sidebar-nav a:focus, .sidebar-nav a.active-section {
            background-color: rgba(43, 108, 176, 0.1);
            color: var(--color-accent);
            font-weight: 600;
        }

        /* Zone de contenu principal */
        #content {
            flex: 1;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .module-section {
            margin-bottom: 4rem;
            scroll-margin-top: 100px;
            background-color: white;
            border-radius: 8px;
            padding: 2.5rem;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .section-tag {
            display: inline-block;
            background-color: var(--color-accent);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        /* Styles typographiques sp√©cifiques */
        h3 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-secondary);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h4 {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-secondary);
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        p, ul, ol {
            margin-bottom: 1.5rem;
        }

        ul, ol {
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* √âl√©ments de mise en forme s√©mantique */
        .analogy-box {
            background-color: rgba(247, 250, 252, 0.8);
            border-left: 4px solid var(--color-accent);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .concept-key {
            color: var(--color-accent);
            font-weight: 700;
            background-color: rgba(43, 108, 176, 0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
        }

        .law-box {
            background-color: rgba(197, 48, 48, 0.05);
            border-left: 4px solid var(--color-law);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .illusion-box {
            background-color: rgba(183, 121, 31, 0.05);
            border-left: 4px solid var(--color-illusion);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .equation-box {
            text-align: center;
            font-family: var(--font-heading);
            font-size: 1.2rem;
            padding: 1.5rem;
            margin: 2rem 0;
            background-color: var(--color-surface);
            border-radius: 8px;
            border: 1px dashed var(--color-border);
        }

        .mermaid-diagram {
            margin: 2rem 0;
            padding: 1rem;
            background-color: white;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            overflow-x: auto;
            text-align: center;
        }

        /* Objectifs cognitifs */
        .cognitive-objectives {
            background: linear-gradient(135deg, var(--color-primary) 0%, #2c5282 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 10px;
            margin: 3rem 0;
        }

        .cognitive-objectives h3 {
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .cognitive-objectives ul {
            list-style: none;
            padding-left: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .cognitive-objectives li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .cognitive-objectives li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }

        /* Footer */
        .page-footer {
            background-color: var(--color-primary);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: auto;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-wrapper {
                flex-direction: column;
            }

            #sidebar {
                width: 100%;
                position: static;
                top: auto;
                max-height: none;
                border-right: none;
                border-bottom: 1px solid var(--color-border);
            }

            .nav-menu {
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--color-surface);
                flex-direction: column;
                padding: 1rem;
                border-top: 1px solid var(--color-border);
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .nav-menu li {
                width: 100%;
            }

            .module-section {
                padding: 1.5rem;
            }

            .page-header h1 {
                font-size: 1.8rem;
            }
        }

        @media print {
            #main-nav, #sidebar, .page-footer, .hamburger {
                display: none;
            }

            .main-wrapper {
                flex-direction: column;
            }

            #content {
                padding: 0;
            }

            .module-section {
                border: none;
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1>üìò Module Acad√©mique : Syst√®mes de R√©seau √† Commutation Virtuelle (VLAN)</h1>
        <p class="subtitle">Reconstruction acad√©mique ultra-approfondie orient√©e ma√Ætrise ‚Äî Formation d'un administrateur r√©seau d'exception (Niveau √âlite)</p>
    </header>

    <nav id="main-nav">
        <div class="nav-container">
            <div class="nav-logo">VLAN Expert</div>
            <div class="hamburger" id="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="main-menu">
                <li><a href="#analogie" class="active">Analogie Ma√Ætre</a></li>
                <li><a href="#modele-mental">Mod√®le Mental</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#mecanismes">M√©canismes</a></li>
                <li><a href="#protocoles">Protocoles & Services</a></li>
                <li><a href="#illusions">Illusions Conceptuelles</a></li>
                <li><a href="#raisonnement">Raisonnement</a></li>
                <li><a href="#synthese">Synth√®se</a></li>
                <li><a href="#extension">Extension</a></li>
                <li><a href="#objectifs">Objectifs</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-wrapper">
        <aside id="sidebar">
            <div class="sidebar-title">Navigation du Module</div>
            <ul class="sidebar-nav">
                <li><a href="#analogie" class="active-section">üß† Analogie Syst√©mique Ma√Ætre</a></li>
                <li><a href="#modele-mental">üß© Mod√®le Mental Global</a></li>
                <li><a href="#architecture">1Ô∏è‚É£ Architecture Conceptuelle Fondamentale</a></li>
                <li><a href="#mecanismes">2Ô∏è‚É£ M√©canismes Internes D√©taill√©s</a>
                    <ul style="margin-left: 1rem; margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><a href="#mecanisme-access">Port d'Acc√®s</a></li>
                        <li><a href="#mecanisme-trunk">Port de Trunk (802.1Q)</a></li>
                    </ul>
                </li>
                <li><a href="#protocoles">3Ô∏è‚É£ Protocoles, Couches et Services</a></li>
                <li><a href="#illusions">4Ô∏è‚É£ Erreurs Conceptuelles Majeures</a></li>
                <li><a href="#raisonnement">5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert</a></li>
                <li><a href="#synthese">6Ô∏è‚É£ Synth√®se M√©morisable Long Terme</a></li>
                <li><a href="#extension">7Ô∏è‚É£ Extension Au-Del√† de NetAcad (500%+)</a></li>
                <li><a href="#objectifs">üéØ Objectifs Cognitifs Finaux</a></li>
            </ul>
        </aside>

        <main id="content">
            <!-- Section Analogie -->
            <section id="analogie" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Analogie Centrale</span>
                    <h2>üß† Analogie Syst√©mique Ma√Ætre</h2>
                </div>
                <p>Imaginez un immeuble de bureaux moderne. Physiquement, il s'agit d'un seul grand b√¢timent. Cependant, il est divis√© en √©tages (VLAN), chacun appartenant √† une soci√©t√© ou un service diff√©rent (service financier, R&D, marketing). Les ascenseurs et les escaliers repr√©sentent les liaisons de trunk, transportant des employ√©s (trames de donn√©es) de tous les √©tages. Le hall d'entr√©e au rez-de-chauss√©e est le *VLAN natif* ‚Äì un espace commun o√π les visiteurs (trames non √©tiquet√©es) peuvent arriver avant d'√™tre dirig√©s vers l'√©tage appropri√©. Les r√®gles de s√©curit√© (politiques du commutateur) emp√™chent les employ√©s du 3√®me √©tage d'acc√©der librement aux bureaux du 10√®me √©tage, m√™me s'ils partagent le m√™me ascenseur.</p>
                <div class="analogy-box">
                    <p><strong>Mapping explicite :</strong></p>
                    <ul>
                        <li><span class="concept-key">√âtage</span> ‚Üí <strong>VLAN</strong></li>
                        <li><span class="concept-key">Ascenseur / Liaison verticale</span> ‚Üí <strong>Port Trunk 802.1Q</strong></li>
                        <li><span class="concept-key">Hall d'entr√©e (Rez-de-chauss√©e)</span> ‚Üí <strong>VLAN Natif</strong></li>
                        <li><span class="concept-key">S√©curit√© d'√©tage (Badges)</span> ‚Üí <strong>Table d'adresses MAC par VLAN / Liste d'acc√®s au port</strong></li>
                        <li><span class="concept-key">Carte du b√¢timent</span> ‚Üí <strong>Base de donn√©es des VLAN (vlan.dat)</strong></li>
                        <li><span class="concept-key">Installation d'un nouvel √©tage</span> ‚Üí <strong>Cr√©ation d'un VLAN</strong></li>
                        <li><span class="concept-key">Fermeture d√©finitive d'un √©tage</span> ‚Üí <strong>Suppression d'un VLAN</strong></li>
                        <li><span class="concept-key">Employ√©s travaillant sur deux √©tages</span> ‚Üí <strong>Serveur avec carte r√©seau 802.1Q / Router-on-a-Stick</strong></li>
                    </ul>
                </div>
            </section>

            <!-- Section Mod√®le Mental -->
            <section id="modele-mental" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Sch√©ma Directeur</span>
                    <h2>üß© Mod√®le Mental Global du Syst√®me</h2>
                </div>
                <p>Le r√©seau local moderne est un syst√®me vivant de segmentation logique. Le commutateur est l'organe central, mais son intelligence r√©side dans sa capacit√© √† cr√©er des univers logiques parall√®les (VLAN) sur une m√™me infrastructure physique. Chaque univers poss√®de ses propres r√®gles de diffusion, sa table d'adressage et ses politiques de s√©curit√©. La sant√© du syst√®me d√©pend de la coh√©rence de la cartographie de ces univers entre les commutateurs (trunking), de l'isolement strict entre eux et de la gestion s√©curis√©e de leur point d'administration.</p>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    A[Infrastructure Physique Unique<br/>Switch / C√¢blage] --> B{Couche de Commutation Logique<br/>Moteur de Commutation + Tables MAC par VLAN};
    B --> C1[VLAN 10<br/>Domaine de Broadcast #1<br/>Table MAC #1];
    B --> C2[VLAN 20<br/>Domaine de Broadcast #2<br/>Table MAC #2];
    B --> C3[VLAN Natif / Gestion];
    C1 --> D1[Ports d'Acc√®s VLAN 10];
    C2 --> D2[Ports d'Acc√®s VLAN 20];
    C3 --> D3[Ports d'Acc√®s/Trunk Sp√©cifiques];

    E[Interconnexion Multi-Switch] --> F[Liaison Trunk 802.1Q<br/>Encapsulation Multi-VLAN];
    F --> B;
    F --> G[Switch Distant];

    C1 -- X --> C2;
    style C1 stroke:#0f0;
    style C2 stroke:#0f0;
    style C3 stroke:#f90;
    linkStyle 9 stroke:#f00,stroke-width:2px,stroke-dasharray: 5 5;
    X[Isolation Absolue<br/>Aucune Communication L2 Directe]
                    </div>
                </div>
                <h4>Causalit√©s cl√©s :</h4>
                <ul>
                    <li><strong>Si</strong> un h√¥te est d√©plac√© physiquement sur un port d'un autre VLAN, <strong>alors</strong> il perd la connectivit√© L2 avec son ancien segment logique.</li>
                    <li><strong>Si</strong> le VLAN natif est mal configur√© et co√Øncide avec un VLAN de donn√©es, <strong>alors</strong> le trafic non √©tiquet√© peut cr√©er des failles de s√©curit√© et des conflits.</li>
                    <li><strong>Si</strong> un VLAN est supprim√© de la base de donn√©es, <strong>alors</strong> tous ses ports assign√©s sont r√©initialis√©s au VLAN par d√©faut (VLAN 1), rompant potentiellement la connectivit√©.</li>
                </ul>
            </section>

            <!-- Section Architecture -->
            <section id="architecture" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fondamentaux</span>
                    <h2>1Ô∏è‚É£ Architecture Conceptuelle Fondamentale</h2>
                </div>
                <p>Les VLAN op√®rent au <strong>niveau de la couche 2 (Liaison de donn√©es)</strong> du mod√®le OSI et correspondent √† la couche <strong>Acc√®s R√©seau</strong> du mod√®le TCP/IP. Ils sont une fonctionnalit√© des <strong>commutateurs (switches)</strong>, pas des routeurs (bien que les routeurs soient essentiels pour l'interconnexion des VLAN). Leur r√¥le est de <strong>substituer la segmentation logique √† la segmentation physique</strong>, cr√©ant des <strong>domaines de broadcast distincts</strong> au sein d'un m√™me domaine de collision (qui est, sur un switch moderne, r√©duit √† chaque port).</p>
                <h4>Fronti√®res et relations :</h4>
                <ul>
                    <li><strong>En amont (Couche 1)</strong> : S'appuient sur une infrastructure physique unique (c√¢bles, fibres, ports du switch).</li>
                    <li><strong>En aval (Couche 3)</strong> : N√©cessitent un routeur (physique ou logique) pour communiquer entre eux. C'est le principe du <strong>routage inter-VLAN</strong>.</li>
                    <li><strong>Interaction avec le Spanning Tree Protocol (STP)</strong> : Chaque VLAN peut avoir sa propre topologie d'arbre pour √©viter les boucles, concept √©voluant vers le <strong>PVST+ (Per-VLAN Spanning Tree+)</strong>.</li>
                </ul>
            </section>

            <!-- Section M√©canismes -->
            <section id="mecanismes" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fonctionnement Causal</span>
                    <h2>2Ô∏è‚É£ M√©canismes Internes D√©taill√©s</h2>
                </div>

                <h3 id="mecanisme-access">Fonctionnement d'un Port d'Acc√®s (Access Port) :</h3>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    A[Trame entrante non √©tiquet√©e] --> B{Port d'Acc√®s VLAN X};
    B --> C[Assignation au VLAN X];
    C --> D[Commutation dans VLAN X];
    D --> E[Trame sortante non √©tiquet√©e];
                    </div>
                </div>
                <ol>
                    <li><strong>Assignation statique</strong> : Un port est configur√© pour appartenir √† un seul VLAN (ex: `switchport mode access`, `switchport access vlan 10`).</li>
                    <li><strong>Traitement des trames entrantes</strong> : Toute trame re√ßue sur ce port est <strong>consid√©r√©e comme appartenant au VLAN assign√©</strong>. Elle est non √©tiquet√©e (untagged).</li>
                    <li><strong>Traitement des trames sortantes</strong> : Les trames destin√©es √† un h√¥te sur ce port sont <strong>transmises sans √©tiquette (tag)</strong>.</li>
                    <li><strong>Condition de validit√©</strong> : Le VLAN assign√© doit exister dans la base de donn√©es du switch.</li>
                </ol>

                <h3 id="mecanisme-trunk">Fonctionnement d'un Port de Trunk (Trunk Port) - 802.1Q :</h3>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    subgraph Switch_A
        A1[Trame pour VLAN 20] --> A2[Ins√®re Tag 802.1Q (VID=20)];
        A3[Trame pour VLAN Natif] --> A4[Laisse non √©tiquet√©e];
    end
    subgraph Liaison_Trunk
        B[Trames mixtes:<br/>Tag 10, Tag 20, Untagged];
    end
    subgraph Switch_B
        C1[Re√ßoit Tag 10] --> C2[Retire Tag, commute VLAN 10];
        C2 --> C2_1[Vers ports VLAN 10];
        C3[Re√ßoit Tag 20] --> C4[Retire Tag, commute VLAN 20];
        C4 --> C4_1[Vers ports VLAN 20];
        C5[Re√ßoit Untagged] --> C6[Associe au VLAN Natif Local];
        C6 --> C6_1[Commute VLAN Natif];
    end
    A2 --> B;
    A4 --> B;
    B --> C1;
    B --> C3;
    B --> C5;
                    </div>
                </div>
                <ol>
                    <li><strong>Encapsulation</strong> : Le port est configur√© pour transporter le trafic de plusieurs VLAN (`switchport mode trunk`).</li>
                    <li><strong>√âtiquetage (Tagging)</strong> : Pour chaque trame devant traverser le trunk, le switch ins√®re un en-t√™te <strong>802.1Q</strong> (4 octets) entre l'en-t√™te Ethernet source et le champ Type. Cet en-t√™te contient notamment le <strong>Tag Protocol Identifier (TPID, 0x8100)</strong> et le <strong>VLAN Identifier (VID, 12 bits)</strong>.</li>
                    <li><strong>VLAN Natif (Native VLAN)</strong> : Les trames destin√©es au VLAN natif sont <strong>transmises sans √©tiquette</strong> sur le trunk. √Ä la r√©ception, toute trame non √©tiquet√©e est associ√©e au VLAN natif configur√© localement sur le port.</li>
                    <li><strong>S√©quence d'√©tablissement</strong> : Sur les √©quipements Cisco, le <strong>Dynamic Trunking Protocol (DTP)</strong> peut n√©gocier automatiquement l'√©tat de trunk. Les modes cl√©s sont :
                        <ul>
                            <li>`dynamic desirable` (initie activement la n√©gociation),</li>
                            <li>`dynamic auto` (attend passivement),</li>
                            <li>`trunk` (forc√© manuellement),</li>
                            <li>`access` (forc√© en mode acc√®s).</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <!-- Section Protocoles -->
            <section id="protocoles" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√âl√©ments du Syst√®me</span>
                    <h2>3Ô∏è‚É£ Protocoles, Couches et Services (Exhaustif)</h2>
                </div>
                <ul>
                    <li><span class="concept-key">802.1Q (IEEE Standard)</span>
                        <ul>
                            <li><strong>Objectif</strong> : D√©finir le format d'√©tiquetage (tag) des trames Ethernet pour l'identification du VLAN.</li>
                            <li><strong>Couche OSI</strong> : 2 (Sous-couche MAC).</li>
                            <li><strong>Encapsulation</strong> : Insertion d'un champ de 4 octets dans l'en-t√™te Ethernet standard.</li>
                            <li><strong>Champs importants</strong> :
                                <ul>
                                    <li><strong>TPID (Tag Protocol Identifier, 0x8100)</strong> : Identifie la trame comme une trame 802.1Q.</li>
                                    <li><strong>PCP (Priority Code Point, 3 bits)</strong> : Utilis√© pour la QoS (Class of Service).</li>
                                    <li><strong>DEI (Drop Eligible Indicator, 1 bit)</strong> : Indicateur pour la QoS.</li>
                                    <li><strong>VID (VLAN Identifier, 12 bits)</strong> : Identifiant du VLAN (1-4094). VID=0 est r√©serv√© pour le trafic de priorit√©, VID=4095 (0xFFF) est r√©serv√©.</li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                    <li><span class="concept-key">Dynamic Trunking Protocol (DTP - Cisco Propri√©taire)</span>
                        <ul>
                            <li><strong>Objectif</strong> : N√©gocier automatiquement l'√©tat de trunk (trunk/access) et le type d'encapsulation (802.1Q/ISL) entre deux ports Cisco.</li>
                            <li><strong>Interaction</strong> : Fonctionne via des trames multicast √©chang√©es p√©riodiquement. <strong>Incompatible avec les √©quipements non-Cisco</strong>.</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">VLAN de Donn√©es</span>
                        <ul>
                            <li><strong>Objectif</strong> : Transporter le trafic utilisateur standard (HTTP, FTP, messagerie, etc.).</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">VLAN de Gestion</span>
                        <ul>
                            <li><strong>Objectif</strong> : Fournir un chemin d'acc√®s IP pour administrer le commutateur (SSH, SNMP, Telnet). <strong>Bonnes pratiques</strong> : Cr√©er un VLAN d√©di√©, diff√©rent du VLAN 1 et du VLAN natif, et y assigner une adresse IP de management sur l'interface virtuel `VLAN X`.</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">VLAN Voix</span>
                        <ul>
                            <li><strong>Objectif</strong> : Isoler et prioriser le trafic de t√©l√©phonie IP. Fonctionne souvent avec des m√©canismes de <strong>Quality of Service (QoS)</strong> pour garantir la bande passante et r√©duire la latence.</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">VLAN Natif (802.1Q Native VLAN)</span>
                        <ul>
                            <li><strong>Objectif</strong> : Transporter les trames <strong>non √©tiquet√©es</strong> sur un lien trunk. Il doit √™tre <strong>identique aux deux extr√©mit√©s d'un trunk</strong> pour √©viter les fuites de VLAN. <strong>Erreur conceptuelle majeure</strong> : Croire qu'il s'agit du VLAN par d√©faut pour le trafic inconnu. Son r√¥le est sp√©cifique au transport sur trunk.</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">VLAN Par D√©faut (VLAN 1)</span>
                        <ul>
                            <li><strong>Objectif</strong> : VLAN initial auquel tous les ports sont assign√©s √† la mise sous tension. Il ne peut √™tre supprim√©. Il transporte √©galement certains trafics de contr√¥le comme DTP, CDP et PAgP par d√©faut. <strong>Confusion fr√©quente</strong> : L'assimiler au VLAN natif ou de gestion. Il est recommand√© de ne l'utiliser pour <strong>aucun</strong> trafic utilisateur ou de gestion.</li>
                        </ul>
                    </li>
                </ul>
                <h4>Gestion de la base de donn√©es des VLAN :</h4>
                <ul>
                    <li><strong>VLAN de Port√©e Normale (Normal-Range VLANs, 1-1005)</strong> :
                        <ul>
                            <li>Stock√©s dans le fichier <strong>`vlan.dat`</strong> en <strong>m√©moire FLASH</strong>. Cette persistance est <strong>ind√©pendante</strong> de la `startup-config` et `running-config`.</li>
                            <li>Cr√©√©s avec la commande `vlan [id]` en mode configuration globale.</li>
                        </ul>
                    </li>
                    <li><strong>VLAN de Port√©e √âtendue (Extended-Range VLANs, 1006-4094)</strong> :
                        <ul>
                            <li>Stock√©s <strong>uniquement dans la configuration courante (`running-config`)</strong> et, si sauvegard√©s, dans la `startup-config` en <strong>NVRAM</strong>.</li>
                            <li>Offrent moins de fonctionnalit√©s (ex: pas de support VTP en mode transparent pour certains).</li>
                        </ul>
                    </li>
                </ul>
            </section>

            <!-- Section Illusions -->
            <section id="illusions" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Pi√®ges √† √âviter</span>
                    <h2>4Ô∏è‚É£ Erreurs Conceptuelles Majeures (Issues des R√©ponses Fausses)</h2>
                </div>

                <div class="illusion-box">
                    <h4>1. Illusion de la diffusion universelle</h4>
                    <p>"Une trame de broadcast (comme ARP) envoy√©e sur un commutateur est vue par tous les h√¥tes connect√©s."</p>
                    <p><strong>Pourquoi elle semble plausible</strong> : Sur un petit switch non segment√©, c'est effectivement le cas. L'esprit g√©n√©ralise cette propri√©t√©.</p>
                    <p><strong>Pourquoi elle est fausse</strong> : Une trame de broadcast est confin√©e √† son <strong>domaine de broadcast</strong>, d√©fini par les limites du VLAN. Deux h√¥tes sur des VLANs diff√©rents ne se verront <strong>jamais</strong> au niveau L2, m√™me s'ils sont sur le m√™me switch physique.</p>
                    <p><strong>Raisonnement correct</strong> : Visualiser chaque VLAN comme un switch logique ind√©pendant. La diffusion s'arr√™te aux fronti√®res de ce switch virtuel.</p>
                </div>

                <div class="illusion-box">
                    <h4>2. Confusion entre VLAN natif et VLAN de gestion</h4>
                    <p>"Le VLAN natif est celui utilis√© pour g√©rer le switch."</p>
                    <p><strong>Pourquoi elle semble plausible</strong> : Par d√©faut, le VLAN natif est souvent le VLAN 1, qui est aussi le VLAN de gestion par d√©faut. La confusion provient de cette co√Øncidence initiale.</p>
                    <p><strong>Pourquoi elle est fausse et dangereuse</strong> : Le VLAN natif est une <strong>propri√©t√© d'un port trunk</strong> concernant le traitement des trames non √©tiquet√©es. Le VLAN de gestion est une <strong>affectation logique d'une adresse IP</strong> √† l'interface SVI du switch. Les confondre expose le trafic de management √† des trames non √©tiquet√©es non fiables transitant sur les trunks.</p>
                    <p><strong>Raisonnement correct</strong> : Ils doivent √™tre distincts pour des raisons de s√©curit√©. Configurez un VLAN d√©di√© et s√©curis√© pour la gestion, et un VLAN natif diff√©rent, inutilis√© pour le trafic de donn√©es, sur tous les trunks.</p>
                </div>

                <div class="illusion-box">
                    <h4>3. Raccourci sur la suppression des VLAN</h4>
                    <p>"Si je supprime un VLAN, les ports assign√©s deviennent inactifs."</p>
                    <p><strong>Pourquoi elle semble plausible</strong> : Logiquement, si un groupe logique dispara√Æt, ses membres devraient √™tre "d√©connect√©s".</p>
                    <p><strong>Pourquoi elle est fausse</strong> : En r√©alit√©, les ports retournent au <strong>VLAN par d√©faut (VLAN 1)</strong>. Cela peut cr√©er une faille de s√©curit√© si le VLAN 1 n'est pas s√©curis√© et r√©tablir une connectivit√© non d√©sir√©e entre des segments cens√©s √™tre isol√©s.</p>
                    <p><strong>Raisonnement correct</strong> : Avant de supprimer un VLAN, r√©affectez explicitement ses ports √† un autre VLAN appropri√© ou d√©sactivez-les. Consid√©rez la suppression comme une op√©ration n√©cessitant une pr√©paration.</p>
                </div>

                <div class="illusion-box">
                    <h4>4. Mauvaise interpr√©tation de la commande `switchport trunk allowed vlan`</h4>
                    <p>Croire que `switchport trunk allowed vlan 30` *ajoute* le VLAN 30 √† la liste existante.</p>
                    <p><strong>Pourquoi elle semble plausible</strong> : La syntaxe ne pr√©cise pas explicitement "remplacer". D'autres commandes Cisco utilisent une syntaxe similaire pour l'ajout.</p>
                    <p><strong>Pourquoi elle est fausse</strong> : Cette syntaxe <strong>remplace</strong> la liste autoris√©e. L'ex√©cution de cette commande sur un trunk autorisant les VLANs 10 et 20 aboutira √† n'autoriser que le VLAN 30, coupant potentiellement le trafic.</p>
                    <p><strong>Raisonnement correct</strong> : Pour ajouter, il faut utiliser `switchport trunk allowed vlan add 30`. Pour remplacer, c'est bien `switchport trunk allowed vlan 30`. Toujours v√©rifier la liste actuelle avec `show interfaces trunk` avant modification.</p>
                </div>
            </section>

            <!-- Section Raisonnement -->
            <section id="raisonnement" class="module-section">
                <div class="section-header">
                    <span class="section-tag">M√©thode Expert</span>
                    <h2>5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert</h2>
                </div>
                <p>Un expert pense en termes de <strong>logique, pas de physique</strong>. Voici sa d√©marche :</p>
                <ol>
                    <li><span class="concept-key">Cartographie logique avant c√¢blage</span> : D√©finir les besoins de segmentation (par service, par s√©curit√©, par application) et assigner les ID de VLAN <strong>de mani√®re coh√©rente</strong> √† l'√©chelle du r√©seau.</li>
                    <li><span class="concept-key">S√©curit√© par d√©faut</span> : Jamais utiliser le VLAN 1. Changer le VLAN natif sur tous les trunks vers un VLAN d√©di√©, inutilis√© pour les donn√©es. Cr√©er un VLAN de management d√©di√© avec des politiques d'acc√®s restrictives.</li>
                    <li><span class="concept-key">Principe de moindre privil√®ge sur les trunks</span> : Utiliser `switchport trunk allowed vlan [liste]` pour n'autoriser que les VLAN strictement n√©cessaires sur chaque liaison trunk. Cela limite la port√©e des erreurs et des attaques.</li>
                    <li><span class="concept-key">Anticipation des effets de bord</span> :
                        <ul>
                            <li>Ajouter un nouveau VLAN ? Penser √† l'ajouter aux listes `allowed vlan` sur tous les trunks pertinents.</li>
                            <li>Configurer un nouveau trunk ? V√©rifier la coh√©rence du VLAN natif des deux c√¥t√©s.</li>
                            <li>Supprimer un VLAN ? Identifier d'abord tous les ports assign√©s et les reconfigurer ou accepter qu'ils basculent sur le VLAN 1.</li>
                        </ul>
                    </li>
                    <li><span class="concept-key">Documentation comme partie int√©grante de l'op√©ration</span> : Maintenir une matrice VLAN (ID, nom, description, sous-r√©seau IP associ√©) et une matrice de trunk (ports, VLANs autoris√©s, VLAN natif).</li>
                </ol>
                <p><strong>Penser comme un syst√®me</strong> : Une modification sur un commutateur (VLAN, trunk) a des r√©percussions sur la connectivit√© logique de dizaines d'appareils. L'expert mod√©lise mentalement ces r√©percussions avant d'agir.</p>
            </section>

            <!-- Section Synth√®se -->
            <section id="synthese" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√Ä Retenir Absolument</span>
                    <h2>6Ô∏è‚É£ Synth√®se M√©morisable Long Terme</h2>
                </div>

                <h3>Lois Conceptuelles :</h3>
                <div class="law-box">
                    <p><strong>1. Loi de Confinement L2</strong> : "Ce qui entre dans un VLAN par un port d'acc√®s, ne ressort du VLAN que par un port de trunk √©tiquet√© ou un routeur."</p>
                    <p><strong>2. √âquation de la Segmentation</strong> : `1 Infrastructure Physique + n VLANs = n Domaines de Broadcast Logiques Isol√©s`.</p>
                    <p><strong>3. R√®gle d'Or du Trunk</strong> : "Un trunk transporte des trames √©tiquet√©es pour N VLANs, et des trames non √©tiquet√©es pour un seul : le VLAN natif, qui doit √™tre match√© de part et d'autre."</p>
                    <p><strong>4. Dogme de S√©curit√©</strong> : "VLAN 1 est un territoire hostile. Le VLAN natif est une passerelle non gard√©e. Isole-les et surveille-les."</p>
                </div>

                <h3>√âquations Mentales :</h3>
                <div class="equation-box">
                    <p><strong>Connectivit√© Inter-VLAN = Routage (Couche 3)</strong></p>
                    <p><strong>Bonne Pratique = VLAN d√©di√© (Gestion) ‚â† VLAN Natif ‚â† VLAN 1</strong></p>
                    <p><strong>Erreur Commune = Commande `allowed vlan` (remplace) vs `allowed vlan add` (ajoute)</strong></p>
                </div>

                <h3>R√®gles de Raisonnement & Rappels via l'analogie :</h3>
                <div class="analogy-box">
                    <p><strong>Rappel par l'analogie</strong> : "Un √©tage (VLAN) n'est pas l'ascenseur (Trunk). Le hall (VLAN Natif) n'est pas le bureau du concierge (VLAN de Gestion). Ne laissez pas les visiteurs du hall (trames non √©tiquet√©es) acc√©der au bureau du concierge (interface de management)."</p>
                    <p><strong>R√®gle de d√©pannage</strong> : Lorsqu'un h√¥te ne peut pas communiquer, v√©rifiez d'abord l'assignation de VLAN sur son port d'acc√®s, puis la liste des VLAN autoris√©s sur le trunk en amont, et enfin la coh√©rence du VLAN natif.</p>
                </div>
            </section>

            <!-- Section Extension -->
            <section id="extension" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Perspectives</span>
                    <h2>7Ô∏è‚É£ Extension Au-Del√† de NetAcad (500%+)</h2>
                </div>
                <ul>
                    <li><span class="concept-key">VLAN Hopping</span> : Attaque o√π un attaquant exploite une double √©tiquetage 802.1Q ou une mauvaise configuration du VLAN natif pour acc√©der √† un VLAN non autoris√©. Contre-mesures : Placer les ports non fiables en mode acc√®s, utiliser un VLAN natif d√©di√© et non utilis√©, d√©sactiver DTP (`switchport nonegotiate`).</li>
                    <li><span class="concept-key">Private VLANs (PVLANs)</span> : Technique de segmentation avanc√©e au sein d'un m√™me VLAN primaire, permettant d'isoler les h√¥tes au niveau L2 tout en partageant une m√™me passerelle L3. Comprend les ports <strong>Promiscuous, Isolated, et Community</strong>.</li>
                    <li><span class="concept-key">VLAN Translation (QinQ / 802.1ad)</span> : M√©canisme d'empilement d'√©tiquettes ("tag stacking") utilis√© par les fournisseurs de service pour transporter les VLANs clients (VLAN C) √† travers leur propre r√©seau en les encapsulant dans un VLAN de service (VLAN S).</li>
                    <li><span class="concept-key">Mux/Selective QinQ</span> : √âvolution de QinQ o√π l'encapsulation dans un VLAN de service est conditionnelle (bas√©e sur le VLAN C ou le port).</li>
                    <li><span class="concept-key">Vision Vendor-Neutral</span> : Comprendre que si 802.1Q est un standard, ses impl√©mentations (DTP, commandes CLI, gestion des VLAN √©tendus) varient. L'administrateur expert doit savoir lire la documentation d'un fournisseur (Juniper avec ses VLAN "family ethernet-switching", Arista, etc.) pour en d√©duire les concepts universels sous-jacents.</li>
                    <li><span class="concept-key">Interconnexion avec la virtualisation</span> : Les VLANs sont fondamentaux dans les datacenters virtuels. Les commutateurs virtuels (vSwitch d'ESXi, Open vSwitch) supportent le trunking 802.1Q, permettant aux VLANs de s'√©tendre du r√©seau physique jusqu'aux interfaces r√©seau des machines virtuelles.</li>
                </ul>
            </section>

            <!-- Section Objectifs -->
            <section id="objectifs" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Finalit√©</span>
                    <h2>üéØ Objectifs Cognitifs Finaux ‚Äì Administrateur R√©seau √âlite</h2>
                </div>
                <div class="cognitive-objectives">
                    <p>√Ä la fin de ce module, vous ne voyez plus des commutateurs et des c√¢bles, mais un <span class="concept-key">syst√®me de domaines logiques</span>. Vous concevez des segments r√©seau bas√©s sur des exigences fonctionnelles et de s√©curit√©, pas sur des contraintes physiques. Vous savez que la puissance des VLAN r√©side dans leur capacit√© √† cr√©er et √† maintenir ces fronti√®res logiques de mani√®re fiable et s√©curis√©e √† travers toute l'infrastructure.</p>
                    <p>Vous pouvez expliquer le parcours d'une trame √† travers les ports d'acc√®s, les trunks et entre les VLANs via un routeur. Votre compr√©hension des m√©canismes sous-jacents (802.1Q, DTP, gestion de la base de donn√©es) vous permet de d√©panner des probl√®mes complexes de connectivit√© et de configuration. Vous √™tes capable de prendre des d√©cisions architecturales √©clair√©es pour impl√©menter, √©tendre et s√©curiser un r√©seau segment√© par VLANs.</p>
                    <br>
                    <h3>Vous devez pouvoir dire, sans h√©sitation :</h3>
                    <ul>
                        <li>¬´ Je ma√Ætrise la segmentation logique L2 et ses implications sur la connectivit√© et la s√©curit√©. ¬ª</li>
                        <li>¬´ Je peux concevoir, impl√©menter et d√©panner une architecture r√©seau multi-VLAN complexe. ¬ª</li>
                        <li>¬´ Je comprends les m√©canismes profonds (802.1Q, trunking, bases de donn√©es) et les pi√®ges courants. ¬ª</li>
                        <li>¬´ Mon raisonnement d√©passe la configuration CLI pour englober la conception syst√®me et la s√©curit√©. ¬ª</li>
                        <li>¬´ Je comprends comment les VLANs isolent le trafic au niveau de la couche 2. ¬ª</li>
                        <li>¬´ Je sais expliquer pourquoi une communication inter-VLAN n√©cessite un routeur. ¬ª</li>
                        <li>¬´ Je peux raisonner sur les effets de la configuration des trunks et du VLAN natif. ¬ª</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <footer class="page-footer">
        <p>Module Acad√©mique VLAN ‚Äî Reconstruction pour la Ma√Ætrise Expert</p>
        <p>¬© Format p√©dagogique HTML ‚Äî Contenu fig√© et valid√©.</p>
    </footer>

    <script>
        // Script pour la navigation mobile et le suivi des sections actives
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-btn');
            const mainMenu = document.getElementById('main-menu');
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            const mainNavLinks = document.querySelectorAll('.nav-menu a');

            // Gestion du menu hamburger
            hamburger.addEventListener('click', function() {
                mainMenu.classList.toggle('active');
            });

            // Fermer le menu mobile en cliquant sur un lien
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (mainMenu.classList.contains('active')) {
                        mainMenu.classList.remove('active');
                    }
                });
            });

            // Suivi de la section active (scroll)
            const sections = document.querySelectorAll('.module-section');
            const navLi = document.querySelectorAll('.sidebar-nav a, .nav-menu a');

            function setActiveSection() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 150;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLi.forEach(li => {
                    li.classList.remove('active', 'active-section');
                    if (li.getAttribute('href') === `#${current}`) {
                        li.classList.add('active', 'active-section');
                    }
                });
            }

            window.addEventListener('scroll', setActiveSection);
            // Initialiser l'√©tat actif au chargement
            setActiveSection();
        });
    </script>
</body>
</html>