<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Acad√©mique : L'√âcosyst√®me du Spanning Tree ‚Äì Du Chaos Potentiel √† l'Arbre Ordonn√©</title>
    <!-- Int√©gration de Mermaid pour les diagrammes -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <script>mermaid.initialize({startOnLoad:true, theme:'neutral'});</script>
    <!-- Styles CSS -->
    <style>
        /* D√©finition des polices et variables */
        :root {
            --color-primary: #1a365d; /* Bleu fonc√© pour les titres */
            --color-secondary: #2d3748; /* Gris fonc√© pour sous-titres */
            --color-accent: #2b6cb0; /* Bleu accent pour concepts cl√©s */
            --color-law: #c53030; /* Rouge pour les lois mentales */
            --color-illusion: #b7791f; /* Or pour illusions conceptuelles */
            --color-background: #ffffff;
            --color-surface: #f7fafc;
            --color-border: #e2e8f0;
            --font-heading: 'Space Grotesk', 'Segoe UI', system-ui, sans-serif;
            --font-body: 'Source Sans 3', 'Inter', 'Open Sans', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            line-height: 1.7;
            color: var(--color-secondary);
            background-color: var(--color-background);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        a {
            color: var(--color-accent);
            text-decoration: none;
        }

        /* Header */
        .page-header {
            background-color: var(--color-primary);
            color: white;
            padding: 2rem 1rem;
            text-align: center;
            border-bottom: 5px solid var(--color-accent);
        }

        .page-header h1 {
            font-family: var(--font-heading);
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .page-header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation principale */
        #main-nav {
            background-color: var(--color-surface);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-logo {
            font-family: var(--font-heading);
            font-weight: bold;
            color: var(--color-primary);
            font-size: 1.5rem;
            padding: 1rem 0;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-menu a {
            color: var(--color-secondary);
            font-weight: 600;
            padding: 1rem 0;
            display: block;
            position: relative;
            transition: color 0.2s;
        }

        .nav-menu a:hover, .nav-menu a:focus {
            color: var(--color-accent);
        }

        .nav-menu a.active {
            color: var(--color-accent);
            border-bottom: 3px solid var(--color-accent);
        }

        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            gap: 4px;
        }

        .hamburger span {
            height: 3px;
            width: 25px;
            background-color: var(--color-primary);
            border-radius: 2px;
        }

        /* Contenu principal en deux colonnes */
        .main-wrapper {
            display: flex;
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            width: 100%;
        }

        /* Sidebar / Navigation lat√©rale */
        #sidebar {
            width: 280px;
            background-color: var(--color-surface);
            border-right: 1px solid var(--color-border);
            padding: 2rem 1rem;
            position: sticky;
            top: 80px; /* Hauteur de la nav principale */
            align-self: flex-start;
            max-height: calc(100vh - 80px);
            overflow-y: auto;
            flex-shrink: 0;
        }

        .sidebar-title {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-primary);
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--color-accent);
        }

        .sidebar-nav {
            list-style: none;
        }

        .sidebar-nav li {
            margin-bottom: 0.5rem;
        }

        .sidebar-nav a {
            display: block;
            padding: 0.6rem 1rem;
            border-radius: 6px;
            color: var(--color-secondary);
            transition: all 0.2s;
        }

        .sidebar-nav a:hover, .sidebar-nav a:focus, .sidebar-nav a.active-section {
            background-color: rgba(43, 108, 176, 0.1);
            color: var(--color-accent);
            font-weight: 600;
        }

        /* Zone de contenu principal */
        #content {
            flex: 1;
            padding: 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .module-section {
            margin-bottom: 4rem;
            scroll-margin-top: 100px;
            background-color: white;
            border-radius: 8px;
            padding: 2.5rem;
            border: 1px solid var(--color-border);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.03);
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--color-border);
        }

        .section-header h2 {
            font-family: var(--font-heading);
            font-size: 2rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .section-tag {
            display: inline-block;
            background-color: var(--color-accent);
            color: white;
            font-size: 0.8rem;
            font-weight: bold;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }

        /* Styles typographiques sp√©cifiques */
        h3 {
            font-family: var(--font-heading);
            font-size: 1.5rem;
            color: var(--color-secondary);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        h4 {
            font-family: var(--font-heading);
            font-size: 1.2rem;
            color: var(--color-secondary);
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
        }

        p, ul, ol {
            margin-bottom: 1.5rem;
        }

        ul, ol {
            padding-left: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* √âl√©ments de mise en forme s√©mantique */
        .analogy-box {
            background-color: rgba(247, 250, 252, 0.8);
            border-left: 4px solid var(--color-accent);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .concept-key {
            color: var(--color-accent);
            font-weight: 700;
            background-color: rgba(43, 108, 176, 0.1);
            padding: 0.1rem 0.4rem;
            border-radius: 3px;
        }

        .law-box {
            background-color: rgba(197, 48, 48, 0.05);
            border-left: 4px solid var(--color-law);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .illusion-box {
            background-color: rgba(183, 121, 31, 0.05);
            border-left: 4px solid var(--color-illusion);
            padding: 1.5rem;
            margin: 2rem 0;
            border-radius: 0 6px 6px 0;
        }

        .equation-box {
            text-align: center;
            font-family: var(--font-heading);
            font-size: 1.2rem;
            padding: 1.5rem;
            margin: 2rem 0;
            background-color: var(--color-surface);
            border-radius: 8px;
            border: 1px dashed var(--color-border);
        }

        .mermaid-diagram {
            margin: 2rem 0;
            padding: 1rem;
            background-color: white;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            overflow-x: auto;
            text-align: center;
        }

        /* Objectifs cognitifs */
        .cognitive-objectives {
            background: linear-gradient(135deg, var(--color-primary) 0%, #2c5282 100%);
            color: white;
            padding: 2.5rem;
            border-radius: 10px;
            margin: 3rem 0;
        }

        .cognitive-objectives h3 {
            color: white;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .cognitive-objectives ul {
            list-style: none;
            padding-left: 0;
            max-width: 800px;
            margin: 0 auto;
        }

        .cognitive-objectives li {
            margin-bottom: 1rem;
            padding-left: 1.8rem;
            position: relative;
        }

        .cognitive-objectives li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #68d391;
            font-weight: bold;
        }

        /* Footer */
        .page-footer {
            background-color: var(--color-primary);
            color: white;
            text-align: center;
            padding: 2rem 1rem;
            margin-top: auto;
            font-size: 0.9rem;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .main-wrapper {
                flex-direction: column;
            }

            #sidebar {
                width: 100%;
                position: static;
                top: auto;
                max-height: none;
                border-right: none;
                border-bottom: 1px solid var(--color-border);
            }

            .nav-menu {
                gap: 1rem;
            }
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background-color: var(--color-surface);
                flex-direction: column;
                padding: 1rem;
                border-top: 1px solid var(--color-border);
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .nav-menu li {
                width: 100%;
            }

            .module-section {
                padding: 1.5rem;
            }

            .page-header h1 {
                font-size: 1.8rem;
            }
        }

        @media print {
            #main-nav, #sidebar, .page-footer, .hamburger {
                display: none;
            }

            .main-wrapper {
                flex-direction: column;
            }

            #content {
                padding: 0;
            }

            .module-section {
                border: none;
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <header class="page-header">
        <h1>üìò Module Acad√©mique : L'√âcosyst√®me du Spanning Tree ‚Äì Du Chaos Potentiel √† l'Arbre Ordonn√©</h1>
        <p class="subtitle">Reconstruction acad√©mique ultra-approfondie orient√©e ma√Ætrise ‚Äî Formation d'un administrateur r√©seau d'exception (Niveau √âlite)</p>
    </header>

    <nav id="main-nav">
        <div class="nav-container">
            <div class="nav-logo">STP Expert</div>
            <div class="hamburger" id="hamburger-btn">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu" id="main-menu">
                <li><a href="#analogie" class="active">Analogie Ma√Ætre</a></li>
                <li><a href="#modele-mental">Mod√®le Mental</a></li>
                <li><a href="#architecture">Architecture</a></li>
                <li><a href="#mecanismes">M√©canismes</a></li>
                <li><a href="#protocoles">Protocoles & Services</a></li>
                <li><a href="#illusions">Illusions Conceptuelles</a></li>
                <li><a href="#raisonnement">Raisonnement</a></li>
                <li><a href="#synthese">Synth√®se</a></li>
                <li><a href="#extension">Extension</a></li>
                <li><a href="#objectifs">Objectifs</a></li>
            </ul>
        </div>
    </nav>

    <div class="main-wrapper">
        <aside id="sidebar">
            <div class="sidebar-title">Navigation du Module</div>
            <ul class="sidebar-nav">
                <li><a href="#analogie" class="active-section">üß† Analogie Syst√©mique Ma√Ætre</a></li>
                <li><a href="#modele-mental">üß© Mod√®le Mental Global</a></li>
                <li><a href="#architecture">1Ô∏è‚É£ Architecture Conceptuelle Essentielle</a></li>
                <li><a href="#mecanismes">2Ô∏è‚É£ M√©canismes Internes</a>
                    <ul style="margin-left: 1rem; margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><a href="#mecanisme-boucle">Gen√®se de la Boucle</a></li>
                        <li><a href="#mecanisme-bpdu">Le Langage des BPDU</a></li>
                    </ul>
                </li>
                <li><a href="#protocoles">3Ô∏è‚É£ Protocoles, Couches & Services</a>
                    <ul style="margin-left: 1rem; margin-top: 0.5rem; font-size: 0.9rem;">
                        <li><a href="#protocole-stp">STP (802.1D)</a></li>
                        <li><a href="#identite-bid">Bridge ID (BID)</a></li>
                        <li><a href="#roles-ports">R√¥les de Port</a></li>
                        <li><a href="#convergence">Convergence STP vs RSTP</a></li>
                        <li><a href="#implementations">Impl√©mentations par VLAN</a></li>
                        <li><a href="#optimisations">Optimisations pour l'Acc√®s</a></li>
                    </ul>
                </li>
                <li><a href="#illusions">4Ô∏è‚É£ Illusions Conceptuelles Majeures</a></li>
                <li><a href="#raisonnement">5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau</a></li>
                <li><a href="#synthese">6Ô∏è‚É£ Synth√®se Ultra-M√©morisable</a></li>
                <li><a href="#extension">7Ô∏è‚É£ Extension Contr√¥l√©e</a></li>
                <li><a href="#objectifs">üéØ Objectifs Cognitifs Finaux</a></li>
            </ul>
        </aside>

        <main id="content">
            <!-- Section Analogie -->
            <section id="analogie" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Analogie Centrale</span>
                    <h2>üß† Analogie Syst√©mique Ma√Ætre : Le Syst√®me de Chauffage Urbain</h2>
                </div>
                <p>Imaginez un syst√®me de chauffage urbain complexe desservant une ville.</p>
                <div class="analogy-box">
                    <p><strong>La chaudi√®re centrale (Pont Racine)</strong> : C'est la source unique de chaleur (trafic). Sa position et sa puissance sont cruciales.</p>
                    <p><strong>Les canalisations principales (Liens Trunk)</strong> : Ce sont les art√®res qui transportent la chaleur. Il peut y avoir des boucles de canalisations pour la redondance.</p>
                    <p><strong>Les vannes r√©gulatrices sur chaque canalisation (Ports des commutateurs)</strong> : Chaque vanne peut √™tre grand ouverte (Forwarding), ferm√©e (Blocking), ou dans un √©tat interm√©diaire (Learning/Listening) o√π elle surveille la pression mais ne laisse pas passer l'eau.</p>
                    <p><strong>Le probl√®me de la boucle (Temp√™te de diffusion)</strong> : Si deux canalisations forment une boucle et que toutes les vannes sont ouvertes, l'eau (un broadcast) circule en rond, s'amplifie, surchauffe le syst√®me et provoque une rupture. C'est le chaos.</p>
                    <p><strong>L'ing√©nieur en chef (Algorithme STA)</strong> : Il a pour mission de cr√©er un plan o√π, depuis chaque b√¢timent (commutateur), il n'existe qu'un seul chemin actif vers la chaudi√®re, en fermant strat√©giquement certaines vannes, tout en gardant les autres pr√™tes √† s'ouvrir en cas de panne.</p>
                </div>
                <h4>Mapping Explicite</h4>
                <ul>
                    <li><span class="concept-key">Chaudi√®re</span> ‚Üí Pont Racine.</li>
                    <li><span class="concept-key">Canalisation entre deux n≈ìuds</span> ‚Üí Segment Ethernet / Lien Trunk.</li>
                    <li><span class="concept-key">Vanne sur une canalisation</span> ‚Üí Port de commutateur avec son √©tat STP.</li>
                    <li><span class="concept-key">Eau chaude qui circule</span> ‚Üí Trame de donn√©es (Broadcast, Unknown Unicast).</li>
                    <li><span class="concept-key">Messages de contr√¥le entre les vannes (pression, temp√©rature)</span> ‚Üí BPDU.</li>
                    <li><span class="concept-key">Boucle de canalisation avec vannes ouvertes</span> ‚Üí Boucle de couche 2 ‚Üí Temp√™te de diffusion.</li>
                    <li><span class="concept-key">Plan de l'ing√©nieur (quelles vannes fermer)</span> ‚Üí Topologie Spanning Tree finale.</li>
                </ul>
            </section>

            <!-- Section Mod√®le Mental -->
            <section id="modele-mental" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Sch√©ma Directeur</span>
                    <h2>üß© Mod√®le Mental Global (Causalit√© du Syst√®me STP)</h2>
                </div>
                <p>Le domaine STP est un <span class="concept-key">syst√®me vivant de r√©gulation</span> au sein de la couche 2. Son r√¥le n'est pas de cr√©er des chemins, mais d'en <span class="concept-key">inhiber</span> pour pr√©server la stabilit√© globale. Il transforme un graphe physique maill√© (plein de boucles) en un arbre logique (sans boucle).</p>
                <p><strong>Composants</strong> : Commutateurs, ports, liens, BPDU (le langage du syst√®me), BID (l'identit√© et le rang).</p>
                <p><strong>Interactions</strong> : √âchange incessant de BPDU pour n√©gocier les r√¥les. Calcul distribu√© du chemin optimal vers la racine.</p>
                <p><strong>D√©pendances</strong> : Toute la topologie logique d√©pend de l'identit√© du Pont Racine. Un changement de Pont Racine d√©clenche un recalcul en cascade.</p>
                <p><strong>Causalit√©s</strong> :</p>
                <ul>
                    <li>Si le Pont Racine tombe en panne ‚Üí le syst√®me converge vers un nouveau Pont Racine.</li>
                    <li>Si un lien actif tombe en panne ‚Üí un port bloqu√© se r√©active (apr√®s les d√©lais).</li>
                    <li>Si on abaisse la priorit√© d'un commutateur ‚Üí il devient probablement le nouveau Pont Racine ‚Üí toute la topologie des chemins est recalcul√©e.</li>
                    <li>Si on active PortFast sur un port connect√© √† un autre commutateur ‚Üí risque de cr√©ation d'une boucle non d√©tect√©e.</li>
                </ul>
                <div class="mermaid-diagram">
                    <div class="mermaid">
graph TD
    A[Topologie Physique Maill√©e] --> B{Algorithme STA Distribu√©};
    B -- √âchange de BPDU / Calculs --> C[√âlection du Pont Racine BID min];
    C --> D[Calcul des Chemins Racine Co√ªt min];
    D --> E[Assignation des R√¥les de Port];
    E --> F[Ports Racine & D√©sign√©s: Forwarding];
    E --> G[Ports Alternatifs: Blocking/Discarding];
    F --> H[Topologie Logique en Arbre Stable];
    G --> H;
    H --> I{√âv√©nement: Panne Lien Actif};
    I --> J[Port Bloqu√© d√©tecte perte de BPDU];
    J --> K[Re-convergence Rapide RSTP / Lente STP];
    K --> H;
    I --> L{√âv√©nement: Connexion H√¥te};
    L --> M[PortFast: Bypass √âtats Transitoires];
    M --> N[Acc√®s Imm√©diat au R√©seau];
                    </div>
                </div>
            </section>

            <!-- Section Architecture -->
            <section id="architecture" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fondamentaux</span>
                    <h2>1Ô∏è‚É£ Architecture Conceptuelle Fondamentale</h2>
                </div>
                <p><strong>R√¥le dans les r√©seaux modernes</strong> : STP et ses √©volutions (RSTP, MSTP) sont les <span class="concept-key">gardiens de la stabilit√©</span> de la couche de commutation Ethernet. Ils permettent d'impl√©menter la <span class="concept-key">redondance physique</span> (chemins multiples) sans souffrir de ses effets destructeurs (boucles logiques), garantissant ainsi la disponibilit√©.</p>
                <p><strong>Positionnement dans les mod√®les</strong> :</p>
                <ul>
                    <li><strong>Mod√®le OSI</strong> : Couche 2 (Liaison de donn√©es). STP op√®re au niveau des trames Ethernet et des adresses MAC.</li>
                    <li><strong>Mod√®le TCP/IP</strong> : Couche Acc√®s r√©seau. Il est totalement ind√©pendant des adresses IP (couche 3). C'est une <span class="concept-key">erreur conceptuelle majeure</span> de le confondre avec un protocole de routage comme OSPF. Le routage g√®re la redondance par √©quilibrage de charge et m√©triques ; STP la g√®re par <span class="concept-key">blocage pur</span>.</li>
                </ul>
                <p><strong>Fronti√®res du domaine</strong> : STP op√®re au sein d'un <span class="concept-key">domaine de broadcast unique</span>. Avec PVST+, chaque VLAN a son propre domaine STP. Sa fronti√®re s'arr√™te aux routeurs ou aux liens o√π la commutation de couche 2 cesse.</p>
                <p><strong>Relations avec les autres briques</strong> :</p>
                <ul>
                    <li><strong>Avec le VLAN</strong> : PVST+ cr√©e une instance STP par VLAN, permettant des arbres logiques diff√©rents par VLAN.</li>
                    <li><strong>Avec le routage (Couche 3)</strong> : Dans les designs modernes (fabric switching, routage everywhere), on r√©duit le domaine STP √† la seule couche d'acc√®s. La redondance entre distribution et c≈ìur est g√©r√©e par des protocoles de couche 3 (ECMP), √©liminant le besoin de STP sur ces liens et ses d√©lais de convergence.</li>
                </ul>
            </section>

            <!-- Section M√©canismes -->
            <section id="mecanismes" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Fonctionnement Causal</span>
                    <h2>2Ô∏è‚É£ M√©canismes Internes D√©taill√©s</h2>
                </div>

                <h3 id="mecanisme-boucle">A. La Gen√®se de la Boucle Catastrophique</h3>
                <p><strong>Fonctionnement normal d'un switch</strong> : Pour une trame dont l'adresse MAC de destination est inconnue (Unknown Unicast) ou est une adresse de Broadcast/Multicast, le switch utilise le <span class="concept-key">flooding</span> : il envoie la trame sur tous ses ports, sauf celui de r√©ception.</p>
                <p><strong>Condition de validit√©</strong> : Ce m√©canisme est sain dans une topologie en arbre.</p>
                <p><strong>Limite et cas fronti√®re</strong> : D√®s qu'une <span class="concept-key">boucle physique</span> existe entre deux switches ou plus, la trame va tourner en rond ind√©finiment. Chaque passage sur un switch d√©clenche un nouveau flooding, cr√©ant une <span class="concept-key">r√©action en cha√Æne exponentielle</span> : c'est la temp√™te de diffusion. Contrairement aux paquets IP qui ont un TTL, les trames Ethernet n'ont pas de compteur de sauts. Elles tournent jusqu'√† ce que la boucle soit rompue ou que les √©quipements soient satur√©s.</p>

                <h3 id="mecanisme-bpdu">B. Le Langage du Syst√®me : Les BPDU</h3>
                <p><strong>S√©quence logique</strong> : Tous les 2 secondes (Hello Time), chaque switch envoie une BPDU de configuration sur chacun de ses ports. Ce message dit : "Je suis le switch [BID], et je pense que le Pont Racine est [Root BID], √† un co√ªt de [Root Path Cost] depuis moi."</p>
                <p><strong>Fonctionnement</strong> : En recevant une BPDU sur un port, un switch compare l'information "Pont Racine revendiqu√©" avec sa propre connaissance. Si la BPDU re√ßue annonce un meilleur Pont Racine (BID plus bas), le switch met √† jour sa table et relaie cette information √† ses autres ports, en ajoutant le co√ªt du port d'entr√©e au Root Path Cost. C'est ainsi que la connaissance du meilleur Pont Racine se propage.</p>
            </section>

            <!-- Section Protocoles -->
            <section id="protocoles" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√âl√©ments du Syst√®me</span>
                    <h2>3Ô∏è‚É£ Protocoles, Couches et Services (Exhaustif)</h2>
                </div>

                <h3 id="protocole-stp">A. Le C≈ìur : Spanning Tree Protocol (STP - IEEE 802.1D)</h3>
                <ul>
                    <li><strong>Objectif</strong> : √âtablir une topologie en boucle unique en quatre √©tapes.</li>
                    <li><strong>Couche</strong> : 2 (Liaison de donn√©es).</li>
                    <li><strong>Encapsulation</strong> : Trame Ethernet de type 0x4242 (propri√©taire Cisco) ou destination MAC 01:80:C2:00:00:00 (adresse MAC de pontage IEEE).</li>
                    <li><strong>Champs importants</strong> : Bridge ID (BID), Root BID, Root Path Cost, Port ID.</li>
                    <li><strong>Comportement normal</strong> : Convergence lente (30 √† 50 secondes). Utilise 5 √©tats de port.</li>
                    <li><strong>Interactions</strong> : N√©cessite des minuteurs (Hello, Fwd Delay, Max Age) synchronis√©s sur le Pont Racine.</li>
                </ul>

                <h3 id="identite-bid">B. L'Identit√© et le Rang : Le Bridge ID (BID)</h3>
                <ul>
                    <li><strong>Objectif</strong> : Identifier de mani√®re unique un switch dans le processus STP et d√©terminer sa priorit√© pour √™tre Pont Racine.</li>
                    <li><strong>Structure</strong> : 8 octets = <strong>Priorit√© (2 octets)</strong> + <strong>ID syst√®me √©tendu (2 octets sur 3, mais valeur significative sur 12 bits)</strong> + <strong>Adresse MAC (6 octets)</strong>.</li>
                    <li><strong>D√©cision</strong> : Le BID le plus bas gagne.
                        <ol>
                            <li>On compare d'abord la <strong>priorit√©</strong> (plus basse = mieux). Valeur par d√©faut : 32768.</li>
                            <li>En cas d'√©galit√©, on compare <strong>l'ID syst√®me √©tendu</strong> (li√© au VLAN dans PVST+).</li>
                            <li>En dernier recours, on compare <strong>l'adresse MAC</strong> (plus basse = mieux).</li>
                        </ol>
                    </li>
                    <li><span class="concept-key">Illusion conceptuelle d√©construite</span> : "Le Pont Racine est celui avec la priorit√© la plus basse". C'est presque vrai, mais incomplet. C'est le <strong>BID</strong> le plus bas qui est √©lu. Avec les configurations par d√©faut (priorit√© identique √† 32768), c'est effectivement l'adresse MAC la plus basse qui l'emporte, pas une priorit√© "plus basse".</li>
                    <li><strong>ID syst√®me √©tendu</strong> : Son inclusion est une √©volution majeure. Il encode le num√©ro de VLAN (sur 12 bits), permettant √† PVST+ d'ex√©cuter une instance STP ind√©pendante par VLAN.</li>
                </ul>

                <h3 id="roles-ports">C. Les R√¥les de Port : La Cl√© de la Pr√©vention des Boucles</h3>
                <ol>
                    <li><strong>Port Racine (Root Port - RP)</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : √ätre le <strong>meilleur chemin depuis ce switch</strong> vers le Pont Racine.</li>
                            <li><strong>D√©termination</strong> : Le port avec le <strong>Root Path Cost</strong> le plus bas. Ce co√ªt est la somme des co√ªts des liens depuis le Pont Racine. En cas d'√©galit√© de co√ªt, on utilise un ordre de tie-breaker : BID voisin le plus bas, puis Port ID voisin le plus bas.</li>
                            <li><strong>√âtat</strong> : <em>Forwarding</em> (apr√®s les √©tats transitoires).</li>
                        </ul>
                    </li>
                    <li><strong>Port D√©sign√© (Designated Port - DP)</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : √ätre le <strong>meilleur port sur un segment LAN</strong> pour envoyer/recevoir le trafic vers/du Pont Racine.</li>
                            <li><strong>D√©termination</strong> : Par segment (lien entre deux switches, ou lien vers un h√¥te), le port du switch qui a le <strong>meilleur chemin vers le Pont Racine</strong> devient DP. Si les deux switches ont le m√™me co√ªt, c'est le port du switch avec le BID le plus bas qui gagne.</li>
                            <li><strong>√âtat</strong> : <em>Forwarding</em>.</li>
                            <li><span class="concept-key">Illusion conceptuelle d√©construite</span> : "Le port d√©sign√© est le meilleur port vers le Pont Racine". C'est ambigu. Le Port Racine est le meilleur port <em>depuis un switch</em>. Le Port D√©sign√© est le meilleur port <em>pour un segment</em>. Sur le lien direct entre un switch non-racine et le Pont Racine, le port du Pont Racine est DP, et le port du switch non-racine est RP.</li>
                        </ul>
                    </li>
                    <li><strong>Port Alternatif / Bloqu√© (Alternate/Blocked Port)</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : √ätre le port redondant, pr√™t √† prendre le relais, mais <strong>bloqu√©</strong> pour pr√©venir la boucle.</li>
                            <li><strong>D√©termination</strong> : Tout port qui n'est ni RP ni DP.</li>
                            <li><strong>√âtat</strong> : <em>Blocking</em> (STP) / <em>Discarding</em> (RSTP). Il √©coute les BPDU mais ne transmet <strong>aucune trame de donn√©es utilisateur</strong>.</li>
                        </ul>
                    </li>
                </ol>

                <h3 id="convergence">D. La Convergence et ses √âtats (STP vs RSTP)</h3>
                <ul>
                    <li><strong>Minuteurs STP</strong> : Sources de lenteur.
                        <ul>
                            <li><strong>Hello (2s)</strong> : Intervalle des BPDU.</li>
                            <li><strong>Forward Delay (15s)</strong> : Temps pass√© dans chacun des √©tats <em>Listening</em> et <em>Learning</em>. <strong>Total : 30 secondes d'attente</strong> avant de transmettre des donn√©es.</li>
                            <li><strong>Max Age (20s)</strong> : Temps maximum pour attendre une BPDU avant de consid√©rer le chemin perdu.</li>
                        </ul>
                    </li>
                    <li><strong>√âtats des Ports STP</strong> :
                        <ul>
                            <li><strong>Blocking</strong> : Re√ßoit des BPDU seulement. Aucune donn√©e. Attente de 20s (Max Age) si aucune BPDU.</li>
                            <li><strong>Listening</strong> : Re√ßoit et envoie des BPDU pour d√©terminer la topologie. <strong>Ne transmet PAS de trames de donn√©es</strong>. Attente de 15s.</li>
                            <li><strong>Learning</strong> : Re√ßoit et envoie des BPDU. <strong>Commence √† peupler la table MAC</strong> √† partir des trames re√ßues. <strong>Ne transmet PAS de trames de donn√©es</strong>. Attente de 15s.</li>
                            <li><strong>Forwarding</strong> : Op√©ration normale. Transmet BPDU et donn√©es.</li>
                            <li><strong>Disabled</strong> : Administrativement d√©sactiv√©.</li>
                        </ul>
                    </li>
                    <li><strong>Rapid Spanning Tree Protocol (RSTP - IEEE 802.1w)</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : Convergence en quelques centaines de millisecondes.</li>
                            <li><strong>Changement majeur</strong> : R√©duction √† <strong>trois √©tats op√©rationnels</strong>.
                                <ul>
                                    <li><strong>Discarding</strong> : Fusion des √©tats <em>Disabled</em>, <em>Blocking</em> et <em>Listening</em>. Aucune donn√©e utilisateur ne passe.</li>
                                    <li><strong>Learning</strong> : Identique √† STP.</li>
                                    <li><strong>Forwarding</strong> : Identique √† STP.</li>
                                </ul>
                            </li>
                            <li><strong>Avantage</strong> : √âlimine les d√©lais passifs. Les ports peuvent passer directement de <em>Discarding</em> √† <em>Forwarding</em> via des m√©canismes de n√©gociation de port rapide (Proposal/Agreement).</li>
                        </ul>
                    </li>
                </ul>

                <h3 id="implementations">E. Les Impl√©mentations par VLAN</h3>
                <ul>
                    <li><strong>PVST+ (Per-VLAN Spanning Tree Plus - Cisco)</strong> : Ex√©cute une instance <strong>STP 802.1D par VLAN</strong>. Permet d'avoir un Pont Racine diff√©rent par VLAN, r√©partissant ainsi le trafic sur les diff√©rents liens uplinks.</li>
                    <li><strong>Rapid-PVST+ (Cisco)</strong> : Ex√©cute une instance <strong>RSTP 802.1w par VLAN</strong>. C'est la norme sur les commutateurs Cisco modernes. Offre la convergence rapide de RSTP avec la granularit√© par VLAN de PVST+.</li>
                </ul>

                <h3 id="optimisations">F. Les Optimisations pour l'Acc√®s</h3>
                <ul>
                    <li><strong>PortFast</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : √âviter les d√©lais de 30 secondes (Listening + Learning) sur les <strong>ports d'acc√®s connect√©s √† des h√¥tes finaux</strong> (PC, serveur, imprimante).</li>
                            <li><strong>Fonctionnement</strong> : Le port passe <strong>imm√©diatement √† l'√©tat <em>Forwarding</em></strong> d√®s qu'il est activ√© physiquement. Il ignore les √©tats transitoires.</li>
                            <li><strong>Condition de validit√©</strong> : <strong>DOIT √™tre utilis√© uniquement sur des ports connect√©s √† des √©quipements terminaux qui ne g√©n√®rent PAS de boucle.</strong> Jamais sur un lien vers un autre switch.</li>
                            <li><strong>Cons√©quence pratique</strong> : R√©sout le probl√®me des clients DHCP qui expirent avant d'obtenir une adresse IP.</li>
                        </ul>
                    </li>
                    <li><strong>Protection BPDU (BPDU Guard)</strong> :
                        <ul>
                            <li><strong>Objectif</strong> : S√©curiser la configuration PortFast.</li>
                            <li><strong>Fonctionnement</strong> : Si un port avec PortFast et BPDU Guard activ√©s <strong>re√ßoit une BPDU</strong> (ce qui indiquerait qu'un switch a √©t√© connect√© par erreur), il est imm√©diatement mis dans l'√©tat <strong>err-disabled</strong> (d√©sactiv√© par erreur). Cela emp√™che la cr√©ation accidentelle d'une boucle.</li>
                            <li><strong>C'est une mesure de s√©curit√© proactive indispensable avec PortFast.</strong></li>
                        </ul>
                    </li>
                </ul>
            </section>

            <!-- Section Illusions -->
            <section id="illusions" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Pi√®ges √† √âviter</span>
                    <h2>4Ô∏è‚É£ Illusions Conceptuelles Majeures (Issues des R√©ponses Fausses)</h2>
                </div>

                <div class="illusion-box">
                    <h4>1. Illusion : "STP est un protocole de couche 3" ou "STP fait du routage".</h4>
                    <p><strong>Pourquoi elle semble plausible</strong> : STP g√®re des chemins dans le r√©seau, comme les protocoles de routage.</p>
                    <p><strong>Pourquoi elle est fausse</strong> : STP op√®re exclusivement au niveau des adresses MAC et des trames Ethernet (couche 2). Il ne comprend pas les adresses IP. Son but est de bloquer des liens, pas de choisir des routes bas√©es sur des m√©triques IP.</p>
                    <p><strong>Raisonnement correct</strong> : S√©parer mentalement la <span class="concept-key">commutation (couche 2, MAC, STP)</span> du <span class="concept-key">routage (couche 3, IP, OSPF/EIGRP)</span>. STP est au switch ce qu'un protocole de routage est au routeur, mais dans des couches diff√©rentes.</p>
                </div>

                <div class="illusion-box">
                    <h4>2. Illusion : "Le port qui transmet les trames sur un segment est toujours le port racine."</h4>
                    <p><strong>Pourquoi elle semble plausible</strong> : Le port racine est important et transmet des donn√©es.</p>
                    <p><strong>Pourquoi elle est fausse</strong> : Sur un segment entre deux switches, un seul port est actif pour transmettre les donn√©es <em>vers/depuis ce segment</em> : c'est le <strong>Port D√©sign√©</strong>. Ce DP peut √™tre sur le Pont Racine ou sur un autre switch. Le Port Racine est toujours <em>sur le switch non-racine</em> et regarde <em>vers le Pont Racine</em>.</p>
                    <p><strong>Raisonnement correct</strong> : Se poser deux questions : 1) "Quel est le meilleur chemin depuis ce switch vers la racine ?" ‚Üí R√©ponse : Port Racine. 2) "Quel est le meilleur port pour ce segment particulier ?" ‚Üí R√©ponse : Port D√©sign√©.</p>
                </div>

                <div class="illusion-box">
                    <h4>3. Illusion : "Les ports bloqu√©s ne font rien." ou "Les ports bloqu√©s transmettent des BPDU."</h4>
                    <p><strong>Pourquoi elle semble plausible</strong> : Le nom "bloqu√©" sugg√®re l'inactivit√©.</p>
                    <p><strong>Pourquoi elle est fausse / incompl√®te</strong> : Un port bloqu√© est <strong>tr√®s actif</strong> dans la surveillance du r√©seau. Il <strong>re√ßoit</strong> constamment des BPDU de son voisin. Cela lui permet de d√©tecter si le chemin principal est tomb√© (plus de BPDU re√ßus). Il ne transmet <strong>pas</strong> de BPDU g√©n√©r√©s par son propre switch (sauf dans des cas tr√®s sp√©cifiques de RSTP), et ne transmet <strong>jamais</strong> de trames de donn√©es.</p>
                    <p><strong>Raisonnement correct</strong> : Un port bloqu√© est un <span class="concept-key">sentinelle</span>. Il √©coute le r√©seau pour √™tre pr√™t √† prendre le relais. Son statut de "non-transmission" ne s'applique qu'aux donn√©es utilisateur.</p>
                </div>

                <div class="illusion-box">
                    <h4>4. Illusion : "PortFast est fait pour acc√©l√©rer la convergence entre switches."</h4>
                    <p><strong>Pourquoi elle semble plausible</strong> : PortFast acc√©l√®re le passage √† l'√©tat Forwarding.</p>
                    <p><strong>Pourquoi elle est fausse</strong> : PortFast est une <strong>exception dangereuse</strong> au processus STA normal. Elle ne doit √™tre appliqu√©e que l√† o√π l'on est <strong>absolument certain</strong> qu'aucune boucle ne peut se former : sur les ports connect√©s √† un seul √©quipement terminal non-bridg√©. L'utiliser entre switches cr√©erait une boucle instantan√©e.</p>
                    <p><strong>Raisonnement correct</strong> : PortFast = "Faire confiance √† ce port". On ne fait confiance qu'aux h√¥tes finaux. Toujours associer <strong>BPDU Guard</strong> √† PortFast.</p>
                </div>
            </section>

            <!-- Section Raisonnement -->
            <section id="raisonnement" class="module-section">
                <div class="section-header">
                    <span class="section-tag">M√©thode Expert</span>
                    <h2>5Ô∏è‚É£ Raisonnement d'Administrateur R√©seau Expert</h2>
                </div>
                <p>Un expert ne voit pas STP comme une collection de commandes, mais comme un <span class="concept-key">syst√®me dynamique dont il influence le comportement</span>.</p>
                <ol>
                    <li><strong>Penser en causalit√© et en syst√®me</strong> :
                        <ul>
                            <li>Avant de changer la priorit√© STP d'un switch, l'expert anticipe : "Si je fais de ce switch le Pont Racine, tous les chemins racine vont-ils √™tre optimaux ? Vais-je cr√©er un goulot d'√©tranglement ?"</li>
                            <li>Il comprend que modifier un co√ªt de port sur un lien influence non seulement les ports directs, mais peut aussi d√©clencher un changement de r√¥le de port (DP vers bloqu√©) sur un segment distant, modifiant ainsi tout le flux de trafic.</li>
                        </ul>
                    </li>
                    <li><strong>La m√©thodologie de d√©pannage STP</strong> :
                        <ul>
                            <li><strong>√âtape 1 : Identifier le Pont Racine r√©el (<code>show spanning-tree root</code>)</strong>. Est-ce le switch souhait√© par le design ? Sinon, v√©rifier les BID.</li>
                            <li><strong>√âtape 2 : V√©rifier les r√¥les de port (<code>show spanning-tree detail</code>)</strong>. Pour un lien qui devrait √™tre actif mais ne passe pas de trafic : est-ce que le port est bien en <em>Forwarding</em> ? Est-il DP ou RP ? Si non, pourquoi ? (Co√ªt trop √©lev√© ? BID voisin meilleur ?)</li>
                            <li><strong>√âtape 3 : Auditer la coh√©rence</strong>. Les BPDU sont-elles re√ßues partout ? Un filtre ACL bloque-t-il le protocole 0x4242 ou l'adresse MAC 01:80:C2:00:00:00 ?</li>
                            <li><strong>√âtape 4 : V√©rifier les optimisations</strong>. Les ports d'acc√®s ont-ils PortFast et BPDU Guard ? Si oui, un port est-il en err-disabled ? Cela signale une mauvaise connexion.</li>
                        </ul>
                    </li>
                    <li><strong>Design pour la r√©silience et la performance</strong> :
                        <ul>
                            <li>L'expert choisit manuellement et place strat√©giquement le Pont Racine (et le Pont Racine secondaire) au centre de la topologie logique, g√©n√©ralement sur les switches de distribution ou de c≈ìur, qui sont les plus puissants et disponibles.</li>
                            <li>Il utilise PVST+ ou Rapid-PVST+ pour r√©partir la charge du trafic des diff√©rents VLAN sur des liens uplinks diff√©rents, en assignant des Ponts Racine diff√©rents.</li>
                            <li>Il limite le domaine STP. Dans un design moderne, il pousse le routage (L3) aussi loin que possible vers la p√©riph√©rie, confinant STP √† un petit nombre de switches d'acc√®s, r√©duisant ainsi la complexit√© et le risque de perturbation √† grande √©chelle.</li>
                        </ul>
                    </li>
                </ol>
            </section>

            <!-- Section Synth√®se -->
            <section id="synthese" class="module-section">
                <div class="section-header">
                    <span class="section-tag">√Ä Retenir Absolument</span>
                    <h2>6Ô∏è‚É£ Synth√®se Ultra-M√©morisable Long Terme</h2>
                </div>

                <h3>Lois Conceptuelles :</h3>
                <div class="law-box">
                    <p>1. <strong>Loi de la Racine</strong> : <strong>Tout converge vers le BID le plus bas.</strong> C'est le premier principe immuable.</p>
                    <p>2. <strong>Loi des Chemins</strong> : <strong>Le trafic suit toujours le chemin de co√ªt cumul√© le plus bas vers la Racine.</strong></p>
                    <p>3. <strong>Loi des Ports</strong> : <strong>Sur un segment, un seul p√®re (DP) ; sur un switch, un seul chemin vers le p√®re (RP) ; tous les autres sont en standby (Alternatif).</strong></p>
                </div>

                <h3>√âquations Mentales :</h3>
                <div class="equation-box">
                    <p><strong>√âlection = min(BID) ‚Üí Chemin = min(Co√ªt Racine) ‚Üí Segment = min(Co√ªt Racine local) ‚Üí Tie-Breaker = min(BID voisin, Port ID voisin)</strong></p>
                </div>

                <h3>Rappel de l'Analogie :</h3>
                <div class="analogy-box">
                    <p>Dans le syst√®me de chauffage, on ne veut qu'un seul flux actif de la chaudi√®re (Racine) vers chaque b√¢timent (switch). On ferme des vannes (ports bloqu√©s) pour briser les boucles, mais on les garde pr√™tes √† s'ouvrir en cas de rupture de canalisation (panne). Vous, administrateur, √™tes l'ing√©nieur en chef qui d√©finit o√π se trouve la chaudi√®re et planifie quelles vannes doivent rester ouvertes.</p>
                </div>
            </section>

            <!-- Section Extension -->
            <section id="extension" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Perspectives</span>
                    <h2>7Ô∏è‚É£ Extension Contr√¥l√©e (Au-del√† du Cadre Initial)</h2>
                </div>
                <ul>
                    <li><strong>Multiple Spanning Tree (MSTP - IEEE 802.1s)</strong> : Le successeur √©volu√© de PVST+. Au lieu d'une instance par VLAN (lourd), il permet de <span class="concept-key">mapper plusieurs VLAN sur un m√™me arbre logique (MSTI)</span>. On peut ainsi avoir quelques arbres seulement (ex: "Arbre_VLANs_Data", "Arbre_VLANs_Voix") et r√©partir la charge, avec une bien meilleure efficacit√© que PVST+ √† grande √©chelle.</li>
                    <li><strong>Les limites de STP et le paradigme du "Routage Everywhere"</strong> : Dans les data centers modernes (fabric VXLAN, EVPN), STP est souvent <span class="concept-key">d√©sactiv√©</span>. La redondance et la boucle libre sont garanties par des protocoles de couche 3 (sous-jacents ou overlay) et des protocoles de contr√¥le de fabrique qui g√®rent nativement les multi-chemin (ECMP). STP est vu comme un protocole lent, r√©actif et peu scalable pour ces environnements.</li>
                    <li><strong>Protections avanc√©es</strong> : Au-del√† de BPDU Guard, l'expert conna√Æt <span class="concept-key">Root Guard</span> (emp√™che un port de devenir Port Racine, prot√©geant le Pont Racine √©lu), <span class="concept-key">Loop Guard</span> (d√©tecte les boucles unidirectionnelles), et <span class="concept-key">UDLD</span> (UniDirectional Link Detection), pour renforcer la robustesse de l'arbre.</li>
                    <li><strong>Vision "Vendor-Neutral"</strong> : Comprendre que les concepts de BID, RPC, RP, DP sont universels (IEEE). Les impl√©mentations comme PVST+ sont des extensions Cisco. MSTP est le standard ouvert recommand√© pour les r√©seaux multi-vendors complexes.</li>
                </ul>
            </section>

            <!-- Section Objectifs -->
            <section id="objectifs" class="module-section">
                <div class="section-header">
                    <span class="section-tag">Finalit√©</span>
                    <h2>üéØ Objectifs Cognitifs Finaux ‚Äì Administrateur R√©seau √âlite</h2>
                </div>
                <div class="cognitive-objectives">
                    <p>√Ä la fin de ce module, vous pensez d√©sormais en termes de <span class="concept-key">syst√®me de r√©gulation distribu√©e</span> qui maintient la couche 2 en vie. Vous voyez la topologie physique d'un r√©seau commut√© et vous pouvez mentalement pr√©dire son arbre logique r√©sultant, identifiant les ports bloqu√©s et les chemins actifs. Vous comprenez que STP n'est pas une fonctionnalit√© optionnelle, mais le fondement n√©cessaire de toute redondance √† la couche 2.</p>
                    <p>Vous pouvez diagnostiquer une panne de connectivit√© en remontant la cha√Æne causale : de l'√©tat d'un port (err-disabled ? blocking ?), √† la r√©ception des BPDU, jusqu'√† l'√©lection du Pont Racine. Vous savez configurer STP pour optimiser la r√©silience et les performances, tout en appliquant les garde-fous de s√©curit√© (BPDU Guard, Root Guard).</p>
                    <br>
                    <h3>Vous devez pouvoir dire, sans h√©sitation :</h3>
                    <ul>
                        <li>¬´ Je comprends comment STP transforme une maille physique en un arbre logique stable. ¬ª</li>
                        <li>¬´ Je peux expliquer la diff√©rence cruciale entre Port Racine et Port D√©sign√©. ¬ª</li>
                        <li>¬´ Je sais pourquoi STP est lent et comment RSTP r√©sout ce probl√®me. ¬ª</li>
                        <li>¬´ Je con√ßois des r√©seaux commut√©s redondants en anticipant l'arbre STP r√©sultant. ¬ª</li>
                        <li>¬´ Je s√©curise les ports d'acc√®s avec PortFast et BPDU Guard sans cr√©er de risque. ¬ª</li>
                        <li>¬´ Je peux d√©panner une topologie STP complexe avec une m√©thodologie syst√©matique. ¬ª</li>
                        <li>¬´ Je connais les limites de STP et quand utiliser des alternatives de couche 3. ¬ª</li>
                    </ul>
                </div>
            </section>
        </main>
    </div>

    <footer class="page-footer">
        <p>Module Acad√©mique STP ‚Äî Reconstruction pour la Ma√Ætrise Expert</p>
        <p>¬© Format p√©dagogique HTML ‚Äî Contenu fig√© et valid√©.</p>
    </footer>

    <script>
        // Script pour la navigation mobile et le suivi des sections actives
        document.addEventListener('DOMContentLoaded', function() {
            const hamburger = document.getElementById('hamburger-btn');
            const mainMenu = document.getElementById('main-menu');
            const sidebarLinks = document.querySelectorAll('.sidebar-nav a');
            const mainNavLinks = document.querySelectorAll('.nav-menu a');

            // Gestion du menu hamburger
            hamburger.addEventListener('click', function() {
                mainMenu.classList.toggle('active');
            });

            // Fermer le menu mobile en cliquant sur un lien
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (mainMenu.classList.contains('active')) {
                        mainMenu.classList.remove('active');
                    }
                });
            });

            // Suivi de la section active (scroll)
            const sections = document.querySelectorAll('.module-section');
            const navLi = document.querySelectorAll('.sidebar-nav a, .nav-menu a');

            function setActiveSection() {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 150;
                    const sectionHeight = section.clientHeight;
                    if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                        current = section.getAttribute('id');
                    }
                });

                navLi.forEach(li => {
                    li.classList.remove('active', 'active-section');
                    if (li.getAttribute('href') === `#${current}`) {
                        li.classList.add('active', 'active-section');
                    }
                });
            }

            window.addEventListener('scroll', setActiveSection);
            // Initialiser l'√©tat actif au chargement
            setActiveSection();
        });
    </script>
</body>
</html>